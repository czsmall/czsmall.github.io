[{"title":"dockeréƒ¨ç½²prometheus+grafana+alertmanager+dingtal","path":"/2023/11/03/dockeréƒ¨ç½²prometheus-grafana-alertmanager-dingtal/","content":"æ‘˜è¦ ä¸€çº§æ ‡é¢˜docker run -d -p 9090:9090 \\ -v /opt/prometheus:/etc/prometheus \\ -v /etc/localtime:/etc/localtime \\ prom/prometheus docker run -d -p 3000:3000 \\ --name=grafana \\ -v /etc/localtime:/etc/localtime \\ grafana/grafana docker run -d -p 9093:9093 \\ -v /opt/alertmanager/:/etc/alertmanager/ \\ -v /etc/localtime:/etc/localtime \\ --name alertmanager \\ prom/alertmanager docker run -d -p 9123:9000 \\ -p 8000:8000 --restart always \\ -v /var/run/docker.sock:/var/run/docker.sock \\ -v /opt/docker/portainer-ce/data:/data \\ --name portainer-ce \\ portainer/portainer-ce [Unit]Description=node_exporter Monitoring SystemDocumentation=node_exporter Monitoring SystemDescription=stathubAfter=network.target[Service]Type=simpleUser=rootExecStart=/usr/local/bin/node_exporter[Install]WantedBy=multi-user.target"},{"title":"æµ‹è¯•æ–‡ç« ","path":"/2023/09/14/æµ‹è¯•é¡µ/","content":"åœ¨å¿ƒç‡ç®¡å®¶é»˜é»˜æ— é—»åœ°ä¸Šçº¿äº†ä¸€å¹´å¤šä¹‹åï¼Œç°åœ¨ç»ˆäºæ‰“ç®—æ¥å¥½å¥½èŠèŠå…³äºæ‰‹æœºæ‘„åƒå¤´æµ‹é‡å¿ƒç‡çš„é‚£äº›äº‹ã€‚æœ¬æ–‡å‚è€ƒäº†å¾ˆå¤šå‰è¾ˆçš„æ–‡ç« ï¼Œå°†åœ¨æ–‡æœ«åˆ—å‡ºã€‚ åé¢æ˜¯æ­£æ–‡éƒ¨åˆ†ï¼Œåœ¨ä¸»é¡µçœ‹ä¸åˆ°ã€‚ h1 &#x2F;bibi&#x2F;poster: topic: #æ ‡é¢˜ä¸Šæ–¹çš„å°å­— # å¯é€‰ headline: æµ‹è¯•æ–‡ç« é¡µ caption: ä¸‹æ–¹çš„å°æ ‡é¢˜ # color: æ ‡é¢˜é¢œè‰² # å¯é€‰ï¼Œé»˜è®¤ä¸ºè·Ÿéšä¸»é¢˜çš„åŠ¨æ€é¢œè‰² # white,redâ€¦tags: [æµ‹è¯•] #æ ‡ç­¾categories: #åˆ†ç±»ç›¸å…³æ–‡ç« æ¨èè¦å®ç°ç›¸å…³æ–‡ç« æ¨èåŠŸèƒ½ï¼Œæ‚¨éœ€è¦å®‰è£…æ’ä»¶ï¼š npm i hexo-related-popular-postsç„¶ååœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯ï¼š blog&#x2F;_config.stellar.ymlarticle: npm i hexo-related-popular-posts related_posts: enable: true title: æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« Copyå¼€å¯åä¼šåœ¨æ¯ç¯‡æ–‡ç« çš„ä¸‹æ–¹æ¨èç›¸åŒç±»å‹çš„æ–‡ç« ã€‚ å‚è€ƒèµ„æ–™å¡«å†™å¼•ç”¨æ–‡ç« çš„æ ‡é¢˜å’Œé“¾æ¥ï¼š references: - title: â€˜å¿ƒè·³ä¹‹æ—…â€”ğŸ’—â€”iOSç”¨æ‰‹æœºæ‘„åƒå¤´æ£€æµ‹å¿ƒç‡(PPG)â€™ url: https://punmy.cn/2016/07/28/15231176397746.html - title: â€˜PPGå…‰ç”µå®¹ç§¯è„‰ææ³¢æè®°æ³•æŠ€æœ¯æ¦‚å†µâ€™ url: https://www.jianshu.com/p/695c131abfa5 â€¦[https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.nga.178.com%2Fattachments%2Fmon_202011%2F28%2F7nQ5-bx27XlZ5yT3cS1h8-tz.png&refer=http%3A%2F%2Fimg.nga.178.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1697445446&t=cb5250208a77c702c701da03ced37ec4] [download:bool/string] Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start cover: &#x2F;assets&#x2F;xaoxuu&#x2F;blog&#x2F;&#50;&#x30;&#50;&#x30;&#x2d;&#48;&#57;&#50;&#x37;&#97;&#x40;&#49;&#x78;&#46;&#115;&#x76;&#x67; # å¿…é€‰poster: # æµ·æŠ¥ï¼ˆå¯é€‰ï¼Œå…¨å›¾å°é¢å¡ç‰‡ï¼‰ topic: æ ‡é¢˜ä¸Šæ–¹çš„å°å­— # å¯é€‰ headline: å¤§æ ‡é¢˜ # å¿…é€‰ caption: æ ‡é¢˜ä¸‹æ–¹çš„å°å­— # å¯é€‰ color: æ ‡é¢˜é¢œè‰² # å¯é€‰ï¼Œé»˜è®¤ä¸ºè·Ÿéšä¸»é¢˜çš„åŠ¨æ€é¢œè‰² # white,redâ€¦ â€“topic æ—¶å¤§æ ‡é¢˜ä½äºä¸Šæ–¹caption æ—¶å¤§æ ‡é¢˜ä½äºä¸‹æ–¹ [æè¿°] [download:bool/string] f æ”¯æŒå¤šå½©æ ‡è®°ï¼ŒåŒ…æ‹¬ï¼šé»˜è®¤ çº¢ æ©™ é»„ ç»¿ é’ è“ ç´« æµ… æ·± è­¦å‘Š é”™è¯¯ ä¸€å…± 12 ç§é¢œè‰²ã€‚mark è¡Œå†…æ–‡æœ¬æ ‡è®° æ”¯æŒå¤šå½©æ ‡è®°ï¼ŒåŒ…æ‹¬ï¼š é»˜è®¤ çº¢ æ©™ é»„ ç»¿ é’ è“ ç´« æµ… æ·± è­¦å‘Š é”™è¯¯ ä¸€å…± 12 ç§é¢œè‰²ã€‚ tag æ ‡ç­¾ Stellar Hexo GitHub Gitea image å›¾ç‰‡æ ‡ç­¾ [description] [download:true] [width:px] [padding:px] [bg:hex] src: å›¾ç‰‡åœ°å€description: å›¾ç‰‡æè¿°download: href # ä¸‹è½½åœ°å€ï¼Œè®¾ç½®æ­¤å€¼åé¼ æ ‡æ”¾åœ¨å›¾ç‰‡ä¸Šä¼šæ˜¾ç¤ºä¸‹è½½åœ°å€ï¼Œå¦‚æœä¸‹è½½åœ°å€ä¸ºå›¾ç‰‡åœ°å€ï¼Œå¯ä»¥è®¾ç½®ä¸º truewidth: 200px # å›¾ç‰‡å®½åº¦padding: 16px # å›¾ç‰‡å››å‘¨å¡«å……å®½åº¦bg: â€˜#ffffffâ€™ # å›¾ç‰‡åŒºåŸŸèƒŒæ™¯é¢œè‰²ï¼Œ16è¿›åˆ¶ æ¥è‡ªå°åº¦çš„ Rohit Vohra ä½¿ç”¨ iPhone 12 Pro Max æ‹æ‘„ã€‚ æ²¡æœ‰åº•è‰²çš„å›¾ç‰‡ï¼Œå¯ä»¥å¡«å…… bg:var(â€“card) åŠ¨æ€é¢œè‰²ï¼Œèƒ½å¤Ÿé€‚é…æš—é»‘æ¨¡å¼ï¼š é€‚åˆå±…ä¸­ä¸”é†’ç›®çš„å¼•ç”¨ï¼šStellar æ˜¯æœ€å¥½ç”¨çš„ä¸»é¢˜æ”¯æŒè‡ªå®šä¹‰å¼•å·ï¼šçƒ­é—¨è¯é¢˜ æ­¤å¤–ï¼ŒåŠ ä¸Š el:h2&#x2F;h3&#x2F;h4&#x2F;h5&#x2F;h6 å¯ä»¥ä½œä¸ºæ ‡é¢˜ä½¿ç”¨ poetry è¯—è¯ æ¸¸å±±è¥¿æ‘é™†æ¸¸è«ç¬‘å†œå®¶è…Šé…’æµ‘ï¼Œä¸°å¹´ç•™å®¢è¶³é¸¡è±šã€‚å±±é‡æ°´å¤ç–‘æ— è·¯ï¼ŒæŸ³æš—èŠ±æ˜åˆä¸€æ‘ã€‚ç®«é¼“è¿½éšæ˜¥ç¤¾è¿‘ï¼Œè¡£å† ç®€æœ´å¤é£å­˜ã€‚ä»ä»Šè‹¥è®¸é—²ä¹˜æœˆï¼Œæ‹„æ–æ— æ—¶å¤œå©é—¨ã€‚è¯—è¯èŠ‚é€‰ title: æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰content: å†…å®¹color: red&#x2F;orange&#x2F;yellow&#x2F;green&#x2F;cyan&#x2F;blue&#x2F;purple&#x2F;light&#x2F;dark&#x2F;warning&#x2F;error å…·æœ‰æ ‡é¢˜çš„å¤‡æ³¨å—ç›´æ¥å†™å¤‡æ³¨å†…å®¹ï¼Œé»˜è®¤æ˜¯å’Œä»£ç å—ä¸€æ ·çš„æ ·å¼ï¼Œç¬¬ä¸€ä¸ªç©ºæ ¼å‰é¢çš„æ˜¯æ ‡é¢˜ï¼Œåé¢çš„æ˜¯æ­£æ–‡ï¼Œå¦‚æœæ ‡é¢˜ä¸­éœ€è¦æ˜¾ç¤ºç©ºæ ¼ï¼Œè¯·ä½¿ç”¨ &nbsp; ä»£æ›¿ã€‚ è¿™&nbsp;æ˜¯/å¯ç”¨ç©ºæ ¼ä»£æ›¿æ ‡é¢˜æ ‡é¢˜è¿™æ˜¯æ­£æ–‡ å“ˆå“ˆã€‚ å½©è‰²å¤‡æ³¨å— ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ ä¸€å…±æ”¯æŒ12ç§é¢œè‰²ï¼Œå¯ä»¥æ»¡è¶³å‡ ä¹æ‰€æœ‰çš„éœ€æ±‚äº†ã€‚color å¯è®¾ç½® redã€orangeã€yellowã€greenã€cyanã€blueã€purpleã€lightã€darkã€warningã€error å‡ ç§å–å€¼ã€‚ link é“¾æ¥å¡ç‰‡ #% link href [title] [icon:src] [desc:true&#x2F;false] %# ä¸å¸¦æ‘˜è¦çš„æ ·å¼ï¼š https://xaoxuu.com/blog/20221029/https://xaoxuu.com/blog/20221029/ å¸¦æ‘˜è¦çš„æ ·å¼ï¼š https://xaoxuu.com/blog/20221029/https://xaoxuu.com/blog/20221029/ href: é“¾æ¥title: å¯é€‰ï¼Œæ‰‹åŠ¨è®¾ç½®æ ‡é¢˜ï¼ˆä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨æŠ“å–é¡µé¢æ ‡é¢˜ï¼‰icon: å¯é€‰ï¼Œæ‰‹åŠ¨è®¾ç½®å›¾æ ‡ï¼ˆä¸ºç©ºæ—¶ä¼šè‡ªåŠ¨æŠ“å–é¡µé¢å›¾æ ‡ï¼‰desc: å¯é€‰ï¼Œæ˜¯å¦æ˜¾ç¤ºæ‘˜è¦æè¿°ï¼Œä¸ºtrueæ—¶å°†ä¼šæ˜¾ç¤ºé¡µé¢æè¿° copy å¤åˆ¶è¡Œ æ²¡æœ‰å‹¾é€‰çš„å•é€‰æ¡† å·²å‹¾é€‰çš„å•é€‰æ¡† å‚æ•°ï¼šchecked: true&#x2F;falsecolor: red&#x2F;orange&#x2F;yellow&#x2F;green&#x2F;cyan&#x2F;blue&#x2F;purple checkbox å¤é€‰ æ™®é€šçš„æ²¡æœ‰å‹¾é€‰çš„å¤é€‰æ¡† æ™®é€šçš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºåŠ å·çš„ç»¿è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºå‡å·çš„é»„è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† æ˜¾ç¤ºä¸ºä¹˜å·çš„çº¢è‰²çš„å·²å‹¾é€‰çš„å¤é€‰æ¡† checked: true&#x2F;falsecolor: red&#x2F;orange&#x2F;yellow&#x2F;green&#x2F;cyan&#x2F;blue&#x2F;purplesymbol: plus&#x2F;minus&#x2F;times å†…ç½®å½“è¡Œ æ–‡ç« é¡¹ç›®ç•™è¨€GitHub è®¾å¤‡ è¿™æ˜¯ å¯†ç  æ ‡ç­¾ è¿™æ˜¯ ä¸‹åˆ’çº¿ æ ‡ç­¾ è¿™æ˜¯ ç€é‡å· æ ‡ç­¾ è¿™æ˜¯ æ³¢æµªçº¿ æ ‡ç­¾ è¿™æ˜¯ åˆ é™¤çº¿ æ ‡ç­¾ è¿™æ˜¯ ä¸Šè§’æ ‡ æ ‡ç­¾ è¿™æ˜¯ ä¸‹è§’æ ‡ æ ‡ç­¾ è¿™æ˜¯ é”®ç›˜æ ·å¼ æ ‡ç­¾ï¼Œè¯•ä¸€è¯•ï¼šâŒ˜ + D é™æ€æ—¶é—´çº¿ï¼šé™æ€æ•°æ®æ˜¯å†™æ­»åœ¨ md æºæ–‡ä»¶ä¸­çš„ï¼Œåœ¨ deploy æ—¶å°±å·²ç»ç¡®å®šäº†ã€‚ 2021 å¹´ 2 æœˆ 16 æ—¥ä¸»è¦éƒ¨åˆ†åŠŸèƒ½å·²ç»å¼€å‘çš„å·®ä¸å¤šäº†ã€‚2021 å¹´ 2 æœˆ 11 æ—¥ä»Šå¤©é™¤å¤•ï¼Œä¹Ÿæ˜¯ç”Ÿæ—¥ï¼Œä¸€ä¸ªäººåœ¨å¤–åœ°è¿‡å¹´+è¿‡ç”Ÿæ—¥ï¼Œç†¬å¤œå¼€å‘æ–°ä¸»é¢˜ï¼Œå°½é‡åœ¨å‡æœŸç»“æŸå‰æ”¾å‡ºå…¬æµ‹ç‰ˆã€‚ åŸå¯†ç  ç¬¬ä¸€æ­¥ï¼šæ‰“å¼€ GitHubæ‰“å¼€ Stellar çš„ GitHub é¡µé¢ã€‚ç¬¬äºŒæ­¥ï¼šç‚¹å‡» Starå¦‚æœå‘ç°å³ä¸Šè§’çš„ Star è¿˜æ²¡ç‚¹äº®ï¼Œå°±ç‚¹äº®å®ƒï¼ è¿‘æœŸåŠ¨æ€ï¼ˆè¯´è¯´ï¼‰ åŠ¨æ€æ•°æ®æ˜¯ä» GitHub Issues ä¸­æ‹‰å–çš„ï¼Œä½¿ç”¨æ–¹æ³•ä¸ºï¼š å»ºä¸€ä¸ªä»“åº“åˆ›å»ºä¸€ä¸ª issue å¹¶æ·»åŠ ä¸€ä¸ª label è¿›è¡Œæµ‹è¯•å†™ timeline æ ‡ç­¾æ—¶åŠ ä¸Š api:https://api.github.com/repos/your-name/your-repo/issues è®¾ç½® user:xxx åˆ™ä¼šåªæ˜¾ç¤ºæŸäººå‘çš„ issue æ•°æ®ï¼Œå¯ä»¥ç”¨æ¥å±•ç¤ºä¸ªäººåŠ¨æ€ã€‚ å‹é“¾æ–‡ç« è®¢é˜… å—¯ï¼Œé™¤äº† issues å’Œ releases æ•°æ®ï¼Œæ—¶é—´çº¿è¿˜å…¼å®¹ã€Œå‹é“¾æœ‹å‹åœˆã€æ•°æ®ï¼Œå¯ä»¥å±•ç¤ºå°ä¼™ä¼´ä»¬æœ€è¿‘å‘å¸ƒçš„æ–‡ç« ï¼š ä¾§è¾¹æ æ—¶é—´çº¿ åœ¨ source&#x2F;_data&#x2F;widgets.yml æ–‡ä»¶ä¸­åˆ›å»ºæ—¶é—´çº¿ç»„ä»¶ï¼štimeline: layout: timeline title: è¿‘æœŸåŠ¨æ€ api: https://api.github.com/repos/xaoxuu/blog-timeline/issues?per_page=1 user: xaoxuu timeline_stellar_more: layout: timeline title: Stellar æ¢ç´¢å· api: https://api.github.com/repos/xaoxuu/hexo-theme-stellar/issues?state=all&amp;labels=åˆ†äº«&amp;per_page=5 hide: title ç„¶ååœ¨éœ€è¦æ˜¾ç¤ºçš„é¡µé¢çš„ front-matter ä¸­çš„ sidebar éƒ¨åˆ†å†™ä¸Šå®ƒçš„åå­—ï¼Œä¾‹å¦‚æœ¬æ–‡çš„é…ç½®ï¼š sidebar: [toc, timeline_stellar_more] æ‚¨å¯ä»¥åœ¨ä»»ä½•ä½ç½®æ’å…¥å‹é“¾ç»„ï¼Œæ”¯æŒé™æ€æ•°æ®å’ŒåŠ¨æ€æ•°æ®ï¼Œé™æ€æ•°æ®éœ€è¦å†™åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼š friends å‹é“¾ blog&#x2F;source&#x2F;_data&#x2F;links.ymlâ€˜å¼€æºå¤§ä½¬â€™: - title: æŸæŸæŸ url: https:&#x2F;&#x2F; screenshot: avatar: description: sites ç½‘ç«™å¡ç‰‡ æ‚¨å¯ä»¥åœ¨ä»»ä½•ä½ç½®æ’å…¥ç½‘ç«™å¡ç‰‡ç»„ï¼Œæ”¯æŒé™æ€æ•°æ®å’ŒåŠ¨æ€æ•°æ®ï¼Œé™æ€æ•°æ®éœ€è¦å†™åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼šblog&#x2F;source&#x2F;_data&#x2F;links.ymlâ€˜åˆ†ç»„åâ€™: title: æŸæŸæŸurl: https:&#x2F;&#x2F;screenshot:avatar:description: åœ¨éœ€è¦çš„ä½ç½®è¿™æ ·å†™ï¼š å®¹å™¨ç±»æ ‡ç­¾ï¼ˆ7ä¸ªï¼‰ è¯­æ³•æ ¼å¼ [title] [color:color] [child:codeblock/tabs]â€¦ Stellar v1.12.0å› ä¸ºåŸ noteblock æ ‡ç­¾åœ¨å‡çº§åˆ° hexo 6.0 ä¹‹åè·Ÿå®˜æ–¹åº“å†²çªäº†ï¼Œå®˜æ–¹ä¸€ç›´æ²¡æœ‰è§£é‡ŠåŸå› ï¼Œåä¸å¾—ä¸æ”¹åï¼šnoteblock -&gt; grid -&gt; borderè¯¦æƒ…è§ï¼š#172 sdfs &lt;center&gt; &lt;/br&gt; &lt;script type=&quot;text/javascript&quot;&gt; function show_runtime() &#123; window.setTimeout(&quot;show_runtime()&quot;, 1000); X = new Date(&quot;9/15/2023 00:00:00&quot;); Y = new Date(); T = (Y.getTime() - X.getTime()); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60); runtime_span.innerHTML = &quot;â±ï¸æœ¬ç«™å·²è‰°éš¾è¿è¡Œ &quot; + A + &quot;å¤©&quot; + B + &quot;å°æ—¶&quot; + C + &quot;åˆ†&quot; + D + &quot;ç§’&quot; &#125; show_runtime(); &lt;/script&gt; &lt;span id=&quot;runtime_span&quot;&gt;&lt;/span&gt; &lt;/center&gt; &lt;center&gt; &lt;/br&gt; &lt;script type=&quot;text/javascript&quot;&gt; function show_runtime() &#123; window.setTimeout(&quot;show_runtime()&quot;, 1000); X = new Date(&quot;9/15/2023 00:00:00&quot;); Y = new Date(); T = (Y.getTime() - X.getTime()); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60); runtime_span.innerHTML = &quot;â±ï¸æœ¬ç«™å·²è‰°éš¾è¿è¡Œ &quot; + A + &quot;å¤©&quot; + B + &quot;å°æ—¶&quot; + C + &quot;åˆ†&quot; + D + &quot;ç§’&quot; &#125; show_runtime(); &lt;/script&gt; &lt;span id=&quot;runtime_span&quot;&gt;&lt;/span&gt; &lt;/center&gt; &#123;% tabs active:3 %&#125; &#123;% timeline %&#125; æœ¬åœ°git+server+nginxæ–¹å¼éƒ¨ç½²è°ƒè¯•ã€‚ [é˜¿é‡Œäº‘](https://wanwang.aliyun.com/)æ³¨å†ŒåŸŸåï¼ &#123;% endtimeline %&#125; ## æ„¿æœ›æ¸…å• &#123;% grid bg: %&#125; &#123;% image https://images.unsplash.com/photo-1625171515821-1870deb2743b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80 width:200px %&#125; Unsplash Photo The Galactic Center is the rotational center of the Milky Way galaxy. Its central massive object is a supermassive black hole of about 4 million solar masses, which is called Sagittarius A*. Its mass is equal to four million suns. The center is > located 25,800 light years away from Earth. &#123;% endgrid %&#125; &#123;% swiper effect:cards %&#125; &#123;% image https://images.unsplash.com/photo-1625171515821-1870deb2743b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80 %&#125; &#123;% image https://images.unsplash.com/photo-1528283648649-33347faa5d9e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80 %&#125; &#123;% image https://images.unsplash.com/photo-1542272201-b1ca555f8505?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80 %&#125; &#123;% image https://images.unsplash.com/photo-1524797905120-92940d3a18d6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80 %&#125; &#123;% endswiper %&#125; ## è¯´è¯´ &#123;% timeline hide:title,footer user:czsmall api:https://api.github.com/repos/czsmall/shuoshuo/issues?direction=asc&per_page=3 %&#125;&#123;% endtimeline %&#125; &#123;% endtabs %&#125; content: | # æ”¯æŒ Markdown æ ¼å¼ function show_runtime() { window.setTimeout(\"show_runtime()\", 1000); X = new Date(\"9/15/2023 00:00:00\"); Y = new Date(); T = (Y.getTime() - X.getTime()); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60); runtime_span.innerHTML = \"â±ï¸æœ¬ç«™å·²è‰°éš¾è¿è¡Œ \" + A + \"å¤©\" + B + \"å°æ—¶\" + C + \"åˆ†\" + D + \"ç§’\" } show_runtime(); content: | # æ”¯æŒ Markdown æ ¼å¼ &lt;center&gt; &lt;div style=&quot;margin:0.2rem;&quot;&gt; &lt;a href=&quot;https://travellings.link&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Travellings-å¼€å¾€--å‹é“¾æ¥åŠ›-86CAF2&quot; alt=&quot;Travellings&quot; /&gt;&lt;/a&gt; &lt;a href=&quot;https://www.foreverblog.cn/go.html&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Wormhole-åå¹´ä¹‹çº¦-D09968&quot; alt=&quot;ç©¿æ¢­è™«æ´--éšæœºè®¿é—®åå¹´ä¹‹çº¦å‹é“¾åšå®¢&quot; /&gt;&lt;/a&gt; &lt;/div&gt; &lt;br&gt; &lt;/br&gt; &lt;script type=&quot;text/javascript&quot;&gt; function show_runtime() &#123; window.setTimeout(&quot;show_runtime()&quot;, 1000); X = new Date(&quot;9/15/2023 00:00:00&quot;); Y = new Date(); T = (Y.getTime() - X.getTime()); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60); runtime_span.innerHTML = &quot;â±ï¸æœ¬ç«™å·²è‰°éš¾è¿è¡Œ &quot; + A + &quot;å¤©&quot; + B + &quot;å°æ—¶&quot; + C + &quot;åˆ†&quot; + D + &quot;ç§’&quot; &#125; show_runtime(); &lt;/script&gt; &lt;span id=&quot;runtime_span&quot;&gt;&lt;/span&gt; &lt;/center&gt; &#123;% timeline hide:title,footer user:czsmall limit:7 api:https://api.github.com/repos/czsmall/shuoshuo/issues?direction=asc& %&#125;&#123;% endtimeline %&#125;? direction=asc&amp; å€’å™","tags":["æœªçŸ¥"],"categories":["æœªçŸ¥"]},{"title":"Hello World","path":"/2023/09/13/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new &quot;My New Post&quot; More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment"},{"path":"/README.html","content":"opshxx.github.io"},{"path":"/about/index.html","content":"Hello.è‹¦éš¾ä¸å€¼å¾—è¢«æ­Œé¢‚ï¼Œä½†å¸Œæœ›æ°¸è¿œå€¼å¾—è¢«è¿½æ§å‹é“¾ç•™è¨€ å°ç«™å†ç¨‹æ„¿æœ›æ¸…å•è¯´è¯´2023 å¹´ 10 æœˆ 22 æ—¥åŸºäºGitHub Actionå®ç°åŠ¨æ€å‹é“¾è®¢é˜…2023 å¹´ 10 æœˆ 16 æ—¥æœ¬åœ°git+server+nginxæ–¹å¼éƒ¨ç½²è°ƒè¯•ã€‚2023 å¹´ 9 æœˆ 2 æ—¥ é˜¿é‡Œäº‘æ³¨å†ŒåŸŸåï¼ æ„¿æœ›æ¸…å•Unsplash PhotoThe Galactic Center is the rotational center of the Milky Way galaxy. Its central massive object is a supermassive black hole of about 4 million solar masses, which is called Sagittarius A*. Its mass is equal to four million suns. The center islocated 25,800 light years away from Earth. è¯´è¯´"},{"path":"/bibi/index.html","content":"#?direction&#x3D;asc&amp;ï¼ˆæ”¾åœ¨issuesåé¢å¯ä»¥å®ç°å€’å™ï¼‰"},{"path":"/friends/index.html","content":"Hello.å¯¹äºå¯æ§çš„äº‹æƒ…ï¼Œè¦ä¿æŒè°¨æ…ï¼Œå¯¹äºä¸å¯æ§çš„äº‹æƒ…ï¼Œè¦ä¿æŒä¹è§‚ï¼Œäººåªèƒ½åšè‡ªå·±èƒ½åŠ›èŒƒå›´å†…çš„äº‹æƒ…ï¼Œä½ è¦æ¥å—è¿™ä¸ªäº‹å®ï¼Œå¹¶ä¸”ä»¥ä¹è§‚çš„å¿ƒå»åº”å¯¹è¿™ä¸€åˆ‡ï¼› å‹é“¾ç•™è¨€ æœªé›¨ç­¹è°‹GO-LINUXè¿ç»´ä¸–ç•Œç‹å…ˆæ£®XAOXUUé…·å°å‘µå°ç™½ å‹é“¾åŠ¨æ€ æµ·å†…å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é‚»æœªé›¨ç­¹è°‹GO-LINUXè¿ç»´ä¸–ç•Œç‹å…ˆæ£®XAOXUUé…·å°å‘µå°ç™½ æµ‹è¯•githubåŒæ­¥ 22å·åŒæ­¥"},{"path":"/news/index.html","content":"20232022 2023 å¹´ 11 æœˆ 27 æ—¥å¤©å®‰é—¨2021 å¹´ 2 æœˆ 16 æ—¥TEST2021 å¹´ 2 æœˆ 16 æ—¥ä¸è§ç²—2021 å¹´ 2 æœˆ 16 æ—¥åšå®¢åŸºæœ¬å®Œæˆ2021 å¹´ 2 æœˆ 11 æ—¥æµ‹è¯•é¡µ"},{"path":"/notes/index.html","content":"Hello.å¯¹äºå¯æ§çš„äº‹æƒ…ï¼Œè¦ä¿æŒè°¨æ…ï¼Œå¯¹äºä¸å¯æ§çš„äº‹æƒ…ï¼Œè¦ä¿æŒä¹è§‚ï¼Œäººåªèƒ½åšè‡ªå·±èƒ½åŠ›èŒƒå›´å†…çš„äº‹æƒ…ï¼Œä½ è¦æ¥å—è¿™ä¸ªäº‹å®ï¼Œå¹¶ä¸”ä»¥ä¹è§‚çš„å¿ƒå»åº”å¯¹è¿™ä¸€åˆ‡ï¼› æ–‡æ¡£æ”¯æŒ å®˜æ–¹æ–‡æ¡£ æˆ´å°”VMwarewindowsserver æ·±ä¿¡æœ400-630-6430æµ·åº·å¨è§†400-800-5998åä¸º400-822-9999é”æ·400-208-818åä¸‰400-810-0504 å›½å†…é•œåƒç«™ é˜¿é‡Œå·´å·´é˜¿é‡Œå¼€æºè½¯ä»¶é•œåƒç«™æ¸…åå¤§å­¦æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ è®ºå› åšå®¢å›­CSDN"},{"path":"/network/index.html","content":"Hello..å¯¹äºå¯æ§çš„äº‹æƒ…ï¼Œè¦ä¿æŒè°¨æ…ï¼Œå¯¹äºä¸å¯æ§çš„äº‹æƒ…ï¼Œè¦ä¿æŒä¹è§‚ï¼Œäººåªèƒ½åšè‡ªå·±èƒ½åŠ›èŒƒå›´å†…çš„äº‹æƒ…ï¼Œä½ è¦æ¥å—è¿™ä¸ªäº‹å®ï¼Œå¹¶ä¸”ä»¥ä¹è§‚çš„å¿ƒå»åº”å¯¹è¿™ä¸€åˆ‡ï¼› æ–‡æ¡£æ”¯æŒ ä¸»æœºä½ CIDR MASK 2 &#x2F;30 255.255.255.254 6 &#x2F;29 255.255.255.248 14 &#x2F;28 255.255.255.240 30 &#x2F;27 255.255.255.192 62 &#x2F;26 255.255.255.128 126 &#x2F;25 255.255.255.248 254 &#x2F;24 255.255.255.0 510 &#x2F;23 255.255.254.0"},{"path":"/friends/rss/index.html","content":""},{"path":"/news/2022/index.html","content":"20222023"},{"path":"/news/2021/index.html","content":"20222023"},{"title":"Chome","path":"/notes/1/Chome.html","content":"æ’ä»¶æœç´¢è¯­æ³•æœç´¢è¯­æ³•è¯­æ³•å®Œæ•´ç¤ºä¾‹ æ ‡é¢˜æœç´¢: intitle:&quot;å…³é”®è¯&quot; | allintitle:æå­æŸ’å›å½’ å¾®å¿µ å†…å®¹æœç´¢: intext:å…³é”®è¯ | intext:&quot;æŸæŸ&quot; &quot;æŸæœºæ„&quot; æ ‡é¢˜+å†…å®¹ç»„åˆæœç´¢: intitle:&quot;Person Name&quot; intext:&quot;Organization or Product&quot; URLæœç´¢: å…³é”®è¯ inurl:ç½‘å€éƒ¨åˆ† | å…³é”®è¯ inurl:cctv intext:youtube é™å®šç‰¹å®šç½‘ç«™ç»“æœ: å…³é”®è¯ site:å®Œæ•´åŸŸå | æ—é›¨å¾® site:cctv.com|é™å®šå›¾åº“å¯ç”¨äºæœå›¾ é™å®šæ–‡ä»¶ç±»å‹: ä¸»é¢˜è¯ filetype:æ–‡ä»¶æ‰©å±•å | å¤§è¯­è¨€æ¨¡å‹åŸç† filetype:pdf é™å®šæœç´¢é“å¾·ç…§ç‰‡å°ºå¯¸ï¼š&#96;&#96;åˆ˜è¯—è¯— imagesizs 2560*1440&#96; #é™å®šç…§ç‰‡å°ºå¯¸ ç›´å¥”ä¿¡æ¯æºå¤´:åŒ»è¯é£Ÿå“ åŒ–å¦†å“å¤‡æ¡ˆä¿¡æ¯|å¤§å‚å®˜æ”¾é¢‘é“ä¾‹ï¼šç‰¹æ–¯æ‹‰æ²¹ç®¡é¢‘é“ äº§å“ç±»ä¿¡æ¯ï¼šå„å¤§ç”µå•†ç½‘ç«™è¯¦æƒ…ä¿¡æ¯ æ ‡é¢˜æœç´¢: intitle:&quot;å…³é”®è¯&quot; | ä¾‹å­ï¼šintitle:&quot;å…¨çƒå˜æš–&quot;ç”¨äºæœç´¢åŒ…å«â€œå…¨çƒå˜æš–â€åœ¨æ ‡é¢˜ä¸­çš„æ–‡ç« ã€‚ allintitle:å…³é”®è¯1 å…³é”®è¯2 | ä¾‹å­ï¼šallintitle:æå­æŸ’ å¾®å¿µç”¨äºæ‰¾å¯»æ ‡é¢˜ä¸­åŒæ—¶åŒ…å«â€œæå­æŸ’â€å’Œâ€œå¾®å¿µâ€çš„ç½‘é¡µã€‚ å†…å®¹æœç´¢: intext:å…³é”®è¯ | ä¾‹å­ï¼šintext:å¯å†ç”Ÿèƒ½æºç”¨äºæœç´¢å†…å®¹ä¸­åŒ…å«â€œå¯å†ç”Ÿèƒ½æºâ€çš„é¡µé¢ã€‚ intext:&quot;è¯è¯­1&quot; &quot;è¯è¯­2&quot; | ä¾‹å­ï¼šintext:&quot;æ°”å€™å˜åŒ–&quot; &quot;æ”¿ç­–&quot;ç”¨äºæœç´¢å†…å®¹ä¸­åŒæ—¶åŒ…å«â€œæ°”å€™å˜åŒ–â€å’Œâ€œæ”¿ç­–â€çš„æ–‡ç« ã€‚ æ ‡é¢˜+å†…å®¹ç»„åˆæœç´¢: intitle:&quot;Person Name&quot; intext:&quot;Organization or Product&quot; | ä¾‹å­ï¼šintitle:&quot;Elon Musk&quot; intext:&quot;SpaceX&quot;ç”¨äºæœç´¢æ ‡é¢˜ä¸­æœ‰Elon Muskï¼Œå†…å®¹ä¸­æåˆ°SpaceXçš„é¡µé¢ã€‚ URLæœç´¢: å…³é”®è¯ inurl:ç½‘å€éƒ¨åˆ† | ä¾‹å­ï¼šæå­æŸ’ inurl:cctvç”¨äºæœç´¢URLä¸­åŒ…å«cctvçš„æå­æŸ’ç›¸å…³ç½‘é¡µã€‚ å…³é”®è¯ inurl:cctv intext:youtube | ä¾‹å­ï¼šç”¨äºæ‰¾å¯»åœ¨cctvç½‘ç«™ä¸Šæåˆ°youtubeçš„é¡µé¢ã€‚ é™å®šç‰¹å®šç½‘ç«™ç»“æœ: å…³é”®è¯ site:å®Œæ•´åŸŸå | ä¾‹å­ï¼šæ—é›¨å¾® site:cctv.comç”¨äºä»…åœ¨cctv.comç½‘ç«™ä¸Šæœç´¢æ—é›¨å¾®ç›¸å…³çš„å†…å®¹ã€‚ å¤§è¯­è¨€æ¨¡å‹åŸç† site:zhihu.com | ä¾‹å­ï¼šç”¨äºåœ¨çŸ¥ä¹ç½‘ç«™ä¸Šæœç´¢æœ‰å…³å¤§è¯­è¨€æ¨¡å‹åŸç†çš„è®¨è®ºã€‚ é™å®šæ–‡ä»¶ç±»å‹: ä¸»é¢˜è¯ filetype:æ–‡ä»¶æ‰©å±•å | ä¾‹å­ï¼šå¤§è¯­è¨€æ¨¡å‹åŸç† filetype:pdfç”¨äºæœç´¢å…³äºå¤§è¯­è¨€æ¨¡å‹åŸç†çš„PDFæ–‡ä»¶ã€‚ é™å®šå›¾ç‰‡å°ºå¯¸æœç´¢: imagesize:å®½åº¦xé«˜åº¦ | ä¾‹å­ï¼šåˆ˜è¯—è¯— imagesize:2560x1440 ç”¨äºæœç´¢åˆ†è¾¨ç‡ä¸º2560x1440åƒç´ çš„åˆ˜è¯—è¯—çš„ç…§ç‰‡ã€‚ ç›´å¥”ä¿¡æ¯æºå¤´: ä½¿ç”¨ç‰¹å®šå…³é”®è¯ç›´æ¥æœç´¢ä¿¡æ¯æºï¼Œå¦‚å®˜æ–¹è®°å½•ã€äº§å“ä¿¡æ¯ã€ç”µå•†ç½‘ç«™ã€‚ ä¾‹å­ï¼šå›½å®¶è¯å“å¤‡æ¡ˆä¿¡æ¯ ç”¨äºæœç´¢å›½å®¶è¯å“ç›‘ç£ç®¡ç†å±€çš„å¤‡æ¡ˆä¿¡æ¯ã€‚ ä¾‹å­ï¼šç‰¹æ–¯æ‹‰ æ²¹ç®¡ ç”¨äºåœ¨YouTubeä¸Šå¯»æ‰¾ç‰¹æ–¯æ‹‰ç›¸å…³çš„è§†é¢‘å†…å®¹ã€‚ çŸ¥è¯†æŠ€èƒ½ä¸ä¿¡æ¯ ç»„ç»‡å†…éƒ¨èµ„æ–™æœç´¢ï¼šèŠå¤©è®°å½•|é’‰é’‰|ç§æœ‰åº“|å†…éƒ¨æ–‡ä»¶å’Œçº¿ä¸ŠçŸ¥è¯†åº“ ä¸­æ–‡çŸ¥è¯†æœç´¢ï¼šä½¿ç”¨æœç‹—å¼•æ“æé«˜ä¸­æ–‡æœç´¢æ•ˆæœ è«æŸè¡Œä¸š æŸæŸå²—ä½å¿…é€›çš„ç½‘ç«™ ç½‘æ˜“äº‘è¯¾å ‚ æ¸…åå­¦å ‚åœ¨çº¿ ä¸­å›½å¤§å­¦MOOC è¡Œä¸šå¿…é€›ç½‘ç«™æ¢ç´¢ï¼šæœç´¢è¡Œä¸šç›¸å…³çš„é‡è¦ç½‘ç«™å’Œä¸“ä¸šå¯¼èˆª ç‰¹å®šé¢†åŸŸ: è¡Œä¸šç›¸å…³ç½‘ç«™çš„æ¢ç´¢ èµ„æºè·å– æœç´¢ç½‘ç›˜èµ„æº æ¯”å¦‚ç™¾åº¦ç½‘ç›˜èµ„æºæœç´¢å·¥å…·ï¼šç›˜æœæœ è§†é¢‘ç´ æï¼šé€šè¿‡ç‰¹å®šæœç´¢å¼•æ“æ‰¾åˆ°å…è´¹æ— ç‰ˆæƒè§†é¢‘èµ„æº æ²¹ç®¡ï¼š4k å…³é”®è¯ ç­›é€‰é¢‘é“ è§†é¢‘èµ„æºä¸‹è½½æ–¹å¼ï¼šsave.tube | æ²¹ç®¡å†…å®¹ä¸‹è½½ï¼š åªéœ€è¦åœ¨ç½‘å€www.åé¢åŠ ä¸Š9xå›è½¦å³å¯ éŸ³é¢‘ç´ æï¼šæœç´¢æ— ç‰ˆæƒçš„èƒŒæ™¯éŸ³ä¹ç½‘ç«™ å¦‚æœç´¢ä¼˜è´¨æ— ç‰ˆæƒæ¨è å›¾ç‰‡ç´ æï¼šä½¿ç”¨Googleæœç´¢ç»“åˆè¯­æ³•å¯»æ‰¾é«˜æ¸…æ— ç‰ˆæƒå›¾ç‰‡ ä¾‹æœå›¾æ ‡ï¼šç‰©å“ icon filetype:png &#96;&#96;åˆ˜è¯—è¯— imagesizs 2560*1440&#96; #é™å®šç…§ç‰‡å°ºå¯¸ PPTæ¨¡æ¿ï¼šè®¿é—®ç½‘ç«™å¦‚Canvaè·å–è®¾è®¡æ¨¡æ¿ æ’ä»¶ï¼šislide ä½¿ç”¨islideæ’ä»¶å’ŒCanvaç½‘ç«™è¿›è¡ŒPPTè®¾è®¡ åœ¨çº¿å·¥å…·å’Œè½¯ä»¶ è®¾è®¡å·¥å…·ï¼šCanva.comä¾›åœ¨çº¿æµ·æŠ¥è®¾è®¡ï¼Œä¾‹å­ï¼šâ€œCanva æµ·æŠ¥â€ã€‚ è®¾è®¡å·¥å…·ï¼šCanva.comä¾›åœ¨çº¿æµ·æŠ¥è®¾è®¡ï¼Œä¾‹å­ï¼šâ€œCanva æµ·æŠ¥â€ã€‚ æ–‡å­—è½¬è¯­éŸ³å·¥å…·ï¼šè…¾è®¯æ™ºè‹±æˆ–Azureå°†æ–‡å­—è½¬æ¢æˆè¯­éŸ³ï¼Œä¾‹å­ï¼šâ€œè…¾è®¯æ™ºè‹± æ–‡å­—è½¬è¯­éŸ³â€ã€‚ åœ¨çº¿è„‘å›¾å·¥å…·ï¼šä½¿ç”¨Miroæˆ–Canvaåˆ¶ä½œè„‘å›¾ï¼Œä¾‹å­ï¼šâ€œCanva è„‘å›¾â€ã€‚ è§†é¢‘å‰ªè¾‘å·¥å…·ï¼šClipchampæˆ–Flexclipæä¾›è§†é¢‘å‰ªè¾‘æœåŠ¡ï¼Œä¾‹å­ï¼šâ€œFlexclip åœ¨çº¿è§†é¢‘å‰ªè¾‘â€ã€‚ ç½‘é€Ÿæµ‹è¯•ï¼šé€šè¿‡Speedtest.comæ£€æµ‹ç½‘ç»œé€Ÿåº¦ï¼Œä¾‹å­ï¼šâ€œSpeedtest ç½‘é€Ÿæµ‹è¯•â€ã€‚ å®‰å…¨æ€§æ£€æµ‹å·¥å…·ï¼šæ£€æŸ¥ç½‘ç«™æˆ–é“¾æ¥çš„å®‰å…¨æ€§ï¼Œä¾‹å­ï¼šâ€œç½‘ç«™é“¾æ¥ å®‰å…¨æ£€æµ‹â€ã€‚ ç›´å¥”ä¿¡æ¯æºå¤´ åŒ»è¯é£Ÿå“åŒ–å¦†å“ä¿¡æ¯ ï¼šä¾‹å­ï¼šå›½å®¶è¯å“å¤‡æ¡ˆä¿¡æ¯ ç”¨äºæœç´¢å›½å®¶è¯å“ç›‘ç£ç®¡ç†å±€çš„å¤‡æ¡ˆä¿¡æ¯ã€‚ äº§å“ä¿¡æ¯ï¼šå„å¤§ç”µå•†ç½‘ç«™äº§å“è¯¦æƒ… ç‰¹æ–¯æ‹‰GPTæœ€è¿‘æ¶ˆæ¯ï¼šå®˜æ–¹é¢‘é“ï¼š æ²¹** æ¨** ç±»ä¼¼è½¯ä»¶æœç´¢ ç±»ä¼¼ç½‘ç«™ï¼š ç±»ä¼¼è½¯ä»¶ï¼šAlternativeTo æä¾›è½¯ä»¶çš„æ›¿ä»£å“æ¨è å†…å®¹ä¿¡æ¯æ¥æºè§†é¢‘ï¼šhttps://www.youtube.com/watch?v=tiN6T1LewmQ&amp;t=10s GPTæ•´ç† è°·&gt;å…¬ä¼—å·&gt;çŸ­è§†é¢‘&gt;ç™¾åº¦&gt;"},{"title":"Linux","path":"/notes/11/Linux.html","content":"Centos7 | åˆå§‹è®¾ç½®|ç”Ÿäº§è°¨æ…è®¾ç½® (é¦–æ¬¡å®‰è£…) å¼€å¯ç½‘å¡å¹¶é…ç½®åœ°å€ã€‚ (é¦–æ¬¡å®‰è£…) å…³é—­é˜²ç«å¢™å¹¶è®¾ç½®æ°¸ä¹…å…³é—­ã€‚ å…³é—­å¼€å¯æŸ¥çœ‹çŠ¶æ€ (é¦–æ¬¡å®‰è£…) å…³é—­SElinuxå¹¶è®¾ç½®æ°¸ä¹…å…³é—­ã€‚ (é¦–æ¬¡å®‰è£…) æ›´æ–°ã€‚ (å¯é€‰) ä¸€é”®æ›¿æ¢é˜¿é‡Œyunæºã€‚ Centos7 | è½¯ä»¶å®‰è£…ç¼–è¯‘ä¾èµ–è½¯ä»¶ yum install -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel å¸¸ç”¨å°è½¯ä»¶A yum install -y tree wget lrzsz bash-completion zip unzip vim å¸¸ç”¨å°è½¯ä»¶B yum install -y ntpdate tcpdump lsof screen iotop net-tools openssl æ›´æ–° yum -y update jumpserveryum -y install wget git curlcurl -sSL https://github.com/jumpserver/jumpserver/releases/download/v2.25.1/quick_start.sh | bash 1. å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨, ç„¶åè®¿é—®cd /opt/jumpserver-installer-v2.25.1./jmsctl.sh start2. å…¶å®ƒä¸€äº›ç®¡ç†å‘½ä»¤./jmsctl.sh stop./jmsctl.sh restart./jmsctl.sh backup./jmsctl.sh upgradeæ›´å¤šè¿˜æœ‰ä¸€äº›å‘½ä»¤, ä½ å¯ä»¥ ./jmsctl.sh --help æ¥äº†è§£3. Web è®¿é—®http://192.168.0.248:80é»˜è®¤ç”¨æˆ·: admin é»˜è®¤å¯†ç : admin4. SSH/SFTP è®¿é—®ssh -p2222 admin@192.168.0.248sftp -P2222 admin@192.168.0.248 Centos7 | firewalldè®¾ç½®ç¤ºä¾‹æŒ‡å®šæŸä¿¡ä»»ipï¼Œçš„æŸç«¯å£ firewall-cmd --permanent --add-rich-rule=&quot;rule family=&quot;ipv4&quot; source address=&quot;192.168.44.101&quot;port protocol=&quot;tcp&quot; port=&quot;8080&quot; accept&quot; ç§»é™¤æŒ‡å®šæŸä¿¡ä»»ipï¼Œçš„æŸç«¯å£ firewall-cmd --permanent --remove-rich-rule=&quot;rule family=&quot;ipv4&quot; sourceaddress=&quot;192.168.44.101&quot; port port=&quot;8080&quot; protocol=&quot;tcp&quot; accept&quot; Centos7 | å¸¸ç”¨å‘½ä»¤netstat -lnpt |grep 33060 #æŸ¥ç«¯å£å¯¹åº”jing&#x27;c Ubuntuåˆå§‹è®¾ç½®shell"},{"title":"è·¯ç”±äº¤æ¢","path":"/notes/10/è·¯ç”±äº¤æ¢.html","content":"å±€åŸŸç½‘å°å·¥å…·å¸¸ç”¨å‘½ä»¤æ€ç§‘show ip interface brief å¼€å±€é…ç½®DHCPï¼šå·¥ä½œåŸç†æ€ç§‘åä¸ºåä¸‰é”æ·ip dhcp pool global //globalæ˜¯pool nameï¼Œ ç”±ç”¨æˆ·æŒ‡å®š default-router 10.1.1.100 //ä¸ºå®¢æˆ·æœºé…ç½®é»˜è®¤ç½‘å…³ network 10.1.0.0 255.255.0.0 //åŠ¨æ€åˆ†é…çš„åœ°å€æ®µ dns-server 10.1.1.1 10.1.1.2 //dnsæœåŠ¡å™¨ ä¸»å¤‡ netbios-name-server 10.1.1.5 //ä¸ºå®¢æˆ·æœºé…ç½®winsæœåŠ¡å™¨åœ°å€ lease 0 8 //å®¢æˆ·æœºç§ŸæœŸæ—¶é—´ no service dhcp //åœæ­¢DHCPæœåŠ¡[é»˜è®¤ä¸ºå¯ç”¨DHCPæœåŠ¡]sh ip dhcp binding //æ˜¾ç¤ºåœ°å€åˆ†é…æƒ…å†µclear ip dhcp binding 192.168.1.2 //æ¸…ç†å·²ç»åˆ†é…çš„IP option43 #è‡ªåŠ¨é™æ€ip dhcp pool vlan1_john host 10.1.1.21 255.255.255.0 client-identifier 010050.bade.6384 //client-identifier=01åŠ ä¸Šå®¢æˆ·æœºç½‘å¡åœ°å€ #æ‰‹åŠ¨é™æ€ip dhcp excluded-address 192.168.10.1 192.168.10.10#é…ç½®åŸŸåç¼€domain-name client.com #optioné€ä¼ å¦‚æŒ‡å®šwlan/ACæ§åˆ¶å™¨option 43 hex &lt;hexadecimal string&gt;ip dhcp pool global //globalæ˜¯pool nameï¼Œ ç”±ç”¨æˆ·æŒ‡å®š default-router 10.1.1.100 //ä¸ºå®¢æˆ·æœºé…ç½®é»˜è®¤ç½‘å…³ network 10.1.0.0 255.255.0.0 //åŠ¨æ€åˆ†é…çš„åœ°å€æ®µ dns-server 10.1.1.1 10.1.1.2 //dnsæœåŠ¡å™¨ ä¸»å¤‡ netbios-name-server 10.1.1.5 //ä¸ºå®¢æˆ·æœºé…ç½®winsæœåŠ¡å™¨åœ°å€ lease 0 8 //å®¢æˆ·æœºç§ŸæœŸæ—¶é—´ no service dhcp //åœæ­¢DHCPæœåŠ¡[é»˜è®¤ä¸ºå¯ç”¨DHCPæœåŠ¡]sh ip dhcp binding //æ˜¾ç¤ºåœ°å€åˆ†é…æƒ…å†µclear ip dhcp binding 192.168.1.2 //æ¸…ç†å·²ç»åˆ†é…çš„IP #è‡ªåŠ¨é™æ€ip dhcp pool vlan1_john host 10.1.1.21 255.255.255.0 client-identifier 010050.bade.6384 //client-identifier=01åŠ ä¸Šå®¢æˆ·æœºç½‘å¡åœ°å€ #æ‰‹åŠ¨é™æ€ip dhcp excluded-address 192.168.10.1 192.168.10.10#é…ç½®åŸŸåç¼€domain-name client.com #optioné€ä¼ å¦‚æŒ‡å®šwlan/ACæ§åˆ¶å™¨option 43 hex &lt;hexadecimal string&gt;ip dhcp pool global //globalæ˜¯pool nameï¼Œ ç”±ç”¨æˆ·æŒ‡å®š default-router 10.1.1.100 //ä¸ºå®¢æˆ·æœºé…ç½®é»˜è®¤ç½‘å…³ network 10.1.0.0 255.255.0.0 //åŠ¨æ€åˆ†é…çš„åœ°å€æ®µ dns-server 10.1.1.1 10.1.1.2 //dnsæœåŠ¡å™¨ ä¸»å¤‡ netbios-name-server 10.1.1.5 //ä¸ºå®¢æˆ·æœºé…ç½®winsæœåŠ¡å™¨åœ°å€ lease 0 8 //å®¢æˆ·æœºç§ŸæœŸæ—¶é—´ no service dhcp //åœæ­¢DHCPæœåŠ¡[é»˜è®¤ä¸ºå¯ç”¨DHCPæœåŠ¡]sh ip dhcp binding //æ˜¾ç¤ºåœ°å€åˆ†é…æƒ…å†µclear ip dhcp binding 192.168.1.2 //æ¸…ç†å·²ç»åˆ†é…çš„IP #è‡ªåŠ¨é™æ€ip dhcp pool vlan1_john host 10.1.1.21 255.255.255.0 client-identifier 010050.bade.6384 //client-identifier=01åŠ ä¸Šå®¢æˆ·æœºç½‘å¡åœ°å€ #æ‰‹åŠ¨é™æ€ip dhcp excluded-address 192.168.10.1 192.168.10.10#é…ç½®åŸŸåç¼€domain-name client.com #optioné€ä¼ å¦‚æŒ‡å®šwlan/ACæ§åˆ¶å™¨option 43 hex &lt;hexadecimal string&gt;ip dhcp pool global //globalæ˜¯pool nameï¼Œ ç”±ç”¨æˆ·æŒ‡å®š default-router 10.1.1.100 //ä¸ºå®¢æˆ·æœºé…ç½®é»˜è®¤ç½‘å…³ network 10.1.0.0 255.255.0.0 //åŠ¨æ€åˆ†é…çš„åœ°å€æ®µ dns-server 10.1.1.1 10.1.1.2 //dnsæœåŠ¡å™¨ ä¸»å¤‡ netbios-name-server 10.1.1.5 //ä¸ºå®¢æˆ·æœºé…ç½®winsæœåŠ¡å™¨åœ°å€ lease 0 8 //å®¢æˆ·æœºç§ŸæœŸæ—¶é—´ no service dhcp //åœæ­¢DHCPæœåŠ¡[é»˜è®¤ä¸ºå¯ç”¨DHCPæœåŠ¡]sh ip dhcp binding //æ˜¾ç¤ºåœ°å€åˆ†é…æƒ…å†µclear ip dhcp binding 192.168.1.2 //æ¸…ç†å·²ç»åˆ†é…çš„IP #è‡ªåŠ¨é™æ€ip dhcp pool vlan1_john host 10.1.1.21 255.255.255.0 client-identifier 010050.bade.6384 //client-identifier=01åŠ ä¸Šå®¢æˆ·æœºç½‘å¡åœ°å€ #æ‰‹åŠ¨é™æ€ip dhcp excluded-address 192.168.10.1 192.168.10.10#é…ç½®åŸŸåç¼€domain-name client.com #optioné€ä¼ å¦‚æŒ‡å®šwlan/ACæ§åˆ¶å™¨option 43 hex &lt;hexadecimal string&gt; DHCP Snoopingï¼šåœºæ™¯æ€ç§‘åä¸ºåä¸‰é”æ·å®ä¾‹ SW1(config)#ip dhcp snooping //å¼€å¯DHCP snoopingSW1(config)#ip dhcp snooping vlan 10 //è®¾ç½®DHCP SnoopingåŠŸèƒ½å°†ä½œç”¨äºå“ªäº›VLANSW1(config-if-range)#ip dhcp snooping trust //é…ç½®æ¥å£ä¸ºDHCPç›‘å¬ç‰¹æ€§çš„ä¿¡ä»»æ¥å£ï¼ˆä¸€èˆ¬ä¸ºä¸Šè”ç«¯å£ï¼‰ï¼Œæ‰€æœ‰æ¥å£é»˜è®¤ä¸ºéä¿¡ä»»æ¥å£ show ip dhcp snooping // æ˜¾ç¤ºå½“å‰DHCPç›‘å¬çš„å„é€‰é¡¹å’Œå„ç«¯å£çš„é…ç½®æƒ…å†µï¼šshow ip dhcp snooping binding //æ˜¾ç¤ºå½“å‰çš„DHCPç›‘å¬ç»‘å®šè¡¨ï¼š[Huawei] dhcp enable[Huawei] interface GigabitEthernet 0/0/1[Huawei-GigabitEthernet0/0/1] dhcp snooping enable[Huawei-GigabitEthernet0/0/1] quit[Huawei] interface GigabitEthernet 0/0/2[Huawei-GigabitEthernet0/0/2] dhcp snooping enable[Huawei-GigabitEthernet0/0/2] quitdhcp enableinterface GigabitEthernet 0/0/1dhcp snooping enableinterface GigabitEthernet 0/0/2dhcp snooping enable é˜²ç¯ï¼šç¯è·¯æ£€æµ‹æ€ç§‘åä¸ºåä¸‰é”æ·RLDPå®ä¾‹ Switch(config)# spanning-tree mode rapid-pvstSwitch(config)# interface range GigabitEthernet0/1 - 2Switch(config-if-range)# spanning-tree portfastSwitch(config-if-range)# exit [Huawei] stp mode rstp[Huawei] stp enable[Huawei] interface GigabitEthernet 0/0/1[Huawei-GigabitEthernet0/0/1] stp edged-port enable[Huawei-GigabitEthernet0/0/1] quit[Huawei] interface GigabitEthernet 0/0/2[Huawei-GigabitEthernet0/0/2] stp edged-port enable[Huawei-GigabitEthernet0/0/2] quitloop-detection enableinterface GigabitEthernet 0/0/1loop-detection enableinterface GigabitEthernet 0/0/2loop-detection enable Telnetæ€ç§‘åä¸ºåä¸‰é”æ·RLDPå®ä¾‹ Switch(config)# line vty 0 15Switch(config-line)# password PASSWORDSwitch(config-line)# loginSwitch(config-line)# exitSwitch(config)# enable password ENABLEPASSWORD [Huawei] line vty 0 4[Huawei-line-vty0-4] authentication-mode password[Huawei-line-vty0-4] user privilege level 3[Huawei-line-vty0-4] set authentication password Huawei@123[Huawei-line-vty0-4] quituser-interface vty 0 4authentication-mode passwordset authentication password Huawei@123user privilege level 3 è®¾å¤‡å †å æ€ç§‘åä¸ºåä¸‰é”æ·RLDPå®ä¾‹ [Huawei] sys[Huawei] stack port GigabitEthernet 0/0/1[Huawei] stack port GigabitEthernet 0/0/2[Huawei] stack enablesysstack port GigabitEthernet 0/0/1stack port GigabitEthernet 0/0/2stack enable é“¾è·¯èšåˆæ€ç§‘åä¸ºåä¸‰å®ä¾‹ Switch(config)# interface range GigabitEthernet0/1 - 2Switch(config-if-range)# channel-group 1 mode desirableSwitch(config-if-range)# exitSwitch(config)# interface port-channel 1Switch(config-if)# switchport mode trunkSwitch(config-if)# exit [Huawei] interface Eth-Trunk 1[Huawei-Eth-Trunk1] mode lacp[Huawei-Eth-Trunk1] port link-type access[Huawei-Eth-Trunk1] port hybrid pvid vlan 1[Huawei-Eth-Trunk1] port hybrid untagged vlan 1[Huawei-Eth-Trunk1] port hybrid tagged vlan 10[Huawei-Eth-Trunk1] description Trunk to Switch[Huawei-Eth-Trunk1] quit[Huawei] interface GigabitEthernet 0/0/1[Huawei-GigabitEthernet0/0/1] port link-aggregation group 1[Huawei-GigabitEthernet0/0/1] quit[Huawei] interface GigabitEthernet 0/0/2[Huawei-GigabitEthernet0/0/2] port link-aggregation group 1[Huawei-GigabitEthernet0/0/2] quité”æ·RLDP é¡¹ç›® Telnet Console å †å  f èšåˆ ç®¡ç† ç«¯å£å®‰å…¨ qos acl æµé‡é•œåƒ ç®¡ç†é…ç½®ACLï¼ˆè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰[Huawei] acl number 2000[Huawei-acl-adv-2000] rule permit ip source 192.168.1.0 0.0.0.255 destination 10.0.0.0 0.255.255.255[Huawei-acl-adv-2000] rule deny ip[Huawei-acl-adv-2000] quit[Huawei] interface GigabitEthernet 0/0/1[Huawei-GigabitEthernet0/0/1] packet-filter inbound acl 2000[Huawei-GigabitEthernet0/0/1] quit[Huawei] interface GigabitEthernet 0/0/2[Huawei-GigabitEthernet0/0/2] packet-filter inbound acl 2000[Huawei-GigabitEthernet0/0/2] quit ä¸»æœº CIDR MASK 2 &#x2F;30 255.255.255.254 6 &#x2F;29 255.255.255.248 14 &#x2F;28 255.255.255.240 30 &#x2F;27 255.255.255.192 62 &#x2F;26 255.255.255.128 126 &#x2F;25 255.255.255.248 254 &#x2F;24 255.255.255.0 510 &#x2F;23 255.255.254.0 ç»´æŠ¤é‡Šæ”¾æŸlip äºŒå±‚è®¾åˆ«å¿˜è®°å¯†ç ï¼Ÿ ä¸‰å±‚è®¾å¤‡å¿˜è®°å¯†ç ï¼Ÿ VPNæ·±ä¿¡æœafæ–°æ¶æ„ï¼šSSL ç­–ç•¥åŒipsecç­–ç•¥ç±»ä¼¼ ipsec ä¸¤ç«¯å‚æ•°ä¿æŒä¸€è‡´ ä¸€ã€ æ•°æ®æµ é…ç½®vpnçº¿è·¯é…ç½®ï¼ŒIPé…å‡ºå£ä»»æ„ipåœ°å€ æ–°å¢ç¬¬ä¸‰æ–¹è®¾å¤‡ï¼Œæ•°æ®æµå¿…é¡»æ¯ä¸ªç½‘æ®µåˆ†å¼€å•ç‹¬æ·»åŠ ã€‚åˆ æ‰ç°æœ‰æ‰€ä»¥åè®® è®¤è¯ç®—æ³• å»ºè®®æœ¬æ®µä¸å¯¹ç«¯åœ°å€ï¼Œæ¯ä¸ªç½‘æ®µå•ç‹¬æ·»åŠ ï¼Œ å‚æ•°å»ºè®®ä¸ºï¼šåè®®:ESP ã€‚åŠ å¯†ç®—æ³•ï¼š:AES256ã€‚è®¤è¯ç®—æ³•:SHA2-256ã€‚PFS:group14 ä¼˜å…ˆçº§128 äºŒã€æ”¾é€šç­–ç•¥ åŒºåŸŸï¼šæ–°å»ºä¸€ä¸ªä¸‰å±‚åŒºåŸŸ.å¼•ç”¨vpntunæ¥å£(æ¥å£é»˜è®¤) æ§åˆ¶ç­–ç•¥ï¼šåŸ&#x2F;ç›®ï¼šlanä¸åˆ›å»ºçš„åŒºåŸŸã€‚å¯¹è±¡ï¼šä¸¤ç«¯äº’è”çš„æ‰€æœ‰ç½‘æ®µã€‚å…¶ä»–anyå…¨éƒ¨ åä¸ºï¼šipsec é…ç½®éœ€å•ç‹¬ä¿å­˜ï¼Œå¦åˆ™é‡å¯ä¼šä¸¢å¤±é…ç½® ä¸€ã€æ•°æ®æµ IDï¼šæœ¬ç«¯å‡ºæ¥å£åœ°å€ã€‚å¯¹ç«¯æ¥å—ä»»æ„ã€‚ æ•°æ®æºç›®åœ°å€ç»„ï¼šå¿…é¡»æ‰‹åŠ¨æ·»åŠ ï¼Œä¸å¯ä»¥å¼•ç”¨åœ°å€æˆ–åœ°å€ç»„ï¼ˆåœ°å€åŠ æ©ç  å·¨å‘ï¼‰ã€‚ä¸¤ç«¯ç½‘æ®µä¿æŒä¸€è‡´ IKEå‚æ•°ï¼šIKEç‰ˆæœ¬éƒ½å‹¾é€‰ é‡è›®æ¨¡å¼ï¼Œè®¤è¯ å®Œæ•´ PRFç»é‡ä¸€è‡´ã€‚DHå‚æ•°å¯¹åº”æ·±ä¿¡æœPFSå‚æ•°ã€‚SAè¶…æ—¶3600 IPSecå‚æ•°ï¼šå‚ç…§å¯¹ç«¯ äºŒã€ç­–ç•¥ï¼ˆåšæºç ä¸è½¬æ¢çš„NATï¼‰ è½¬æ¢æ¨¡å¼ï¼šä¸è½¬æ¢ã€‚æºåœ°å€ï¼šanyæˆ–å†…ç½‘åœ°å€ã€‚ ç›®çš„åœ°å€;å¯¹ç«¯çš„å†…ç½‘åœ°å€.å¼•ç”¨åœ°å€ï¼Œä¸å¯ä»¥äº‹åœ°å€ç»„"},{"title":"ä¸­é—´ä»¶","path":"/notes/13/ä¸­é—´ä»¶.html","content":"Nginxå¸¸ç”¨é…ç½®ç¼–è¯‘å®‰è£…dockerå®‰è£…é…ç½®ä¼˜åŒ–åå‘ä»£ç†nginxå¯†ç è®¤è¯Redis"},{"title":"è™šæ‹ŸåŒ–","path":"/notes/12/è™šæ‹ŸåŒ–.html","content":"Dockerå®‰è£…Compose$ sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose#å¦‚è®¿é—®ä¸äº†ï¼Œå¯æœ¬åœ°ä¸‹è½½åä¸Šä¼ ï¼Œ curl -L https://get.daocloud.io/docker/compose/releases/download/v2.4.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose $ sudo chmod +x /usr/local/bin/docker-compose $ sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose Kubernetes Vmwareå¤‡ä»½è™šæ‹Ÿæœº windowsç¤ºä¾‹ç¬¬ä¸€æ­¥ï¼šä¸‹è½½OVFTOOLå·¥å…·VMware æ ¹æ®ç»ˆç«¯ç±»å‹è·å–å¯¹åº”å®‰è£…åŒ…ã€‚ç¬¬äºŒæ­¥ï¼šå®‰è£…è½¯ä»¶æ‰“å¼€cmdï¼Œcdåˆ°è½¯ä»¶å®‰è£…è·¯å¾„ã€‚ç¬¬å››æ­¥ï¼šæ‰§è¡Œå¤‡ä»½ovftool.exeï¼ˆç©ºæ ¼ï¼‰vi://root:å¯†ç @ESXIæœåŠ¡å™¨IP/è™šæ‹Ÿæœºåç§°ï¼ˆç©ºæ ¼ï¼‰å¤‡ä»½è·¯å¾„\\æ–‡ä»¶å.ovaovftool.exe vi://root:@192.168.0.225/zabbix I:\\vm/zab.ova Hyper-vå¤‡ä»½è™šæ‹Ÿæœº Bat@echo off #è™šæ‹Ÿæœºå®é™…åç§°set VMName=bjphssecnew-8.171#è™šæ‹Ÿæœºå¯¼å‡ºè·¯å¾„set ExportPath=H:\\beifen\\meiri\\8171 #åˆ é™¤æ—§æ–‡ä»¶echo #åˆ é™¤æ–‡ä»¶ rd /s /q &quot;H:\\beifen\\meiri\\8171\\bjphssecnew-8.171&quot;#å¯¼å‡ºä»»åŠ¡echo å¯¼å‡ºè™šæ‹Ÿæœº %VMName% åˆ° %ExportPath%powershell -Command &quot;Export-VM -Name %VMName% -Path %ExportPath%&quot; echo å¯¼å‡ºå®Œæˆ PowerShell|å•æœº# å®šä¹‰è™šæ‹Ÿæœºåç§°æ•°ç»„å’Œå¤‡ä»½è·¯å¾„$vmNames = @(&quot;è™šæ‹Ÿæœº1&quot;, &quot;è™šæ‹Ÿæœº2&quot;, &quot;è™šæ‹Ÿæœº3&quot;)$backupPath = &quot;C:\\å¤‡ä»½è·¯å¾„&quot;# åˆ›å»ºå¤‡ä»½æ–‡ä»¶å¤¹$backupFolder = Join-Path -Path $backupPath -ChildPath (Get-Date -Format &quot;yyyyMMdd_HHmmss&quot;)New-Item -ItemType Directory -Path $backupFolder# å¤‡ä»½æ¯ä¸ªè™šæ‹Ÿæœºforeach ($vmName in $vmNames) &#123; Export-VM -Name $vmName -Path &quot;$backupFolder\\$vmName&quot;&#125;# è·å–ä¸‰å¤©å‰çš„æ—¥æœŸ$deleteDate = (Get-Date).AddDays(-3)# åˆ é™¤ä¸‰å¤©å‰çš„å¤‡ä»½Get-ChildItem -Path $backupPath | Where-Object &#123; $_.LastWriteTime -lt $deleteDate &#125; | Remove-Item -Recurse -Force# å®šä¹‰æ—¥å¿—æ–‡ä»¶è·¯å¾„$logFile = &quot;C:\\è„šæœ¬æ—¥å¿—.log&quot;# åˆ›å»ºæ—¥å¿—è®°å½•å‡½æ•°function Write-Log &#123; param( [Parameter(Mandatory=$true)] [string]$Message ) $logMessage = &quot;[&#123;0&#125;] &#123;1&#125;&quot; -f (Get-Date -Format &quot;yyyy-MM-dd HH:mm:ss&quot;), $Message $logMessage | Out-File -FilePath $logFile -Append&#125;# åœ¨è„šæœ¬ç»“æŸæ—¶è®°å½•æ—¥å¿—Write-Log -Message &quot;è„šæœ¬æ‰§è¡Œå®Œæˆ&quot; PowerShell|å¤‡ä»½å‰å¿«ç…§"},{"title":"æ•°æ®åº“","path":"/notes/14/æ•°æ®åº“.html","content":"sql severMysqlsqlæ•°æ®åº“ç»´æŠ¤"},{"title":"è¿ç»´ç›‘æ§","path":"/notes/16/è¿ç»´ç›‘æ§.html","content":"prometheuså¼€æºé¡¹ç›®æºç ï¼šstefanprodan&#x2F;dockprom å›½å¤–æ‹‰å»ä¸äº†çš„é•œåƒï¼Œæ¢ä¸€ä¸ªç›¸ä¼¼é•œåƒ å°†node_exporteré…ç½®ä¸ºæœåŠ¡å¹¶å¼€æœºå¯åŠ¨ ä¸‹è½½node_exporterå°†äºŒè¿›åˆ¶æ–‡ä»¶æ”¾ç½®åˆ°&#x2F;usr&#x2F;local&#x2F;binç›®å½•ï¼ˆå½“ç„¶ç›®å½•å¯ä»¥è‡ªå®šä¹‰ï¼‰ åˆ›å»ºPrometheusç»„å’Œç”¨æˆ·ï¼Œç”¨äºè¿è¡Œnode_exporter åˆ›å»ºä¸€ä¸ª.serviceæ–‡ä»¶ å¯åŠ¨ï¼Œå¹¶é…ç½®å¼€æœºå¯åŠ¨ 1 ä¸‹è½½node_exportercurl -O https://github.com/prometheus/node_exporter/releases/download/v0.18.1/node_exporter-0.18.1.linux-amd64.tar.gz åˆ›å»º..serviceæ–‡ä»¶cat &lt;&lt; EOF &gt; /usr/lib/systemd/system/node_exporter.service [Service]User=prometheusGroup=prometheusExecStart=/usr/local/bin/node_exporter[Install]WantedBy=multi-user.target[Unit]Description=node_exporterAfter=network.target EOF å¼€æœºå¯åŠ¨ systemctl start node_exportersystemctl status node_exportersystemctl enable node_exporter zabbix"},{"title":"å¸¸ç”¨å°å·¥å…·","path":"/notes/3/å¸¸ç”¨å°å·¥å…·.html","content":"é•œåƒåˆ»å½•rufusï¼šå¯ä»¥åˆ¶ä½œWindowsã€Linuxã€Android-x86 ç­‰æ“ä½œç³»ç»Ÿçš„å¯åŠ¨ç›˜ è¿œç¨‹ç®¡ç†xshellï¼šç»ˆç«¯æ¨¡æ‹Ÿè½¯ä»¶ï¼Œå®ƒæ”¯æŒssh2, ä»¥åŠMicrosoft Windows å¹³å°çš„Telnet åè®® SecureCRTï¼šç»ˆç«¯æ¨¡æ‹Ÿè½¯ä»¶ï¼Œå®ƒæ”¯æŒssh, Telnet åè®® Windows Terminalï¼šç»ˆç«¯æ¨¡æ‹Ÿè½¯ä»¶ï¼Œå®ƒæ”¯æŒssh, Telnet åè®®WinSCPï¼š å±€åŸŸç½‘è¿œç¨‹ï¼šVNC scrcpyï¼šç”µè„‘æ§åˆ¶æ‰‹æœº æ–‡æœ¬ç¼–è¾‘typoraï¼šæ‰€è§å³æ‰€å¾—çš„ Markdown ç¼–è¾‘å™¨ Notepad++ï¼šè½»é‡æ–‡æœ¬ç¼–è¾‘å™¨ æ–‡ä»¶ç®¡ç†Everythingï¼šæ–‡ä»¶æœç´¢ç¥å™¨ WizTree ï¼šç›´è§‚æŸ¥çœ‹æœ¬åœ°æ–‡ä»¶å¤§å° æ–‡ä»¶åŒæ­¥freefilesyncï¼š RaiDrive ï¼šæ˜ å°„ç½‘ç›˜æˆ–è¿œç¨‹ FTP&#x2F;SFTP&#x2F;WebDAV æœåŠ¡å™¨ä¸ºæœ¬åœ°ç£ç›˜NASå¿…å¤‡ æœåŠ¡ç®¡ç†EasyServiceï¼šè®©ç¨‹åºä»¥ Windows ç³»ç»ŸæœåŠ¡çš„æ–¹å¼ï¼Œæ— çª—å£è¿è¡Œ å¸è½½åˆ é™¤Geek Uninstallerï¼šè½»é‡å¸è½½å·¥å…·ï¼Œä¸æ®‹ç•™ voidtools ï¼šå¼ºåˆ¶åˆ é™¤ bashå·¥å…·cygwinï¼šåœ¨ Windows ä¸Šè¿è¡Œ shell è„šæœ¬ å›¾ç‰‡ç®¡ç†ImageGlassï¼šç¾è§‚çš„å›¾ç‰‡æŸ¥çœ‹å™¨ è§†é¢‘ç®¡ç†tinyMediaManagerï¼šç®¡ç†æœ¬åœ°è§†é¢‘ï¼Œé…åˆNAsç”¨ å¯†ç ç®¡ç†Bitwardenï¼šä¾¿æºçš„ç®¡ç†ä½ çš„å¯†ç  winç³»ç»Ÿä¼˜åŒ–Dism++ï¼šä¼˜åŒ–ç³»ç»Ÿ ä¸‹è½½å·¥å…·IDMï¼šä¼˜ç§€çš„ä¸‹è½½å·¥å…· Xdownï¼š å‹ç¼©å·¥å…·7zipï¼š å…¶ä»–æœ‰è¶£çš„å°å·¥å…·Carnacï¼šæ˜¾ç¤ºé”®ç›˜è¾“å…¥ä¿¡æ¯ FliTikï¼šæ—¶é’Ÿå±ä¿å·¥å…· Fencesæ¡Œé¢æ•´ç† Fenceswindowsé…ç½®ç¯å¢ƒæ ‡é‡ ç§‘å­¦ç§‘å­¦ä¸Šç½‘åŸç‚¹ï¼š|ä»˜è´¹|ç¨³å®š|äº²æµ‹| heliumï¼š å¿«è¿ï¼š|ä»˜è´¹|ç¨³å®š| é›·é”‹ï¼š"},{"title":"Andriod","path":"/notes/2/index.html","content":"APP å±€åŸŸç½‘è¿œç¨‹Google PlayRD Client (å¾®è½¯è¿œç¨‹æ¡Œé¢) WiFi mouse Pro juicessh ï¼ˆssh è¿æ¥å·¥å…·ï¼‰ä¸€ äºŒ ä¸‰ æŸ¥çœ‹è¿æ¥çƒ­ç‚¹çš„å®¢æˆ·ç«¯IP ip neigh"},{"title":"å¸¸è§å°é—®é¢˜","path":"/notes/4/å¸¸è§å°é—®é¢˜.html","content":"é¢˜ç›®1è¿™æ˜¯ç­”æ¡ˆ1é¢˜ç›®2è¿™æ˜¯ç­”æ¡ˆ2é¢˜ç›®3è¿™æ˜¯ç­”æ¡ˆ3 é»˜è®¤æ‰“å¼€çš„ä»£ç æŠ˜å æ¡†çš„æ’’æ—¦å‘daima win1Windowsä¸‹å¦‚ä½•æŸ¥çœ‹æŸä¸ªç«¯å£è¢«è°å ç”¨åˆ—å‡ºç«¯å£ å¯¹åº”çš„PIDnetstat -aon|findstr â€œ8081â€ #8081ä¸ºç«¯å£å·æ ¹æ®PIDæŸ¥çœ‹å¯¹åº”çš„ç¨‹åºtasklist|findstr â€œ9088â€ #9088ä¸ºPIDå¼ºåˆ¶ç»“æŸè¿›ç¨‹taskkill &#x2F;T &#x2F;F &#x2F;PID 9088 é¢˜ç›®2è¿™æ˜¯ç­”æ¡ˆ2é¢˜ç›®3è¿™æ˜¯ç­”æ¡ˆ3é‡æ–°åˆ†é…äº†åœ°å€ï¼Œç§ŸæœŸæ²¡åˆ°æ€ä¹ˆåŠé¢˜ç›®2è¿™æ˜¯ç­”æ¡ˆ2é¢˜ç›®3è¿™æ˜¯ç­”æ¡ˆ3 left"},{"path":"/wiki/docker/01.é»˜è®¤é¡µ.html","content":"Dockerå®¹å™¨å­¦ä¹ ç›®æ ‡ï¼š æŒæ¡DockeråŸºç¡€çŸ¥è¯†ï¼Œèƒ½å¤Ÿç†è§£Dockeré•œåƒä¸å®¹å™¨çš„æ¦‚å¿µ å®ŒæˆDockerå®‰è£…ä¸å¯åŠ¨ æŒæ¡Dockeré•œåƒä¸å®¹å™¨ç›¸å…³å‘½ä»¤ æŒæ¡Tomcat Nginx ç­‰è½¯ä»¶çš„å¸¸ç”¨åº”ç”¨çš„å®‰è£… æŒæ¡dockerè¿ç§»ä¸å¤‡ä»½ç›¸å…³å‘½ä»¤ èƒ½å¤Ÿè¿ç”¨Dockerfileç¼–å†™åˆ›å»ºå®¹å™¨çš„è„šæœ¬ èƒ½å¤Ÿæ­å»ºä¸ä½¿ç”¨dockerç§æœ‰ä»“åº“ Docker èµ„æºæ±‡æ€» Docker å®˜æ–¹ä¸»é¡µ: https://www.docker.com Docker å®˜æ–¹åšå®¢: https://blog.docker.com/ Docker å®˜æ–¹æ–‡æ¡£: https://docs.docker.com/ Docker Store: https://store.docker.com Docker Cloud: https://cloud.docker.com Docker Hub: https://hub.docker.com Docker çš„æºä»£ç ä»“åº“: https://github.com/moby/moby Docker å‘å¸ƒç‰ˆæœ¬å†å²: https://docs.docker.com/release-notes/ Docker å¸¸è§é—®é¢˜: https://docs.docker.com/engine/faq/ Docker è¿œç«¯åº”ç”¨ API: https://docs.docker.com/develop/sdk/ Docker å›½å†…é•œåƒé˜¿é‡Œäº‘çš„åŠ é€Ÿå™¨ï¼šhttps://help.aliyun.com/document_detail/60750.html ç½‘æ˜“åŠ é€Ÿå™¨ï¼šhttp://hub-mirror.c.163.com å®˜æ–¹ä¸­å›½åŠ é€Ÿå™¨ï¼šhttps://registry.docker-cn.com ustc çš„é•œåƒï¼šhttps://docker.mirrors.ustc.edu.cn daocloudï¼šhttps://www.daocloud.io/mirror#accelerator-docï¼ˆæ³¨å†Œåä½¿ç”¨ï¼‰ å¦‚æœæœ‰æ›´å¥½çš„èµ„æºï¼Œæ¬¢è¿é€šè¿‡ä¸‹é¢çš„ç¬”è®°æ¥åˆ†äº«ã€‚"},{"title":"Dockerç®€ä»‹ä¸å®‰è£…","path":"/wiki/docker/02.Dockerå®‰è£…ä¸ç®€ä»‹.html","content":"å­¦ä¹ ç›®æ ‡ï¼š æŒæ¡DockeråŸºç¡€çŸ¥è¯†ï¼Œèƒ½å¤Ÿç†è§£Dockeré•œåƒä¸å®¹å™¨çš„æ¦‚å¿µ å®ŒæˆDockerå®‰è£…ä¸å¯åŠ¨ æŒæ¡Dockeré•œåƒä¸å®¹å™¨ç›¸å…³å‘½ä»¤ æŒæ¡Tomcat Nginx ç­‰è½¯ä»¶çš„å¸¸ç”¨åº”ç”¨çš„å®‰è£… æŒæ¡dockerè¿ç§»ä¸å¤‡ä»½ç›¸å…³å‘½ä»¤ èƒ½å¤Ÿè¿ç”¨Dockerfileç¼–å†™åˆ›å»ºå®¹å™¨çš„è„šæœ¬ èƒ½å¤Ÿæ­å»ºä¸ä½¿ç”¨dockerç§æœ‰ä»“åº“ ä¸€ã€Dockerç®€ä»‹1.1 ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–è™šæ‹ŸåŒ–ï¼Œæ˜¯æŒ‡é€šè¿‡è™šæ‹ŸåŒ–æŠ€æœ¯å°†ä¸€å°è®¡ç®—æœºè™šæ‹Ÿä¸ºå¤šå°é€»è¾‘è®¡ç®—æœºã€‚åœ¨ä¸€å°è®¡ç®—æœºä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªé€»è¾‘è®¡ç®—æœºï¼Œæ¯ä¸ªé€»è¾‘è®¡ç®—æœºå¯è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”åº”ç”¨ç¨‹åºéƒ½å¯ä»¥åœ¨ç›¸äº’ç‹¬ç«‹çš„ç©ºé—´å†…è¿è¡Œè€Œäº’ä¸å½±å“ï¼Œä»è€Œæ˜¾è‘—æé«˜è®¡ç®—æœºçš„å·¥ä½œæ•ˆç‡ã€‚ è™šæ‹ŸåŒ–æŠ€æœ¯ç§ç±»å¾ˆå¤šï¼Œä¾‹å¦‚ï¼šè½¯ä»¶è™šæ‹ŸåŒ–ã€ç¡¬ä»¶è™šæ‹ŸåŒ–ã€å†…å­˜è™šæ‹ŸåŒ–ã€ç½‘ç»œè™šæ‹ŸåŒ–(vip)ã€æ¡Œé¢è™šæ‹ŸåŒ–ã€æœåŠ¡è™šæ‹ŸåŒ–ã€è™šæ‹Ÿæœºç­‰ç­‰ã€‚ é—®é¢˜ï¼šä¸ºä»€ä¹ˆä¼šæœ‰dockerå‡ºç°ï¼Ÿ ä¸€æ¬¾äº§å“ä»å¼€å‘åˆ°ä¸Šçº¿ï¼Œä»æ“ä½œç³»ç»Ÿï¼Œåˆ°è¿è¡Œç¯å¢ƒï¼Œå†åˆ°åº”ç”¨é…ç½®ã€‚ä½œä¸ºå¼€å‘+è¿ç»´ä¹‹é—´çš„åä½œæˆ‘ä»¬éœ€è¦å…³å¿ƒå¾ˆå¤šä¸œè¥¿ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäº’è”ç½‘å…¬å¸éƒ½ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å„ç§ç‰ˆæœ¬çš„è¿­ä»£ä¹‹åï¼Œä¸åŒç‰ˆæœ¬ç¯å¢ƒçš„å…¼å®¹ï¼Œå¯¹è¿ç»´äººå‘˜éƒ½æ˜¯è€ƒéªŒ , è¿™ä¸ªæ—¶å€™ Docker æ¨ªç©ºå‡ºä¸–ï¼Œæ˜¯å› ä¸ºå®ƒå¯¹æ­¤ç»™å‡ºäº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„è§£å†³æ–¹æ¡ˆã€‚ ç¯å¢ƒé…ç½®å¦‚æ­¤éº»çƒ¦ï¼Œæ¢ä¸€å°æœºå™¨ï¼Œå°±è¦é‡æ¥ä¸€æ¬¡ï¼Œè´¹åŠ›è´¹æ—¶ã€‚å¾ˆå¤šäººæƒ³åˆ°ï¼Œèƒ½ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œè½¯ä»¶å¯ä»¥å¸¦ç¯å¢ƒå®‰è£…ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œå®‰è£…çš„æ—¶å€™ï¼ŒæŠŠåŸå§‹ç¯å¢ƒä¸€æ¨¡ä¸€æ ·åœ°å¤åˆ¶è¿‡æ¥ã€‚å¼€å‘äººå‘˜åˆ©ç”¨ Docker å¯ä»¥æ¶ˆé™¤åä½œç¼–ç æ—¶â€œåœ¨æˆ‘çš„æœºå™¨ä¸Šå¯æ­£å¸¸å·¥ä½œâ€çš„é—®é¢˜ã€‚ ä¹‹å‰ï¼Œå¯ä»¥å‘ç°ï¼Œæ¯å‘å¸ƒä¸€ä¸ªç¨‹åºï¼Œéƒ½è¦èµ°ä¸€éä»¥ä¸Šçš„æµç¨‹ï¼š 1.2 ä»€ä¹ˆæ˜¯DockerDocker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº Go è¯­è¨€å¼€å‘ã€‚Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼ˆç±»ä¼¼ iPhone çš„ appï¼‰,æ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚ Dockerçš„ä¸»è¦ç›®æ ‡æ˜¯â€œBuildï¼ŒShip and Run Any App,Anywhereâ€ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å¯¹åº”ç”¨ç»„ä»¶çš„å°è£…ã€åˆ†å‘ã€éƒ¨ç½²ã€è¿è¡Œç­‰ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œä½¿ç”¨æˆ·çš„APPï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªWEBåº”ç”¨æˆ–æ•°æ®åº“åº”ç”¨ç­‰ç­‰ï¼‰åŠå…¶è¿è¡Œç¯å¢ƒèƒ½å¤Ÿåšåˆ°â€œä¸€æ¬¡å°è£…ï¼Œåˆ°å¤„è¿è¡Œâ€ã€‚ æ€»ä¹‹ä¸€å¥è¯ï¼šåªéœ€è¦ä¸€æ¬¡é…ç½®å¥½ç¯å¢ƒï¼Œæ¢åˆ°åˆ«çš„æœºå­ä¸Šå°±å¯ä»¥ä¸€é”®éƒ¨ç½²å¥½ï¼Œå¤§å¤§ç®€åŒ–äº†æ“ä½œ ã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©Docker? Dockerçš„é•œåƒæä¾›äº†é™¤å†…æ ¸å¤–å®Œæ•´çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¡®ä¿äº†åº”ç”¨è¿è¡Œç¯å¢ƒä¸€è‡´æ€§ï¼Œä»è€Œä¸ä¼šå†å‡ºç°â€œè¿™æ®µä»£ç åœ¨æˆ‘æœºå™¨ä¸Šæ²¡é—®é¢˜å•Šâ€è¿™ç±»é—®é¢˜ï¼›â€”â€”ä¸€è‡´çš„è¿è¡Œç¯å¢ƒ å¯ä»¥åšåˆ°ç§’çº§ã€ç”šè‡³æ¯«ç§’çº§çš„å¯åŠ¨æ—¶é—´ã€‚å¤§å¤§çš„èŠ‚çº¦äº†å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„æ—¶é—´ã€‚â€”â€”æ›´å¿«é€Ÿçš„å¯åŠ¨æ—¶é—´ é¿å…å…¬ç”¨çš„æœåŠ¡å™¨ï¼Œèµ„æºä¼šå®¹æ˜“å—åˆ°å…¶ä»–ç”¨æˆ·çš„å½±å“ã€‚â€”â€”éš”ç¦»æ€§ å–„äºå¤„ç†é›†ä¸­çˆ†å‘çš„æœåŠ¡å™¨ä½¿ç”¨å‹åŠ›ï¼›â€”â€”å¼¹æ€§ä¼¸ç¼©ï¼Œå¿«é€Ÿæ‰©å±• å¯ä»¥å¾ˆè½»æ˜“çš„å°†åœ¨ä¸€ä¸ªå¹³å°ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œè¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ä¸Šï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿è¡Œç¯å¢ƒçš„å˜åŒ–å¯¼è‡´åº”ç”¨æ— æ³•æ­£å¸¸è¿è¡Œçš„æƒ…å†µã€‚â€”â€”è¿ç§»æ–¹ä¾¿ ä½¿ç”¨Dockerå¯ä»¥é€šè¿‡å®šåˆ¶åº”ç”¨é•œåƒæ¥å®ç°æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€éƒ¨ç½²ã€‚â€”â€”æŒç»­äº¤ä»˜å’Œéƒ¨ç½² Dockeråº”ç”¨åœºæ™¯ â‘  Web åº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒ â‘¡ è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒ â‘¢ åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²å’Œè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–çš„åå°åº”ç”¨ ä½¿ç”¨Dockerå¯ä»¥å®ç°å¼€å‘äººå‘˜çš„å¼€å‘ç¯å¢ƒã€æµ‹è¯•äººå‘˜çš„æµ‹è¯•ç¯å¢ƒã€è¿ç»´äººå‘˜çš„ç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚ Dockerå€Ÿé‰´äº†æ ‡å‡†é›†è£…ç®±çš„æ¦‚å¿µã€‚æ ‡å‡†é›†è£…ç®±å°†è´§ç‰©è¿å¾€ä¸–ç•Œå„åœ°ï¼ŒDockerå°†è¿™ä¸ªæ¨¡å‹è¿ç”¨åˆ°è‡ªå·±çš„è®¾è®¡ä¸­ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼šé›†è£…ç®±è¿è¾“è´§ç‰©ï¼Œè€ŒDockerè¿è¾“è½¯ä»¶ã€‚ 1.3 å®¹å™¨ä¸è™šæ‹Ÿæœºæ¯”è¾ƒä¸‹é¢çš„å›¾ç‰‡æ¯”è¾ƒäº† Docker å’Œä¼ ç»Ÿè™šæ‹ŸåŒ–æ–¹å¼çš„ä¸åŒä¹‹å¤„ï¼Œå¯è§å®¹å™¨æ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ä¸Šå®ç°è™šæ‹ŸåŒ–ï¼Œç›´æ¥å¤ç”¨æœ¬åœ°ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œè€Œä¼ ç»Ÿæ–¹å¼åˆ™æ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®ç°ã€‚ ä¼ ç»Ÿè™šæ‹Ÿæœº ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯åŸºäºå®‰è£…åœ¨ä¸»æ“ä½œç³»ç»Ÿä¸Šçš„è™šæ‹Ÿæœºç®¡ç†ç³»ç»Ÿï¼ˆå¦‚ï¼šVirtualBoxå’ŒVMWareç­‰ï¼‰ï¼Œåˆ›å»ºè™šæ‹Ÿæœºï¼ˆè™šæ‹Ÿå‡ºå„ç§ç¡¬ä»¶ï¼‰ï¼Œåœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…ä»æ“ä½œç³»ç»Ÿï¼Œåœ¨ä»æ“ä½œç³»ç»Ÿä¸­å®‰è£…éƒ¨ç½²å„ç§åº”ç”¨ã€‚ Docker Dockerå®¹å™¨æ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ä¸Šå®ç°è™šæ‹ŸåŒ–ï¼Œç›´æ¥å¤ç”¨æœ¬åœ°ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œè€Œä¼ ç»Ÿè™šæ‹Ÿæœºåˆ™æ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®ç°è™šæ‹ŸåŒ–ã€‚ä¸ä¼ ç»Ÿçš„è™šæ‹Ÿæœºç›¸æ¯”ï¼ŒDockerä¼˜åŠ¿ä½“ç°ä¸ºå¯åŠ¨é€Ÿåº¦å¿«ã€å ç”¨ä½“ç§¯å°ã€‚ ä½¿ç”¨ä¸Šçš„åŒºåˆ« ç®€å•æ¥è¯´ï¼š å®¹å™¨å’Œè™šæ‹Ÿæœºå…·æœ‰ç›¸ä¼¼çš„èµ„æºéš”ç¦»å’Œåˆ†é…ä¼˜åŠ¿ï¼Œä½†åŠŸèƒ½æœ‰æ‰€ä¸åŒï¼Œå› ä¸ºå®¹å™¨è™šæ‹ŸåŒ–çš„æ˜¯æ“ä½œç³»ç»Ÿï¼Œè€Œä¸æ˜¯ç¡¬ä»¶ï¼Œå› æ­¤å®¹å™¨æ›´å®¹æ˜“ç§»æ¤ï¼Œæ•ˆç‡ä¹Ÿæ›´é«˜ã€‚ 1.4 Docker ç»„ä»¶1.4.1 Dockerç»„æˆéƒ¨åˆ†Dockeræ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯-æœåŠ¡å™¨ï¼ˆC&#x2F;Sï¼‰æ¶æ„ç¨‹åºã€‚Dockerå®¢æˆ·ç«¯åªéœ€è¦å‘DockeræœåŠ¡å™¨æˆ–è€…å®ˆæŠ¤è¿›ç¨‹å‘å‡ºè¯·æ±‚ï¼ŒæœåŠ¡å™¨æˆ–è€…å®ˆæŠ¤è¿›ç¨‹å°†å®Œæˆæ‰€æœ‰å·¥ä½œå¹¶è¿”å›ç»“æœã€‚Dockeræä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·Dockerä»¥åŠä¸€æ•´å¥—RESTful APIã€‚ä½ å¯ä»¥åœ¨åŒä¸€å°å®¿ä¸»æœºä¸Šè¿è¡ŒDockerå®ˆæŠ¤è¿›ç¨‹å’Œå®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥ä»æœ¬åœ°çš„Dockerå®¢æˆ·ç«¯è¿æ¥åˆ°è¿è¡Œåœ¨å¦ä¸€å°å®¿ä¸»æœºä¸Šçš„è¿œç¨‹Dockerå®ˆæŠ¤è¿›ç¨‹ã€‚ 1.4.2 Dockeré•œåƒä¸å®¹å™¨é•œåƒï¼šç±»ä¼¼è™šæ‹Ÿæœºé•œåƒ , æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿ æ“ä½œç³»ç»Ÿåˆ†ä¸ºå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ã€‚å¯¹äºLinuxè€Œè¨€ï¼Œå†…æ ¸å¯åŠ¨åï¼Œä¼šæŒ‚è½½rootæ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒã€‚è€ŒDockeré•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ªrootæ–‡ä»¶ç³»ç»Ÿã€‚ Dockeré•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚ é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚ å®¹å™¨ï¼šç±»ä¼¼linuxç³»ç»Ÿç¯å¢ƒï¼Œè¿è¡Œå’Œéš”ç¦»åº”ç”¨ã€‚æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ é•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ ã€‚ ä»“åº“ï¼šé›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœ°æ–¹ã€‚ é•œåƒæ„å»ºå®Œæˆåï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å½“å‰å®¿ä¸»ä¸Šè¿è¡Œï¼Œä½†æ˜¯ï¼Œ å¦‚æœéœ€è¦åœ¨å…¶å®ƒæœåŠ¡å™¨ä¸Šä½¿ç”¨è¿™ä¸ªé•œåƒï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªé›†ä¸­å­˜å‚¨ã€åˆ†å‘é•œåƒçš„åœ°æ–¹ï¼Œæ¯”å¦‚åé¢æˆ‘ä»¬è¦å­¦çš„ï¼ŒDocker Registryå°±æ˜¯è¿™æ ·çš„æœåŠ¡ã€‚ 1.4.3 Registryï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰Dockerç”¨Registryæ¥ä¿å­˜ç”¨æˆ·æ„å»ºçš„é•œåƒã€‚Registryåˆ†ä¸ºå…¬å…±å’Œç§æœ‰ä¸¤ç§ã€‚Dockerå…¬å¸è¿è¥å…¬å…±çš„Registryå«åšDocker Hubã€‚ç”¨æˆ·å¯ä»¥åœ¨Docker Hubæ³¨å†Œè´¦å·ï¼Œåˆ†äº«å¹¶ä¿å­˜è‡ªå·±çš„é•œåƒï¼ˆè¯´æ˜ï¼šåœ¨Docker Hubä¸‹è½½é•œåƒå·¨æ…¢ï¼Œå¯ä»¥è‡ªå·±æ„å»ºç§æœ‰çš„Registryï¼‰ã€‚ https://hub.docker.com/ äºŒã€Dockerå®‰è£…ä¸å¯åŠ¨2.1 å®‰è£…Docker-CentOS7Dockerå®˜æ–¹å»ºè®®åœ¨Ubuntuä¸­å®‰è£…ï¼Œå› ä¸ºDockeræ˜¯åŸºäºUbuntuå‘å¸ƒçš„ï¼Œè€Œä¸”ä¸€èˆ¬Dockerå‡ºç°çš„é—®é¢˜Ubuntuæ˜¯æœ€å…ˆæ›´æ–°æˆ–è€…æ‰“è¡¥ä¸çš„ã€‚åœ¨å¾ˆå¤šç‰ˆæœ¬çš„CentOSä¸­æ˜¯ä¸æ”¯æŒæ›´æ–°æœ€æ–°çš„ä¸€äº›è¡¥ä¸åŒ…çš„ã€‚â€‹ ç”±äºæˆ‘ä»¬å­¦ä¹ çš„ç¯å¢ƒéƒ½ä½¿ç”¨çš„æ˜¯CentOSï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬å°†Dockerå®‰è£…åˆ°CentOSä¸Šã€‚ æ³¨æ„ï¼šè¿™é‡Œå»ºè®®å®‰è£…åœ¨CentOS7.xä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œåœ¨CentOS6.xçš„ç‰ˆæœ¬ä¸­ï¼Œå®‰è£…å‰éœ€è¦å®‰è£…å…¶ä»–å¾ˆå¤šçš„ç¯å¢ƒï¼Œè€Œä¸”Dockerå¾ˆå¤šè¡¥ä¸ä¸æ”¯æŒæ›´æ–°ã€‚ å®˜ç½‘ä¸­æ–‡å®‰è£…å‚è€ƒæ‰‹å†Œ https://docs.docker.com/install/linux/docker-ce/centos/ ç¡®å®šä½ æ˜¯CentOS7åŠä»¥ä¸Šç‰ˆæœ¬ cat &#x2F;etc&#x2F;redhat-release yumå®‰è£…gccç›¸å…³ CentOS7èƒ½ä¸Šå¤–ç½‘ æ£€æŸ¥gccå’Œg++æ˜¯å¦å®‰è£…å¥½ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…å¥½ï¼Œåˆ™éœ€è¦å®‰è£…ã€‚ å®‰è£…gccå’Œg++ yum -y install gcc yum -y install gcc-c++ å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ… yum install -y yum-utils device-mapper-persistent-data lvm2 yum install -y yum-utils device-mapper-persistent-data lvm2 è®¾ç½®é•œåƒä»“åº“ å¤§å‘(åƒä¸‡ä¸è¦è¯•ï¼Œç½‘é€Ÿæ…¢ï¼Œè¶…æ—¶ï¼Œå®‰è£…ä¸ä¸Š) yum-config-manager â€“add-repo ï¼ˆcentoså¿«é€Ÿæ·»åŠ yumæºï¼‰https://download.docker.com/linux/centos/docker-ce.repo æŠ¥é”™ï¼šå®˜ç½‘å¤ªæ…¢ï¼Œä¸€å®šè¶…æ—¶ã€‚ [Errno 14] curl#35 - TCP connection reset by peer [Errno 12] curl#35 - Timeout æ¨èï¼šé˜¿é‡Œäº‘æœåŠ¡å™¨ yum-config-manager â€“add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼• yum makecache fast å®‰è£…DOCKER CEï¼ˆç¤¾åŒºç‰ˆï¼‰ï¼ˆDOCKER EEä¼ä¸šç‰ˆæ”¶è´¹ï¼‰ yum -y install docker-ce å¯åŠ¨docker æ‰‹åŠ¨å¯åŠ¨ï¼šsystemctl start docker è‡ªåŠ¨å¯åŠ¨ï¼šsystemctl enable docker æµ‹è¯• æ£€æŸ¥ç‰ˆæœ¬ï¼šdocker version ä¸‹è½½å¹¶è¿è¡ŒHelloWorldï¼šdocker run hello-world å¦‚æœä¸‹è½½ä¸ä¸‹æ¥ï¼Œå¯ä»¥é…ç½®é•œåƒåŠ é€Ÿå™¨ è¾“å‡ºè¿™æ®µæç¤ºä»¥åï¼Œhello worldå°±ä¼šåœæ­¢è¿è¡Œï¼Œå®¹å™¨è‡ªåŠ¨ç»ˆæ­¢ã€‚ runå¹²äº†ä»€ä¹ˆ é…ç½®é•œåƒåŠ é€ŸCentOS7ç‰ˆæœ¬ mkdir -p &#x2F;etc&#x2F;docker vim &#x2F;etc&#x2F;docker&#x2F;daemon.json #ç½‘æ˜“äº‘ { â€œregistry-mirrorsâ€: [â€œhttp://hub-mirror.c.163.comâ€œ] } #é˜¿é‡Œäº‘(æ¨è) { â€œregistry-mirrorsâ€: [â€œhttps://8y2y8njn.mirror.aliyuncs.comâ€œ] } #ustc #æ˜¯è€ç‰Œçš„linuxé•œåƒæœåŠ¡æä¾›è€…äº†ï¼Œè¿˜åœ¨é¥è¿œçš„ubuntu 5.04ç‰ˆæœ¬çš„æ—¶å€™å°±åœ¨ç”¨ã€‚ustcçš„dockeré•œåƒåŠ é€Ÿå™¨é€Ÿåº¦å¾ˆå¿«ã€‚ #ustc docker mirrorçš„ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯ä¸éœ€è¦æ³¨å†Œï¼Œæ˜¯çœŸæ­£çš„å…¬å…±æœåŠ¡ã€‚ #https://lug.ustc.edu.cn/wiki/mirrors/help/docker åœ¨è¯¥æ–‡ä»¶ä¸­è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š { â€œregistry-mirrorsâ€: [â€œhttps://docker.mirrors.ustc.edu.cnâ€œ] } systemctl daemon-reload systemctl restart docker å¸è½½ systemctl stop docker yum -y remove docker-ce rm -rf &#x2F;var&#x2F;lib&#x2F;docker å¸è½½æ—§ç‰ˆæœ¬ 2019.11è‹±æ–‡å®˜ç½‘ç‰ˆæœ¬ æœ€æ–°çš„è‹±æ–‡ç‰ˆï¼šhttps://docs.docker.com/install/linux/docker-ce/centos/\\#uninstall-old-versions yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-engine 2.2 Dockerçš„å¯åŠ¨ä¸åœæ­¢2.2.1 å‘½ä»¤ å¯åŠ¨dockerï¼š systemctl start docker åœæ­¢dockerï¼š systemctl stop docker é‡å¯dockerï¼š systemctl restart docker æŸ¥çœ‹dockerçŠ¶æ€ï¼š systemctl status docker å¼€æœºå¯åŠ¨ï¼š systemctl enable docker æŸ¥çœ‹dockeræ¦‚è¦ä¿¡æ¯ï¼š docker info æŸ¥çœ‹dockerå¸®åŠ©æ–‡æ¡£ï¼š docker â€“help 2.2.2 å¸®åŠ©æ‰‹å†Œï¼šdocker â€“help 2.2.3 æŒ‡ä»¤ä»‹ç» cp æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ(OSæ“ä½œç³»ç»Ÿ|å®¿ä¸»æœº)å’Œå®¹å™¨ä¹‹é—´è¿›è¡Œæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹æ‹·è´ exec ç™»å½•ä¸€ä¸ªå®¹å™¨ï¼Œä½¿ç”¨å‘½ä»¤è¡Œæ“ä½œæ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚ images é•œåƒçš„é›†åˆæŸ¥è¯¢ã€‚ ps å®¹å™¨åˆ—è¡¨ pull ä¸‹è½½é•œåƒ restart é‡å¯ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ rm åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ rmi åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒ run åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¹¶è¿è¡Œèµ·æ¥ save å¯¼å‡ºé•œåƒåˆ°ä¸€ä¸ªæ–‡ä»¶(tar)ä¸­ search æœç´¢é•œåƒï¼ˆä»Docker Hubï¼‰ start å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»åœæ­¢çš„å®¹å™¨ stop åœæ­¢ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨"},{"title":"Dockeré•œåƒç®¡ç†","path":"/wiki/docker/03.Dockeré•œåƒç®¡ç†.html","content":"é•œåƒï¼šDockeré•œåƒæ˜¯ç”±æ–‡ä»¶ç³»ç»Ÿå åŠ è€Œæˆï¼ˆæ˜¯ä¸€ç§æ–‡ä»¶çš„å­˜å‚¨å½¢å¼ï¼‰ï¼›æ˜¯dockerä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå¯ä»¥è®¤ä¸ºé•œåƒå°±æ˜¯å¯¹æŸäº›è¿è¡Œç¯å¢ƒæˆ–è€…è½¯ä»¶æ‰“çš„åŒ…ï¼Œç”¨æˆ·å¯ä»¥ä»dockerä»“åº“ä¸­ä¸‹è½½åŸºç¡€é•œåƒåˆ°æœ¬åœ°ï¼Œæ¯”å¦‚ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä»dockerä»“åº“æ‹‰å–ï¼ˆä¸‹è½½ï¼‰ä¸€ä¸ªåªåŒ…å«centos7ç³»ç»Ÿçš„åŸºç¡€é•œåƒï¼Œç„¶ååœ¨è¿™ä¸ªé•œåƒä¸­å®‰è£…jdkã€mysqlã€Tomcatå’Œè‡ªå·±å¼€å‘çš„åº”ç”¨ï¼Œæœ€åå°†è¿™äº›ç¯å¢ƒæ‰“æˆä¸€ä¸ªæ–°çš„é•œåƒã€‚å¼€å‘äººå‘˜å°†è¿™ä¸ªæ–°çš„é•œåƒæäº¤ç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•äººå‘˜åªéœ€è¦åœ¨æµ‹è¯•ç¯å¢ƒä¸‹è¿è¡Œè¿™ä¸ªé•œåƒå°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯å¼€å‘äººå‘˜çš„ç¯å¢ƒå’Œæµ‹è¯•äººå‘˜çš„ç¯å¢ƒå®Œå…¨ä¸€è‡´ã€‚ 1 é•œåƒç›¸å…³å‘½ä»¤1.1 æŸ¥çœ‹é•œåƒæŸ¥çœ‹é•œåƒå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼šdocker images REPOSITORYï¼šé•œåƒåç§° TAGï¼šé•œåƒæ ‡ç­¾ï¼ˆç‰ˆæœ¬ï¼‰ IMAGE IDï¼šé•œåƒID CREATEDï¼šé•œåƒçš„åˆ›å»ºæ—¥æœŸï¼ˆä¸æ˜¯è·å–è¯¥é•œåƒçš„æ—¥æœŸï¼‰ SIZEï¼šé•œåƒå¤§å° è¿™äº›é•œåƒéƒ½æ˜¯å­˜å‚¨åœ¨Dockerçš„ &#x2F;var&#x2F;lib&#x2F;docker ç›®å½•ä¸‹ 1.2 æœç´¢é•œåƒä»ç½‘ç»œä¸­æŸ¥æ‰¾éœ€è¦çš„é•œåƒï¼šdocker search é•œåƒåç§° ä¾‹å¦‚ ä¸‹è½½ä¸€ä¸ª nginx é•œåƒ NAMEï¼šä»“åº“åç§° DESCRIPTIONï¼šé•œåƒæè¿° STARSï¼šç”¨æˆ·è¯„ä»·ï¼Œååº”ä¸€ä¸ªé•œåƒçš„å—æ¬¢è¿ç¨‹åº¦ OFFICIALï¼šæ˜¯å¦å®˜æ–¹ AUTOMATEDï¼šè‡ªåŠ¨æ„å»ºï¼Œè¡¨ç¤ºè¯¥é•œåƒç”±Docker Hubè‡ªåŠ¨æ„å»ºæµç¨‹åˆ›å»º 1.3 æ‹‰å–é•œåƒæ‹‰å–é•œåƒå°±æ˜¯ä»Dockerä»“åº“ä¸‹è½½é•œåƒåˆ°æœ¬åœ°ï¼Œé•œåƒåç§°æ ¼å¼ä¸º ã€åç§°:ç‰ˆæœ¬å·ã€‘ï¼Œå¦‚æœç‰ˆæœ¬å·ä¸æŒ‡å®šåˆ™æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ å‘½ä»¤ï¼šdocker pull é•œåƒåç§°ä¸‹è½½ä¸€ä¸ª nginx çš„é•œåƒ , éœ€è¦æ³¨æ„ï¼šå¦‚æœä¸‹è½½çš„æ—¶å€™ï¼Œä¸æŒ‡å®šç‰ˆæœ¬ï¼Œä¼šä¸‹è½½æœ€æ–°ç‰ˆæœ¬ åˆšåˆšä¸‹è½½çš„é•œåƒé€šè¿‡ docker images å°±å¯ä»¥æŸ¥çœ‹ 1.4 åˆ é™¤é•œåƒå¯ä»¥æŒ‰ç…§é•œåƒidåˆ é™¤é•œåƒï¼Œå‘½ä»¤å¦‚ä¸‹ï¼šdocker rmi é•œåƒID åˆ é™¤å•ä¸ªé•œåƒ(-f å¼ºåˆ¶åˆ é™¤)ï¼šdocker rmi -f é•œåƒID åˆ é™¤å¤šä¸ªé•œåƒï¼šdocker rmi -f é•œåƒå1:TAG é•œåƒå2:TAG åˆ é™¤æ‰€æœ‰é•œåƒï¼šdocker rmi -f $(docker images -qa) 1.5ä»Docker Hubæ‹‰å–Dockeré•œåƒé¦–é¡µï¼ŒåŒ…æ‹¬å®˜æ–¹é•œåƒå’Œå…¶å®ƒå…¬å¼€é•œåƒã€‚Docker Hubä¸Šæœ€å—æ¬¢è¿çš„10å¤§é•œåƒï¼ˆé€šè¿‡Docker registry APIè·å–ä¸äº†é•œåƒè¢«pullçš„ä¸ªæ•°ï¼Œåªèƒ½é€šè¿‡é•œåƒçš„starsæ•°é‡æ¥è¡¡é‡é•œåƒçš„æµè¡Œåº¦ã€‚æ¯«æ— ç–‘é—®ï¼Œæ‹¥æœ‰æœ€é«˜starsæ•°é‡çš„åº“éƒ½æ˜¯å®˜æ–¹åº“ï¼‰ã€‚ https://hub.docker.com/search?image_filter=official&amp;type=image å›½æƒ…çš„åŸå› ï¼Œå›½å†…ä¸‹è½½ Docker HUB å®˜æ–¹çš„ç›¸å…³é•œåƒæ¯”è¾ƒæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…ï¼ˆdocker.ioï¼‰çš„ä¸€äº›é•œåƒåŠ é€Ÿå™¨ï¼Œé•œåƒä¿æŒå’Œå®˜æ–¹ä¸€è‡´ï¼Œå…³é”®æ˜¯é€Ÿåº¦å¿«ï¼Œæ¨èä½¿ç”¨ã€‚"},{"title":"Dockerå®¹å™¨å°è£…","path":"/wiki/docker/04.Dockerå®¹å™¨å°è£….html","content":"3.2 å®¹å™¨ç›¸å…³å‘½ä»¤ å®¹å™¨ä¹Ÿæ˜¯dockerä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œé•œåƒæ˜¯åˆ›å»ºå®¹å™¨çš„è½¯ä»¶ , å®¹å™¨æ˜¯ç”±é•œåƒè¿è¡Œäº§ç”Ÿçš„è¿è¡Œå®ä¾‹ã€‚é•œåƒå’Œå®¹å™¨çš„å…³ç³»ï¼Œå°±å¦‚åŒJavaè¯­è¨€ä¸­ç±»å’Œå¯¹è±¡çš„å…³ç³»ã€‚ å¦‚æœéœ€è¦é€šä¿—çš„æè¿°å®¹å™¨çš„è¯ï¼Œæˆ‘è§‰å¾—å®¹å™¨å°±æ˜¯ä¸€ä¸ªå­˜æ”¾ä¸œè¥¿çš„åœ°æ–¹ï¼Œå°±åƒä¹¦åŒ…å¯ä»¥è£…å„ç§æ–‡å…·ã€è¡£æŸœå¯ä»¥æ”¾å„ç§è¡£æœã€é‹æ¶å¯ä»¥æ”¾å„ç§é‹å­ä¸€æ ·ã€‚æˆ‘ä»¬ç°åœ¨æ‰€è¯´çš„å®¹å™¨å­˜æ”¾çš„ä¸œè¥¿å¯èƒ½æ›´åå‘äºåº”ç”¨ã€‚æ¯”å¦‚ç½‘ç«™ã€ç¨‹åºç”šè‡³æ˜¯ç³»ç»Ÿç¯å¢ƒã€‚ 1.1 æŸ¥çœ‹å®¹å™¨ æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š docker ps æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼š docker ps â€“a æŸ¥çœ‹æœ€åä¸€æ¬¡è¿è¡Œçš„å®¹å™¨ï¼š docker ps â€“l æŸ¥çœ‹åœæ­¢çš„å®¹å™¨ï¼š docker ps -f status&#x3D;exited 1.2 åˆ›å»ºä¸å¯åŠ¨å®¹å™¨â‘  ä»€ä¹ˆæ˜¯å®¿ä¸»æœºï¼Ÿ å°±æ˜¯ä¸»æœºï¼Œè¿™ä¸ªæ¦‚å¿µæ˜¯ç›¸å¯¹äºå­æœºè€Œè¨€çš„ï¼Œæ¯”å¦‚ä½ å®‰è£…æœ‰è™šæ‹Ÿæœºçš„è¯ï¼Œé‚£ä¹ˆç›¸å¯¹äºè™šæ‹Ÿæœºè€Œè¨€ï¼Œä½ æ­£åœ¨ä½¿ç”¨çš„è®¡ç®—æœºå°±æ˜¯å®¿ä¸»æœºï¼Œè™šæ‹Ÿæœºæ˜¯å®‰è£…åœ¨ä¸»æœºä¸Šçš„ï¼Œå¿…é¡»åœ¨ä¸»æœºä¸Šæ‰èƒ½è¿è¡Œï¼Œä¸»æœºå°±æ˜¯ä¸€ä¸ªâ€œå®¿ä¸»â€ã€‚ â‘¡ åˆ›å»ºå®¹å™¨å¸¸ç”¨çš„å‚æ•°è¯´æ˜ï¼š åˆ›å»ºå®¹å™¨å‘½ä»¤ï¼šdocker run -iï¼šè¡¨ç¤ºè¿è¡Œå®¹å™¨ -tï¼šè¡¨ç¤ºå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥å…¶å‘½ä»¤è¡Œã€‚åŠ å…¥è¿™ä¸¤ä¸ªå‚æ•°åï¼Œå®¹å™¨åˆ›å»ºå°±èƒ½ç™»å½•è¿›å»ã€‚å³åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ã€‚ â€“name :ä¸ºåˆ›å»ºçš„å®¹å™¨å‘½åã€‚ -vï¼šè¡¨ç¤ºç›®å½•æ˜ å°„å…³ç³»ï¼ˆå‰è€…æ˜¯å®¿ä¸»æœºç›®å½•ï¼Œåè€…æ˜¯æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šçš„ç›®å½•ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªï¼våšå¤šä¸ªç›®å½•æˆ–æ–‡ä»¶æ˜ å°„ã€‚æ³¨æ„ï¼šæœ€å¥½åšç›®å½•æ˜ å°„ï¼Œåœ¨å®¿ä¸»æœºä¸Šåšä¿®æ”¹ï¼Œç„¶åå…±äº«åˆ°å®¹å™¨ä¸Šã€‚ -dï¼šåœ¨runåé¢åŠ ä¸Š-då‚æ•°,åˆ™ä¼šåˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨åœ¨åå°è¿è¡Œï¼ˆè¿™æ ·åˆ›å»ºå®¹å™¨åä¸ä¼šè‡ªåŠ¨ç™»å½•å®¹å™¨ï¼Œå¦‚æœåªåŠ -i -tä¸¤ä¸ªå‚æ•°ï¼Œåˆ›å»ºåå°±ä¼šè‡ªåŠ¨è¿›å»å®¹å™¨ï¼‰ã€‚ -pï¼šè¡¨ç¤ºç«¯å£æ˜ å°„ï¼Œå‰è€…æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œåè€…æ˜¯å®¹å™¨å†…çš„æ˜ å°„ç«¯å£ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ª-påšå¤šä¸ªç«¯å£æ˜ å°„ ï¼ˆ1ï¼‰äº¤äº’å¼æ–¹å¼åˆ›å»ºå®¹å™¨ ä»¥äº¤äº’å¼æ–¹å¼åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼Œå¯åŠ¨å®Œæˆåï¼Œç›´æ¥è¿›å…¥å½“å‰å®¹å™¨ã€‚ä½¿ç”¨exitå‘½ä»¤é€€å‡ºå®¹å™¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ä»¥æ­¤ç§æ–¹å¼å¯åŠ¨å®¹å™¨ï¼Œå¦‚æœé€€å‡ºå®¹å™¨ï¼Œåˆ™å®¹å™¨ä¼šè¿›å…¥åœæ­¢çŠ¶æ€ã€‚å¯ä»¥ç†è§£æˆäº¤äº’å¼å®¹å™¨ æ˜¯å‰å°å®¹å™¨ã€‚ docker run -it --name=å®¹å™¨åç§° é•œåƒåç§°:æ ‡ç­¾ /bin/bash# æ¯”å¦‚ï¼šdocker run -it --name=mycentos centos:7 /bin/bash# docker run:è¡¨ç¤ºåˆ›å»ºå®¹å™¨# -itï¼šè¡¨ç¤ºè¿è¡Œå®¹å™¨å¹¶è¿›å…¥å®ƒçš„å‘½ä»¤è¡Œ# --name=mycentosï¼šç»™å½“å‰çš„å®¹å™¨å‘½å# centos:7ï¼šä½¿ç”¨è¯¥é•œåƒåˆ›å»º# /bin/bashï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ /bin/bash åˆ›å»ºå¥½å®¹å™¨ï¼Œå¹¶ä¸”å·²ç»è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨äº†ï¼Œå¯ä»¥ç›´æ¥è§‚å¯Ÿå‰é¢ä¸­æ‹¬å·é‡Œé¢çš„å†…å®¹å‘ç°ï¼Œè·Ÿåˆ›å»ºå®¹å™¨ä¹‹å‰ä¸ä¸€æ ·äº†ï¼Œ å¹¶ä¸” é€šè¿‡ dir å‘½ä»¤ï¼Œä¼šå‘ç°ï¼Œå…¶å®å®¹å™¨å†…éƒ¨ä¹Ÿæ˜¯ä¸€ä¸ª centos , æˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªå®¹å™¨éƒ½çœ‹æˆä¸€ä¸ªå°ç”µè„‘æˆ–è€…æœåŠ¡å™¨ é‡æ–°å¼€ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼ŒæŸ¥çœ‹åˆšåˆšåˆ›å»ºçš„å®¹å™¨æ˜¯å¦å·²ç»æœ‰äº†ã€‚ æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼šdocker ps é€€å‡ºå½“å‰å®¹å™¨ï¼šexit é€€å‡ºä¹‹åï¼Œå®¹å™¨ä¹Ÿé€€å‡ºäº†ï¼Œæ²¡æœ‰åˆ é™¤ (2) åˆ›å»ºåå°å®¹å™¨ docker run -id â€“name&#x3D;mycentos2 centos:7 æŸ¥çœ‹ docker å®¹å™¨å·²ç»è¿è¡Œ (3) å®ˆæŠ¤å¼æ–¹å¼åˆ›å»ºå®¹å™¨ï¼š åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ï¼›å¦‚æœå¯¹äºä¸€ä¸ªéœ€è¦é•¿æœŸè¿è¡Œçš„å®¹å™¨æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ã€‚ å‘½ä»¤å¦‚ä¸‹ï¼ˆå®¹å™¨åç§°ä¸èƒ½é‡å¤ï¼‰ï¼šå®ˆæŠ¤å®¹å™¨å¯ä»¥ç†è§£æˆåœ¨åå°è¿è¡Œçš„å®¹å™¨ # å®ˆæŠ¤å¼å®¹å™¨å’Œäº¤äº’å¼å®¹å™¨çš„åˆ›å»ºæ–¹å¼åŒºåˆ«ï¼š# â‘  -it æ¢æˆ -di# â‘¡ å»æ‰åé¢çš„ /bin/bashdocker run -di --name=å®¹å™¨åç§° é•œåƒåç§°:æ ‡ç­¾# æ¯”å¦‚ï¼šdocker run -di --name=mycentos10 centos:7 é€šè¿‡ docker ps æŸ¥çœ‹å®¹å™¨å·²ç»æ˜¯è¿è¡ŒçŠ¶æ€ è¿›å…¥å®ˆæŠ¤å¼å®¹å™¨æ–¹å¼ï¼š docker exec -it å®¹å™¨åç§° (æˆ–è€…å®¹å™¨ID) /bin/bash# æ¯”å¦‚ docker exec -it mycentos10 /bin/bash å·²ç»è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨äº†ï¼Œå¦‚æœç°åœ¨é€€å‡ºexitï¼Œç„¶åæŸ¥çœ‹å®¹å™¨docker psæ˜¯å¦è¿˜åœ¨åå°è¿è¡Œï¼ˆä»åœ¨è¿è¡Œï¼‰ 1.3 åœæ­¢ä¸å¯åŠ¨å®¹å™¨ å…ˆé€šè¿‡ docker ps æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ åœæ­¢å®¹å™¨ï¼š docker stop å®¹å™¨åç§°ï¼ˆæˆ–è€…å®¹å™¨IDï¼‰ ä¾‹å¦‚ï¼š docker stop mycentos2 åˆ›å»ºå®Œå®¹å™¨ä¹‹åï¼Œåœæ­¢å®¹å™¨ æŸ¥çœ‹å®¹å™¨æ˜¯å¦å·²ç»åœæ­¢ å¯åŠ¨å®¹å™¨ï¼š docker start å®¹å™¨åç§°ï¼ˆæˆ–è€…å®¹å™¨IDï¼‰ ä¾‹å¦‚ï¼š docker start mycentos2 ï¼ˆä»¥äº¤äº’å¼è¿è¡Œçš„å®¹å™¨ï¼Œåªæ˜¯ç¬¬ä¸€æ¬¡exité€€å‡ºçš„æ—¶å€™ä¼šå…³é—­å®¹å™¨ï¼Œå½“ç”¨startå¯åŠ¨çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºåå°å¯åŠ¨äº†ï¼Œexecè¿›å»ä¹‹åå†exité€€å‡ºä¸ä¼šå…³é—­å®¹å™¨ï¼‰ æŸ¥çœ‹å®¹å™¨æ˜¯å¦å·²ç»å¯åŠ¨ 1.4 æ–‡ä»¶æ‹·è´æˆ‘ä»¬éœ€è¦åœ¨å®¹å™¨å†…å®‰è£…ä¸€ä¸ªè½¯ä»¶ï¼Œè½¯ä»¶é¦–å…ˆéœ€è¦æœ‰å®‰è£…åŒ…ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠå®‰è£…åŒ…æ‹·è´åˆ°å®¹å™¨å†…ã€‚æˆ‘ä»¬é€šå¸¸çš„æ“ä½œæ˜¯å…ˆæŠŠæ–‡ä»¶ä¸Šä¼ åˆ°å®¿ä¸»æœºï¼Œç„¶åæˆ‘ä»¬åœ¨å°†æ–‡ä»¶ä»å®¿ä¸»æœºæ‹·è´åˆ°å®¹å™¨å†…çš„æŸä¸ªç›®å½•ä¸‹é¢è¿›è¡Œå®‰è£…ã€‚ å°†linuxå®¿ä¸»æœºä¸­çš„æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨å†…å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š å¦‚æœæˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨å†…å¯ä»¥ä½¿ç”¨cpå‘½ä»¤ docker cp éœ€è¦æ‹·è´çš„æ–‡ä»¶æˆ–ç›®å½• å®¹å™¨åç§°:å®¹å™¨ç›®å½• ä¾‹å¦‚ï¼š docker cp anaconda-ks.cfg mycentos2:&#x2F;usr&#x2F;local&#x2F; æ‹·è´ä¸€ä¸ªæ–‡ä»¶åˆ° mycentos2 çš„ &#x2F;urs&#x2F;local&#x2F; æ–‡ä»¶ä¸‹é¢ ï¼Œæ‹·è´å®Œæˆä¹‹åï¼Œåˆ é™¤æ–‡ä»¶ï¼Œç„¶ååœ¨mycentos2æ‹·è´è¿‡æ¥ ç™»å½•å®¹å™¨æŸ¥çœ‹æ‹·è´ä¹‹åçš„ç»“æœ docker exec -it mycentos2 &#x2F;bin&#x2F;bash docker execï¼šè¡¨ç¤ºç™»é™†æ­£åœ¨è¿è¡Œçš„å®¹å™¨ -itï¼šè¿›å…¥å‘½ä»¤è¡Œ mycentos2ï¼šè¿›å…¥åˆ°è¯¥å®¹å™¨ ä¹Ÿå¯ä»¥å°†æ–‡ä»¶ä»å®¹å™¨å†…æ‹·è´å‡ºæ¥ docker cp å®¹å™¨åç§°:å®¹å™¨ç›®å½• éœ€è¦æ‹·è´çš„æ–‡ä»¶æˆ–ç›®å½• ä¾‹å¦‚ï¼šdocker cp mycentos2:&#x2F;usr&#x2F;local&#x2F;anaconda-ks.cfg .&#x2F; æˆ‘ä»¬å…ˆé€šè¿‡ exit é€€å‡ºå®¹å™¨ï¼Œç„¶ååœ¨æŠŠæ–‡ä»¶ä»å®¹å™¨æ‹·è´åˆ°å½“å‰ç›®å½• 1.5 ç›®å½•æŒ‚è½½æˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ï¼Œå°†å®¿ä¸»æœºçš„ç›®å½•ä¸å®¹å™¨å†…çš„ç›®å½•è¿›è¡Œæ˜ å°„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¿®æ”¹å®¿ä¸»æœºæŸä¸ªç›®å½•çš„æ–‡ä»¶ä»è€Œå»å½±å“å®¹å™¨ã€‚ åˆ›å»ºå®¹å™¨ æ·»åŠ -vå‚æ•° åè¾¹ä¸º å®¿ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•ï¼Œä¾‹å¦‚ï¼š # åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨mycentos3,å¹¶æŒ‚è½½linuxä¸­çš„&#x2F;usr&#x2F;local&#x2F;myhtmlç›®å½•åˆ°å®¹å™¨çš„&#x2F;usr&#x2F;local&#x2F;myhtmlï¼›ä¹Ÿå°±æ˜¯åœ¨linuxä¸­çš„&#x2F;usr&#x2F;local&#x2F;myhtmlä¸­æ“ä½œç›¸å½“äºå¯¹å®¹å™¨ç›¸åº”ç›®å½•æ“ä½œ docker run -di â€“name&#x3D;å®¹å™¨çš„åå­— -v &#x2F;usr&#x2F;local&#x2F;myhtml:&#x2F;usr&#x2F;local&#x2F;myhtml centos:7 æ¯”å¦‚ï¼šdocker run -di â€“name&#x3D;mycentos3 -v &#x2F;usr&#x2F;local&#x2F;myhtml:&#x2F;usr&#x2F;local&#x2F;myhtml centos:7 é€šè¿‡ docker ps æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨åˆ›å»ºå®¹å™¨å¹¶ä¸”è¿›è¡Œç›®å½•æŒ‚è½½ï¼Œç„¶ååœ¨é€šè¿‡ docker ps æŸ¥çœ‹åˆšåˆšåˆ›å»ºçš„å®¹å™¨æ˜¯å¦å·²ç»åˆ›å»º è¿›å…¥åˆ° myhtml ç›®å½• ï¼Œé€šè¿‡diræŸ¥çœ‹æ˜¯å¦æœ‰æ–‡ä»¶ï¼Œé€šè¿‡vi test2 ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè¿›å…¥test2æ–‡ä»¶ï¼Œéšä¾¿è¾“å…¥ä¸€äº›æ•°æ® è¿›å…¥ç›®å½•éšä¾¿è¾“å…¥ä¸€äº›ä¸œè¥¿ ï¼Œ é€€å‡ºä¿å­˜ ç™»å½•å®¹å™¨ï¼ŒæŸ¥çœ‹åˆšåˆšè¾“å…¥çš„å†…å®¹ hsg sdg d"},{"title":"Dockerfile","path":"/wiki/docker/05.Dockerfile.html","content":"ä¸€ã€ä»€ä¹ˆæ˜¯é•œåƒï¼Ÿé•œåƒå¯ä»¥çœ‹æˆæ˜¯ç”±å¤šä¸ªé•œåƒå±‚å åŠ èµ·æ¥çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ˆé€šè¿‡UnionFSä¸AUFSæ–‡ä»¶è”åˆç³»ç»Ÿå®ç°ï¼‰ï¼Œé•œåƒå±‚ä¹Ÿå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªåŸºæœ¬çš„é•œåƒï¼Œè€Œæ¯ä¸ªé•œåƒå±‚ä¹‹é—´é€šè¿‡æŒ‡é’ˆçš„å½¢å¼è¿›è¡Œå åŠ ã€‚ æ ¹æ®ä¸Šå›¾ï¼Œé•œåƒå±‚çš„ä¸»è¦ç»„æˆéƒ¨åˆ†åŒ…æ‹¬é•œåƒå±‚ IDã€é•œåƒå±‚æŒ‡é’ˆ ã€ŒæŒ‡å‘çˆ¶å±‚ã€ã€å…ƒæ•°æ®ã€Œ Layer Metadataï¼ŒåŒ…å«äº† Docker æ„å»ºå’Œè¿è¡Œçš„ä¿¡æ¯å’Œçˆ¶å±‚çš„å±‚æ¬¡ä¿¡æ¯ã€ã€‚åªè¯»å±‚å’Œè¯»å†™å±‚ã€ŒTop Layerã€çš„ç»„æˆéƒ¨åˆ†åŸºæœ¬ä¸€è‡´ï¼ŒåŒæ—¶è¯»å†™å±‚å¯ä»¥è½¬æ¢æˆåªè¯»å±‚ã€Œ é€šè¿‡docker commit æ“ä½œå®ç°ã€ã€‚ å…ƒæ•°æ®ï¼ˆmetadataï¼‰å°±æ˜¯å…³äºè¿™ä¸ªå±‚çš„é¢å¤–ä¿¡æ¯ï¼Œå®ƒä¸ä»…èƒ½å¤Ÿè®©Dockerè·å–è¿è¡Œå’Œæ„å»ºæ—¶çš„ä¿¡æ¯ï¼Œè¿˜åŒ…æ‹¬çˆ¶å±‚çš„å±‚æ¬¡ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„ï¼Œåªè¯»å±‚å’Œè¯»å†™å±‚éƒ½åŒ…å«å…ƒæ•°æ®ã€‚ æ¯ä¸€å±‚éƒ½åŒ…æ‹¬äº†ä¸€ä¸ªæŒ‡å‘çˆ¶å±‚çš„æŒ‡é’ˆã€‚å¦‚æœä¸€ä¸ªå±‚æ²¡æœ‰è¿™ä¸ªæŒ‡é’ˆï¼Œè¯´æ˜å®ƒå¤„äºæœ€åº•å±‚ã€‚ åœ¨dockerä¸»æœºä¸­é•œåƒå±‚ï¼ˆimage layerï¼‰çš„å…ƒæ•°æ®è¢«ä¿å­˜åœ¨åä¸ºâ€jsonâ€çš„æ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªå®¹å™¨çš„å…ƒæ•°æ®å¥½åƒæ˜¯è¢«åˆ†æˆäº†å¾ˆå¤šæ–‡ä»¶ï¼Œä½†æˆ–å¤šæˆ–å°‘èƒ½å¤Ÿåœ¨&#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers&#x2F;ç›®å½•ä¸‹æ‰¾åˆ°ï¼Œå°±æ˜¯ä¸€ä¸ªå¯è¯»å±‚çš„idã€‚è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶å¤§å¤šæ˜¯è¿è¡Œæ—¶çš„æ•°æ®ï¼Œæ¯”å¦‚è¯´ç½‘ç»œï¼Œæ—¥å¿—ç­‰ç­‰ã€‚ é•œåƒæ˜¯ä¸€å †åªè¯»å±‚çš„ç»Ÿä¸€è§†è§’ï¼Œé™¤äº†æœ€åº•å±‚æ²¡æœ‰æŒ‡å‘å¤–ï¼Œæ¯ä¸€å±‚éƒ½æŒ‡å‘å®ƒçš„çˆ¶å±‚ã€‚ç»Ÿä¸€æ–‡ä»¶ç³»ç»Ÿï¼ˆ Union File Systemï¼‰æŠ€æœ¯èƒ½å¤Ÿå°†ä¸åŒçš„å±‚æ•´åˆæˆä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä¸ºè¿™äº›å±‚æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†è§’ï¼Œè¿™æ ·å°±éšè—äº†å¤šå±‚çš„å­˜åœ¨ã€‚åœ¨ç”¨æˆ·çš„è§’åº¦çœ‹æ¥ï¼Œåªå­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚é•œåƒæ¯ä¸€å±‚éƒ½æ˜¯ä¸å¯å†™çš„ï¼Œéƒ½æ˜¯åªè¯»å±‚ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é•œåƒåŒ…å«å¤šä¸ªåªè¯»å±‚ï¼Œå®ƒä»¬é‡å åœ¨ä¸€èµ·ã€‚é™¤äº†æœ€ä¸‹é¢ä¸€å±‚ï¼Œå…¶å®ƒå±‚éƒ½ä¼šæœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€å±‚ã€‚è¿™äº›å±‚æ˜¯Dockerå†…éƒ¨çš„å®ç°ç»†èŠ‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨dockerä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿä¸Šè®¿é—®åˆ°ã€‚ç»Ÿä¸€æ–‡ä»¶ç³»ç»Ÿï¼ˆunion file systemï¼Œå‡çº§ç‰ˆä¸ºAUFSï¼‰æŠ€æœ¯èƒ½å¤Ÿå°†ä¸åŒçš„å±‚æ•´åˆæˆä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä¸ºè¿™äº›å±‚æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†è§’ï¼Œè¿™æ ·å°±éšè—äº†å¤šå±‚çš„å­˜åœ¨ï¼Œåœ¨ç”¨æˆ·çš„è§’åº¦çœ‹æ¥ï¼Œåªå­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚ äºŒã€ä»€ä¹ˆæ˜¯DockerfileDockerfile æ˜¯ç”±ä¸€ç³»åˆ—å‘½ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ï¼Œè¿™äº›å‘½ä»¤åº”ç”¨äºåŸºç¡€é•œåƒå¹¶æœ€ç»ˆåˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚å®ƒä»¬ç®€åŒ–äº†ä»å¤´åˆ°å°¾çš„æµç¨‹å¹¶æå¤§çš„ç®€åŒ–äº†éƒ¨ç½²å·¥ä½œã€‚Dockerfile ä» FROM å‘½ä»¤å¼€å§‹ï¼Œç´§æ¥ç€è·Ÿéšç€å„ç§æ–¹æ³•ï¼Œå‘½ä»¤å’Œå‚æ•°ã€‚å…¶äº§å‡ºä¸ºä¸€ä¸ªæ–°çš„å¯ä»¥ç”¨äºåˆ›å»ºå®¹å™¨çš„é•œåƒã€‚ Dockerfile è¯­æ³•ç”±ä¸¤éƒ¨åˆ†æ„æˆï¼Œæ³¨é‡Šå’Œå‘½ä»¤+å‚æ•°ï¼Œæ³¨é‡Šæ˜¯ä¸èƒ½å°‘çš„,å› ä¸ºæ˜å¤©å¯èƒ½å°±å¿˜è®°å†™çš„æ˜¯ä»€ä¹ˆäº†ã€‚è¯´ç™½äº†, Dockerfile æ˜¯å‘Šè¯‰ docker æ€ä¹ˆæ ·åˆ¶ä½œä¸€ä¸ªé•œåƒ,å°±åƒæˆ‘ä»¬å†™ä»£ç å‘Šè¯‰åº”ç”¨æ€ä¹ˆæ‰§è¡Œä¸€æ¡é€»è¾‘,è¿™æ ·åº”è¯¥å¥½ç†è§£äº†ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ Dockerfile ä¸­å†™æ˜,æˆ‘ä»¬éœ€è¦æ€ä¹ˆä¸ªæ‰§è¡Œæ–¹å¼çš„æŸä¸ªé•œåƒ,æœ€åæ‰§è¡Œ docker build å‘½ä»¤æ„å»ºå†™å¥½çš„Dockerfile æˆé•œåƒã€‚ ä¸‰ã€ DockerfileåŸºç¡€å‘½ä»¤3.1ã€ FROMï¼šåŠŸèƒ½ä¸ºæŒ‡å®šåŸºç¡€é•œåƒï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚ å¦‚æœä¸ä»¥ä»»ä½•é•œåƒä¸ºåŸºç¡€ï¼Œå†™æ³•ä¸ºï¼šFROM scratchã€‚ åŒæ—¶æ„å‘³ç€æ¥ä¸‹æ¥æ‰€å†™çš„æŒ‡ä»¤å°†ä½œä¸ºé•œåƒçš„ç¬¬ä¸€å±‚å¼€å§‹ è¯­æ³•ï¼š FROM FROM : å…¶ä¸­ æ˜¯å¯é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰é€‰æ‹©ï¼Œé‚£ä¹ˆé»˜è®¤å€¼ä¸ºlatest 3.2ã€ MAINTAINERæŒ‡å®šä½œè€… è¯­æ³•ï¼š MAINTAINER 3.3ã€ LABELåŠŸèƒ½æ˜¯ä¸ºé•œåƒæŒ‡å®šæ ‡ç­¾ è¯­æ³•ï¼š LABEL &#x3D; &#x3D; &#x3D; â€¦ ä¸€ä¸ªDockerfileç§å¯ä»¥æœ‰å¤šä¸ªLABELï¼Œå¦‚ä¸‹ï¼š LABEL &quot;com.example.vendor&quot;=&quot;ACME Incorporated&quot;LABEL com.example.label-with-value=&quot;foo&quot;LABEL version=&quot;1.0&quot;LABEL description=&quot;This text illustrates \\that label-values can span multiple lines.&quot;ä½†æ˜¯å¹¶ä¸å»ºè®®è¿™æ ·å†™ï¼Œæœ€å¥½å°±å†™æˆä¸€è¡Œï¼Œå¦‚å¤ªé•¿éœ€è¦æ¢è¡Œçš„è¯åˆ™ä½¿ç”¨\\ç¬¦å·å¦‚ä¸‹ï¼šLABEL multi.label1=&quot;value1&quot; \\multi.label2=&quot;value2&quot; \\other=&quot;value3&quot;æ³¨æ„ï¼šLABELä¼šç»§æ‰¿åŸºç¡€é•œåƒç§çš„LABELï¼Œå¦‚é‡åˆ°keyç›¸åŒï¼Œåˆ™å€¼è¦†ç›– 3.4ã€ RUNåŠŸèƒ½ä¸ºè¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ RUNå‘½ä»¤æœ‰ä¸¤ç§æ ¼å¼ RUN RUN [â€œexecutableâ€, â€œparam1â€, â€œparam2â€] ç¬¬ä¸€ç§åè¾¹ç›´æ¥è·Ÿshellå‘½ä»¤ åœ¨linuxæ“ä½œç³»ç»Ÿä¸Šé»˜è®¤ &#x2F;bin&#x2F;sh -c ç¬¬äºŒç§æ˜¯ç±»ä¼¼äºå‡½æ•°è°ƒç”¨ã€‚ å¯å°†executableç†è§£æˆä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåé¢å°±æ˜¯ä¸¤ä¸ªå‚æ•°ã€‚ ä¸¤ç§å†™æ³•æ¯”å¯¹ï¼š RUN &#x2F;bin&#x2F;bash -c â€˜source $HOME&#x2F;.bashrc; echo $HOME RUN [â€œ&#x2F;bin&#x2F;bashâ€, â€œ-câ€, â€œecho helloâ€] æ³¨æ„ï¼šå¤šè¡Œå‘½ä»¤ä¸è¦å†™å¤šä¸ªRUNï¼ŒåŸå› æ˜¯Dockerfileä¸­æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šå»ºç«‹ä¸€å±‚. RUNä¹¦å†™æ—¶çš„æ¢è¡Œç¬¦æ˜¯ \\ å¤šå°‘ä¸ªRUNå°±æ„å»ºäº†å¤šå°‘å±‚é•œåƒï¼Œä¼šé€ æˆé•œåƒçš„è‡ƒè‚¿ã€å¤šå±‚ï¼Œä¸ä»…ä»…å¢åŠ äº†æ„ä»¶éƒ¨ç½²çš„æ—¶é—´ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚ 3.5ã€ ADDä¸€ä¸ªå¤åˆ¶å‘½ä»¤ï¼ŒæŠŠæ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­ å¦‚æœæŠŠè™šæ‹Ÿæœºä¸å®¹å™¨æƒ³è±¡æˆä¸¤å°linuxæœåŠ¡å™¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤å°±ç±»ä¼¼äºscpï¼Œåªæ˜¯scpéœ€è¦åŠ ç”¨æˆ·åå’Œå¯†ç çš„æƒé™éªŒè¯ï¼Œè€ŒADDä¸ç”¨ è¯­æ³•å¦‚ä¸‹ï¼šADD &lt;src&gt;... &lt;dest&gt;&lt;src&gt;å¯ä»¥æ˜¯ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶æˆ–è€…æ˜¯ä¸€ä¸ªæœ¬åœ°å‹ç¼©æ–‡ä»¶ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªurl&lt;dest&gt;è·¯å¾„çš„å¡«å†™å¯ä»¥æ˜¯å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºå·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„ADD test1.txt test1.txtADD test1.txt test1.txt.bakADD test1.txt /mydir/ADD data1 data1ADD zip.tar /myzipæœ‰å¦‚ä¸‹æ³¨æ„äº‹é¡¹ï¼š1ã€å¦‚æœæºè·¯å¾„æ˜¯ä¸ªæ–‡ä»¶ï¼Œä¸”ç›®æ ‡è·¯å¾„æ˜¯ä»¥ / ç»“å°¾ï¼Œ åˆ™dockerä¼šæŠŠç›®æ ‡è·¯å¾„å½“ä½œä¸€ä¸ªç›®å½•ï¼Œä¼šæŠŠæºæ–‡ä»¶æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ã€‚å¦‚æœç›®æ ‡è·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºç›®æ ‡è·¯å¾„ã€‚2ã€å¦‚æœæºè·¯å¾„æ˜¯ä¸ªæ–‡ä»¶ï¼Œä¸”ç›®æ ‡è·¯å¾„ä¸æ˜¯ä»¥ / ç»“å°¾ï¼Œåˆ™dockerä¼šæŠŠç›®æ ‡è·¯å¾„å½“ä½œä¸€ä¸ªæ–‡ä»¶ã€‚3ã€å¦‚æœç›®æ ‡è·¯å¾„ä¸å­˜åœ¨ï¼Œä¼šä»¥ç›®æ ‡è·¯å¾„ä¸ºååˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå†…å®¹åŒæºæ–‡ä»¶ï¼›4ã€å¦‚æœç›®æ ‡æ–‡ä»¶æ˜¯ä¸ªå­˜åœ¨çš„æ–‡ä»¶ï¼Œä¼šç”¨æºæ–‡ä»¶è¦†ç›–å®ƒï¼Œå½“ç„¶åªæ˜¯å†…å®¹è¦†ç›–ï¼Œæ–‡ä»¶åè¿˜æ˜¯ç›®æ ‡æ–‡ä»¶åã€‚5ã€å¦‚æœç›®æ ‡æ–‡ä»¶å®é™…æ˜¯ä¸ªå­˜åœ¨çš„ç›®å½•ï¼Œåˆ™ä¼šæºæ–‡ä»¶æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ã€‚ æ³¨æ„ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½æ˜¾ç¤ºçš„ä»¥ / ç»“å°¾ï¼Œä»¥é¿å…æ··æ·†ã€‚6ã€å¦‚æœæºè·¯å¾„æ˜¯ä¸ªç›®å½•ï¼Œä¸”ç›®æ ‡è·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™dockerä¼šè‡ªåŠ¨ä»¥ç›®æ ‡è·¯å¾„åˆ›å»ºä¸€ä¸ªç›®å½•ï¼ŒæŠŠæºè·¯å¾„ç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´è¿›æ¥ã€‚å¦‚æœç›®æ ‡è·¯å¾„æ˜¯ä¸ªå·²ç»å­˜åœ¨çš„ç›®å½•ï¼Œåˆ™dockerä¼šæŠŠæºè·¯å¾„ç›®å½•ä¸‹çš„æ–‡ä»¶æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ã€‚7ã€å¦‚æœæºæ–‡ä»¶æ˜¯ä¸ªå½’æ¡£æ–‡ä»¶ï¼ˆå‹ç¼©æ–‡ä»¶ï¼‰ï¼Œåˆ™dockerä¼šè‡ªåŠ¨å¸®è§£å‹ã€‚å°½é‡ä¸è¦æŠŠ&lt;scr&gt;å†™æˆä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚æœ&lt;src&gt;æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹äº†ï¼Œå¤åˆ¶æ•´ä¸ªç›®å½•çš„å†…å®¹,åŒ…æ‹¬æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ® 3.6ã€COPYå¤åˆ¶å‘½ä»¤ è¯­æ³•å¦‚ä¸‹ï¼š COPY â€¦ COPY [â€œâ€,â€¦ â€œâ€] ä¸ADDçš„åŒºåˆ«, COPYçš„åªèƒ½æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œå…¶ä»–ç”¨æ³•ä¸€è‡´ 3.7ã€ VOLUMEå¯å®ç°æŒ‚è½½åŠŸèƒ½ï¼Œå¯ä»¥å°†å†…åœ°æ–‡ä»¶å¤¹æˆ–è€…å…¶ä»–å®¹å™¨ç§å¾—æ–‡ä»¶å¤¹æŒ‚åœ¨åˆ°è¿™ä¸ªå®¹å™¨ç§ è¯­æ³•ä¸ºï¼š VOLUME [â€œ&#x2F;dataâ€] è¯´æ˜ï¼š [â€œ&#x2F;dataâ€]å¯ä»¥æ˜¯ä¸€ä¸ªJsonArray ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå€¼ã€‚æ‰€ä»¥å¦‚ä¸‹å‡ ç§å†™æ³•éƒ½æ˜¯æ­£ç¡®çš„ VOLUME [â€œ&#x2F;var&#x2F;log&#x2F;â€œ] VOLUME &#x2F;var&#x2F;log VOLUME &#x2F;var&#x2F;log &#x2F;var&#x2F;db ä¸€èˆ¬çš„ä½¿ç”¨åœºæ™¯ä¸ºéœ€è¦æŒä¹…åŒ–å­˜å‚¨æ•°æ®æ—¶, å®¹å™¨ä½¿ç”¨çš„æ˜¯AUFSï¼Œè¿™ç§æ–‡ä»¶ç³»ç»Ÿä¸èƒ½æŒä¹…åŒ–æ•°æ®ï¼Œå½“å®¹å™¨å…³é—­åï¼Œæ‰€æœ‰çš„æ›´æ”¹éƒ½ä¼šä¸¢å¤±ï¼Œæ‰€ä»¥å½“æ•°æ®éœ€è¦æŒä¹…åŒ–æ—¶ç”¨è¿™ä¸ªå‘½ä»¤ã€‚ 3.8ã€ EXPOSEåŠŸèƒ½ä¸ºæš´æ¼å®¹å™¨è¿è¡Œæ—¶çš„ç›‘å¬ç«¯å£ç»™å¤–éƒ¨ ä½†æ˜¯EXPOSEå¹¶ä¸ä¼šä½¿å®¹å™¨è®¿é—®ä¸»æœºçš„ç«¯å£ å¦‚æœæƒ³ä½¿å¾—å®¹å™¨ä¸ä¸»æœºçš„ç«¯å£æœ‰æ˜ å°„å…³ç³»ï¼Œå¿…é¡»åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™åŠ ä¸Š -På‚æ•° 3.9ã€ WORKDIRè®¾ç½®å·¥ä½œç›®å½• è¯­æ³•ï¼š WORKDIR &#x2F;usr&#x2F;bin&#x2F; 3.10ã€ ENVåŠŸèƒ½ä¸ºè®¾ç½®ç¯å¢ƒå˜é‡ è¯­æ³•æœ‰ä¸¤ç§ ENV ENV &#x3D; â€¦ ä¸¤è€…çš„åŒºåˆ«å°±æ˜¯ç¬¬ä¸€ç§æ˜¯ä¸€æ¬¡è®¾ç½®ä¸€ä¸ªï¼Œç¬¬äºŒç§æ˜¯ä¸€æ¬¡è®¾ç½®å¤šä¸ª 3.11ã€ CMDåŠŸèƒ½ä¸ºå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ è¯­æ³•æœ‰ä¸‰ç§å†™æ³• CMD [â€œexecutableâ€,â€œparam1â€,â€œparam2â€] CMD [â€œparam1â€,â€œparam2â€] CMD command param1 param2 ç¬¬ä¸‰ç§æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œå°±æ—¶shellè¿™ç§æ‰§è¡Œæ–¹å¼å’Œå†™æ³• ç¬¬ä¸€ç§å’Œç¬¬äºŒç§å…¶å®éƒ½æ˜¯å¯æ‰§è¡Œæ–‡ä»¶åŠ ä¸Šå‚æ•°çš„å½¢å¼ ä¸¾ä¾‹è¯´æ˜ä¸¤ç§å†™æ³•ï¼š CMD [ â€œshâ€, â€œ-câ€, â€œecho $HOMEâ€ CMD [ â€œechoâ€, â€œ$HOMEâ€ ] æ³¨æ„ï¼š 1ã€è¿™é‡Œè¾¹åŒ…æ‹¬å‚æ•°çš„ä¸€å®šè¦ç”¨åŒå¼•å·ï¼Œå°±æ˜¯ â€œ ä¸èƒ½æ˜¯å•å¼•å·, åŸå› æ˜¯å‚æ•°ä¼ é€’åï¼Œdockerè§£æçš„æ˜¯ä¸€ä¸ªJSON Array 2ã€ä¸è¦æŠŠRUNå’ŒCMDææ··äº†ã€‚ RUNï¼šæ˜¯æ„ä»¶å®¹å™¨æ—¶å°±è¿è¡Œçš„å‘½ä»¤ä»¥åŠæäº¤è¿è¡Œç»“æœ CMDï¼šæ˜¯å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œåœ¨æ„ä»¶æ—¶å¹¶ä¸è¿è¡Œ 3.12ã€ ENTRYPOINTåŠŸèƒ½æ˜¯å¯åŠ¨æ—¶çš„é»˜è®¤å‘½ä»¤ è¯­æ³•å¦‚ä¸‹ï¼š ENTRYPOINT [â€œexecutableâ€, â€œparam1â€, â€œparam2â€] ENTRYPOINT command param1 param2 å¦‚æœä»ä¸Šåˆ°ä¸‹çœ‹åˆ°è¿™é‡Œçš„è¯ï¼Œé‚£ä¹ˆä½ åº”è¯¥å¯¹è¿™ä¸¤ç§è¯­æ³•å¾ˆç†Ÿæ‚‰å•¦ã€‚ ç¬¬ä¸€ç§å°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶åŠ å‚æ•° ç¬¬äºŒç§å°±æ˜¯å†™shell ä¸ CMD æ¯”è¾ƒè¯´æ˜ï¼šç›¸åŒç‚¹ï¼šåªèƒ½å†™ä¸€æ¡ï¼Œå¦‚æœå†™äº†å¤šæ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€åä¸€æ¡ç”Ÿæ•ˆï¼Œå®¹å™¨å¯åŠ¨æ—¶æ‰è¿è¡Œï¼Œè¿è¡Œæ—¶æœºç›¸åŒä¸åŒç‚¹ï¼šENTRYPOINT ä¸ä¼šè¢«è¿è¡Œçš„ command è¦†ç›–ï¼Œè€Œ CMD åˆ™ä¼šè¢«è¦†ç›–å¦‚æœæˆ‘ä»¬åœ¨ Dockerfile æ—¶åŒæ—¶å†™äº† ENTRYPOINT å’Œ CMD ï¼Œå¹¶ä¸” CMD æŒ‡ä»¤ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆCMD æŒ‡å®šçš„å†…å®¹å°†ä¼šä½œä¸º ENTRYPOINT çš„å‚æ•°, å¦‚ä¸‹ï¼šFROM centosENTRYPOINT [&quot;top&quot;, &quot;-b&quot;]CMD [&quot;-c&quot;]å¦‚æœæˆ‘ä»¬åœ¨ Dockerfile ç§åŒæ—¶å†™äº† ENTRYPOINT å’Œ CMD ï¼Œå¹¶ä¸” CMD æ˜¯ä¸€ä¸ªå®Œæ•´çš„æŒ‡ä»¤ï¼Œé‚£ä¹ˆå®ƒä»¬ä¸¤ä¸ªä¼šäº’ç›¸è¦†ç›–ï¼Œè°åœ¨æœ€åè°ç”Ÿæ•ˆ, å¦‚ä¸‹ï¼šFROM centosENTRYPOINT [&quot;top&quot;, &quot;-b&quot;]CMD ls -alé‚£ä¹ˆå°†æ‰§è¡Œ ls -al , top -b ä¸ä¼šæ‰§è¡Œ å››ã€ Dockerfile æ¡ˆä¾‹1ã€åˆ›å»ºç›®å½•ï¼Œç”¨äºå­˜æ”¾ dockerfile æ‰€ä½¿ç”¨çš„æ–‡ä»¶2ã€åœ¨æ­¤ç›®å½•ä¸­åˆ›å»º dockerfile æ–‡ä»¶3ã€åœ¨æ­¤ç›®å½•ä¸­ä½¿ç”¨ docker build åˆ›å»ºé•œåƒ4ã€ä½¿ç”¨åˆ›å»ºçš„é•œåƒå¯åŠ¨å®¹å™¨å‡†å¤‡å¯åŠ¨æ–‡ä»¶ï¼švim httpd-run.sh#!/bashrm -rf /run/httpd/*exec /usr/sbin/httpd -D FOREGROUNDå‡†å¤‡ç½‘é¡µæµ‹è¯•æ–‡ä»¶vim index.htmlhello welcome to zutuanxue!!!å‡†å¤‡ dockerfile æ–‡ä»¶FROM centos:latestMAINTAINER &quot;zutuanxue admin@163.com&quot; ADD httpd-run.sh /httpd-run.shADD index.html /var/www/html/index.htmlRUN yum -y install httpd &amp;&amp; chmod -v +x /httpd-run.shEXPOSE 80WORKDIR /CMD [&quot;/bin/bash&quot;,&quot;/httpd-run.sh&quot;]åˆ›å»ºé•œåƒï¼šdocker build -t centos-httpd:v1 . -t: é•œåƒçš„åå­—åŠæ ‡ç­¾ï¼Œé€šå¸¸ name:tag æˆ–è€… name æ ¼å¼#å®šä¹‰åŸºç¡€é•œåƒ FROMFROM centos#å®šä¹‰ä½œè€… MAINTAINERMAINTAINER BaiShuming#ä¸Šä¼ æ–‡ä»¶åˆ°å®¹å™¨ COPY or ADD#COPY ä»å½“å‰ç›®å½•å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨. åªæ˜¯å•çº¯åœ°å¤åˆ¶æ–‡ä»¶. æ ¼å¼ä¸º COPY &lt;src&gt; &lt;dest&gt;ã€‚#ADD ä»å½“å‰ç›®å½•å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨. ä¼šè‡ªåŠ¨å¤„ç†ç›®å½•, å‹ç¼©åŒ…ç­‰æƒ…å†µ.æ ¼å¼ä¸º ADD &lt;src&gt; &lt;dest&gt;ã€‚ADD nginx-1.17.6.tar.gz /root#ç”Ÿæˆé•œåƒæ—¶è¿è¡Œçš„å‘½ä»¤ RUN#shell å†™æ³•RUN yum -y install pcre-devel zlib-devel openssl lsof iproute net-tools gcc make#execå†™æ³•#[&quot;å‘½ä»¤&quot;,&quot;å‘½ä»¤é€‰é¡¹&quot;,&quot;å‚æ•°&quot;]#è§£å‹å‹ç¼©æ–‡ä»¶#RUN [&quot;tar&quot;,&quot;xf&quot;,&quot;nginx-1.17.6.tar.gz&quot;]#åˆ›å»ºç®¡ç†ç”¨æˆ·wwwRUN useradd -r -s/sbin/nologin -M www#è¿›å…¥nginxæºç æ–‡ä»¶WORKDIRWORKDIR /root/nginx-1.17.6#å®‰è£…nginxRUN ./configure --prefix=/usr/local/nginx --user=www --group=www &amp;&amp; make &amp;&amp; make install#å®šä¹‰å˜é‡ ENVENV PATH /usr/local/nginx/sbin:$PATH#ä¸šåŠ¡åˆå§‹åŒ–#COPY ä»å½“å‰ç›®å½•å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨. åªæ˜¯å•çº¯åœ°å¤åˆ¶æ–‡ä»¶. æ ¼å¼ä¸º COPY &lt;src&gt; &lt;dest&gt;ã€‚COPY nginx.conf /usr/local/nginx/confCOPY index.html /usr/local/nginx/html#è¾“å‡ºç«¯å£ EXPOSEEXPOSE 80#æŒ‚è½½æœ¬åœ°ç›®å½•VOLUME#åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»æœ¬åœ°ä¸»æœºæˆ–å…¶ä»–å®¹å™¨æŒ‚è½½çš„æŒ‚è½½ç‚¹#ä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ•°æ®åº“å’Œéœ€è¦ä¿æŒåŒæ­¥çš„æ•°æ®VOLUME [&quot;/data&quot;]#å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ CMD#åªèƒ½æ‰§è¡Œä¸€ä¸ªï¼Œå¦‚æœæœ‰å¤šä¸ªï¼ŒåŒä¸€æ—¶é—´åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆCMD [&quot;nginx&quot;,&quot;-g&quot;,&quot;daemon off;&quot;]"},{"title":"07.Docker å®ä¾‹","path":"/wiki/docker/07.Dockerå®ä¾‹.html","content":"sidebar: [search, toc] #ä¾§è¾¹æ˜¾ç¤ºçš„ç»„ä»¶ ä¸€ã€ åº”ç”¨éƒ¨ç½²1.1 MySQLéƒ¨ç½² ï¼ˆ1ï¼‰æ‹‰å–mysqlé•œåƒ docker pull centos&#x2F;mysql-57-centos7 ï¼ˆ2ï¼‰åˆ›å»ºå®¹å™¨ # åˆ›å»ºmysql5.7å®¹å™¨ # docker run -di â€“name&#x3D;å®¹å™¨åå­— -p å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ -e MYSQL_ROOT_PASSWORD&#x3D;mysqlå¯†ç  å®¹å™¨åç§° docker run -di â€“name&#x3D;mysql5.7 -p 33306:3306 -e MYSQL_ROOT_PASSWORD&#x3D;123456 centos&#x2F;mysql-57-centos7 -p ä»£è¡¨ç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸º å®¿ä¸»æœºæ˜ å°„ç«¯å£:å®¹å™¨è¿è¡Œç«¯å£ -e ä»£è¡¨æ·»åŠ ç¯å¢ƒå˜é‡ MYSQL_ROOT_PASSWORD æ˜¯rootç”¨æˆ·è¿œç¨‹ç™»é™†å¯†ç  åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨ ï¼Œå¹¶ä¸”é€šè¿‡ docker ps æŸ¥çœ‹æ˜¯å¦æ˜ å°„æˆåŠŸï¼Œ ï¼ˆ3ï¼‰è¿œç¨‹ç™»å½•mysql è¿æ¥å®¿ä¸»æœºçš„IP ,æŒ‡å®šç«¯å£ä¸º33306 ä½¿ç”¨ windowsä¸Šé¢çš„å°æµ·è±šè¿›è¡Œè¿æ¥ navicat æµ‹è¯•è¿æ¥ åˆ›å»ºæ•°æ®åº“å’Œæ•°æ®åº“é‡Œé¢çš„è¡¨ CREATE DATABASE vue; USE vue; CREATE TABLE USER( id INT PRIMARY KEY AUTO_INCREMENT, age INT, username VARCHAR(20), password VARCHAR(50), email VARCHAR(50), sex VARCHAR(20) ) 1.2 Tomcatéƒ¨ç½²ï¼ˆ1ï¼‰æ‹‰å–é•œåƒ docker pull tomcat:7-jre7 ï¼ˆ2ï¼‰åˆ›å»ºå®¹å™¨ åˆ›å»ºå®¹å™¨ -pè¡¨ç¤ºåœ°å€æ˜ å°„ -v è¡¨ç¤ºç›®å½•æŒ‚è½½ # åˆ›å»ºtomcatå®¹å™¨;å¹¶æŒ‚è½½äº†webappsç›®å½• docker run -di â€“name&#x3D;mytomcat -p 9000:8080 -v &#x2F;usr&#x2F;local&#x2F;webapps:&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webapps tomcat:7-jre7 åˆ›å»ºå®Œæˆå®¹å™¨ä¹‹åï¼Œåœ¨é€šè¿‡ docker ps æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ æœ¬åœ°çš„waråŒ… ï¼Œä¸Šä¼ åˆ°dockerå®¹å™¨é‡Œé¢ ls æŸ¥çœ‹ dubboçš„war æ˜¯å¦å·²ç»ä¸Šä¼ åˆ°dockerå®¹å™¨ï¼Œä¸Šä¼ æˆåŠŸä¹‹åï¼Œåœ¨é€šè¿‡mv å‘½ä»¤ æŠŠdubboç§»åŠ¨åˆ° &#x2F;usr&#x2F;local&#x2F;webapps ç›®å½•ä¸‹é¢ï¼Œç„¶åè¯·æ±‚ http://192.168.211.144:9000/dubbo-admin-2.6.0/ è¯·æ±‚åœ°å€ï¼šhttp://192.168.211.144:9000/dubbo-admin-2.6.0/ è¯´æ˜å’±çš„tomcatå·²ç»éƒ¨ç½²æˆåŠŸ 1.3 Nginxéƒ¨ç½²ï¼ˆ1ï¼‰æ‹‰å–é•œåƒ docker pull nginx ï¼ˆ2ï¼‰åˆ›å»ºNginxå®¹å™¨ docker run -di â€“name&#x3D;mynginx -p 80:80 nginx å®‰è£…å®Œæˆä¹‹åï¼Œè¯·æ±‚nginxé¡µé¢ 1.4 Rediséƒ¨ç½²ï¼ˆ1ï¼‰æ‹‰å–é•œåƒ docker pull redis ï¼ˆ2ï¼‰åˆ›å»ºå®¹å™¨ docker run -di â€“name&#x3D;myredis -p 6379:6379 redis åˆ›å»º redis å®¹å™¨ ï¼ˆ3ï¼‰é€šè¿‡å®¢æˆ·ç«¯å·¥å…·è¿æ¥æµ‹è¯•ã€‚æˆ–è€…é€šè¿‡javaä»£ç ç”¨Jediså®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•ã€‚ äºŒã€ è¿ç§»ä¸å¤‡ä»½ å…¶ä¸­æ¶‰åŠåˆ°çš„å‘½ä»¤æœ‰ï¼š docker commit å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ docker save å°†é•œåƒå¤‡ä»½ä¸ºtaræ–‡ä»¶ docker load æ ¹æ®taræ–‡ä»¶æ¢å¤ä¸ºé•œåƒ 2.1 å®¹å™¨ä¿å­˜ä¸ºé•œåƒæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒ # ä¿å­˜nginxå®¹å™¨ä¸ºé•œåƒ docker commit å®¹å™¨åç§° é•œåƒåç§° ä¾‹å¦‚ï¼šdocker commit mynginx mynginx_i ä½¿ç”¨ docker ps -a æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨ çœ‹åˆ°æœ‰ä¸€ä¸ªmynginx å®¹å™¨ , å°†å®¹å™¨ä¿å­˜ä¸ºä¸€ä¸ªé•œåƒï¼š æŸ¥çœ‹é•œåƒæ˜¯å¦ä¿å­˜æˆåŠŸ ä½¿ç”¨åˆšåˆšä¿å­˜çš„é•œåƒ ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨ åˆ›å»ºå®Œæˆä¹‹å ï¼Œ ç›´æ¥ é€šè¿‡ docker psæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå¯ä»¥æ‰¾åˆ°åˆšåˆšåˆ›å»ºçš„å®¹å™¨mynginx2 2.2 é•œåƒå¤‡ä»½æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†é•œåƒä¿å­˜ä¸ºtar æ–‡ä»¶ # å‘½ä»¤å½¢å¼ï¼šdocker save â€“o taræ–‡ä»¶å é•œåƒå # ä¿å­˜é•œåƒä¸ºæ–‡ä»¶ -oï¼šè¡¨ç¤ºoutput è¾“å‡ºçš„æ„æ€ï¼Œåè·Ÿè¾“å‡ºè·¯å¾„+è¾“å‡ºä¿å­˜çš„æ–‡ä»¶å docker save -o mynginx.tar mynginx_i é€šè¿‡ save ä¿å­˜æˆæ–‡ä»¶ä¹‹åï¼Œåœ¨é€šè¿‡ ls å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹å½“å‰ç›®å½•æ˜¯å¦æœ‰ taræ–‡ä»¶ 2.3 é•œåƒæ¢å¤ä¸è¿ç§»é¦–å…ˆæˆ‘ä»¬å…ˆåˆ é™¤æ‰mynginx_imgé•œåƒ ç„¶åæ‰§è¡Œæ­¤å‘½ä»¤è¿›è¡Œæ¢å¤ # å‘½ä»¤å½¢å¼ï¼šdocker load -i taræ–‡ä»¶å docker load -i mynginx.tar -i è¡¨ç¤ºinputè¾“å…¥çš„æ–‡ä»¶ æ‰§è¡Œåå†æ¬¡æŸ¥çœ‹é•œåƒï¼Œå¯ä»¥çœ‹åˆ°é•œåƒå·²ç»æ¢å¤ æˆ‘ä»¬éœ€è¦ç›´æ¥æ¢å¤åˆšåˆšçš„ tar æ–‡ä»¶ ï¼Œå°±éœ€è¦å…ˆåˆ é™¤ mynginx_i é•œåƒï¼Œæ‰èƒ½æ¢å¤, ç›´æ¥åˆ é™¤ mynginx_i é•œåƒ ï¼Œå‘ç°ä¼šæŠ¥é”™ï¼Œå› ä¸ºå½“å‰é•œåƒçš„å®¹å™¨æ­£åœ¨è¿è¡Œï¼Œéœ€è¦å…ˆåœæ­¢å®¹å™¨ï¼Œåˆ é™¤å®¹å™¨ ï¼Œ åœ¨åˆ é™¤é•œåƒ åˆ é™¤å®Œæˆä¹‹å ï¼Œ åœ¨æŸ¥çœ‹é•œåƒæ˜¯å¦è¿˜å­˜åœ¨ ï¼Œå‘ç°mynginx_i é•œåƒå·²ç»è¢«åˆ é™¤ æ¢å¤é•œåƒ ** linuxç§‘å­¦å®ç°ç§‘å­¦ä¸Šç½‘**å®‰è£… Clash ä¸‹è½½å½“å‰æ“ä½œç³»ç»Ÿä¸ CPU æ¶æ„å¯¹åº”çš„åŒ…æ–‡ä»¶ï¼Œæˆ‘è¿™å„¿æ˜¯ X86_64 å¹³å°ä¸‹ CentOS7 æ‰€ä»¥å¯¹åº”çš„ä½¿ç”¨ clash-linux-amd64-v1.6.5.gz åŒ…å³å¯ wget -O clash.gz https://github.com/Dreamacro/clash/releases/download/v1.6.5/clash-linux-amd64-v1.6.5.gz ä¸‹è½½å¥½åè§£å‹å®‰è£…åŒ…ä¸­ clash åˆ° /usr/local/bin/ ç›®å½•ä¸‹ï¼Œå¹¶åˆ é™¤å‹ç¼©åŒ…æ–‡ä»¶ gzip -dc clash.gz &gt; /usr/local/bin/clashchmod +x /usr/local/bin/clashrm -f clash.gz åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•ï¼Œå¹¶ä¸‹è½½ MMDB æ–‡ä»¶ mkdir /etc/clashwget -O /etc/clash/Country.mmdb https://github.com/Dreamacro/maxmind-geoip/releases/download/20220812/Country.mmdb åˆ›å»º systemd è„šæœ¬ï¼Œè„šæœ¬æ–‡ä»¶è·¯å¾„ä¸º /etc/systemd/system/clash.serviceï¼Œå†…å®¹å¦‚ä¸‹ï¼š [Unit]Description=clash daemon[Service]Type=simpleUser=rootExecStart=/usr/local/bin/clash -d /etc/clash/Restart=on-failure[Install]WantedBy=multi-user.target é‡è½½ systemctl daemon systemctl daemon-reload é…ç½®ä»£ç†ä¸Šç½‘ å¯¼å…¥å·²æœ‰çš„ç§‘å­¦ä¸Šç½‘è®¢é˜…é“¾æ¥ wget -O /etc/clash/config.yaml [ä½ çš„è®¢é˜…é“¾æ¥] è®¾ç½®ç³»ç»Ÿä»£ç†ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶ /etc/profile.d/proxy.sh å¹¶åœ¨å…¶ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š export http_proxy=&quot;127.0.0.1:7890&quot;export https_proxy=&quot;127.0.0.1:7890&quot;export no_proxy=&quot;localhost, 127.0.0.1&quot; é‡è½½ /etc/profile é…ç½® source /etc/profile å¯åŠ¨ clash æœåŠ¡ï¼Œå¹¶è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨å¯ # curl google.com&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;&lt;TITLE&gt;301 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;301 Moved&lt;/H1&gt;The document has moved&lt;A HREF=&quot;http://www.google.com/&quot;&gt;here&lt;/A&gt;.&lt;/BODY&gt;&lt;/HTML&gt; æµ‹è¯• goolge.com è®¿é—® # curl google.com&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;&lt;TITLE&gt;301 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;301 Moved&lt;/H1&gt;The document has moved&lt;A HREF=&quot;http://www.google.com/&quot;&gt;here&lt;/A&gt;.&lt;/BODY&gt;&lt;/HTML&gt;"},{"title":"08.Docker Composeå®¹å™¨ç¼–æ’","path":"/wiki/docker/08.Docker Composeå®¹å™¨ç¼–æ’.html","content":"ä¸€ã€ Docker-Compose1.1ã€ ä»€ä¹ˆæ˜¯Docker ComposeCompose é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç° Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ï¼Œå¼€æºä»£ç åœ¨ https://github.com/docker/compose ä¸Š æˆ‘ä»¬çŸ¥é“ä½¿ç”¨ Dockerfile æ¨¡æ¿æ–‡ä»¶å¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ï¼Œå…¶å®åœ¨å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®Œæˆçš„æŸé¡¹ä»»åŠ¡æƒ…å†µï¼Œä¾‹å¦‚å·¥ä½œä¸­çš„ web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€ä¼šåœ¨åç«¯åŠ ä¸Šæ•°æ®åº“å®¹å™¨ï¼Œç”šè‡³ä¼šæœ‰è´Ÿè´£å‡è¡¡å™¨ï¼Œæ¯”å¦‚ LNMP æœåŠ¡ Compose å°±æ˜¯æ¥åšè¿™ä¸ªäº‹æƒ…çš„ï¼Œå®ƒå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ docker-compose.yml æ¨¡æ¿æ–‡ä»¶ YAMLæ ¼å¼ æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›® project Compose ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š æœåŠ¡ service :ä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹é¡¹ç›® project :ç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨docker-compose.ymlä¸­å®šä¹‰ 1.2ã€ å®‰è£…# docker-composeç‰ˆæœ¬é€‰æ‹©:https://github.com/docker/compose/releases# curl -L https://github.com/docker/compose/releases/download/1.25.4/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose# chmod +x /usr/local/bin/docker-compose 1.3ã€ å‘½ä»¤Compose å¤§éƒ¨åˆ†å‘½ä»¤çš„å¯¹è±¡å³å¯ä»¥æ˜¯é¡¹ç›®çš„æœ¬èº«ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‡å®šä¸ºé¡¹ç›®ä¸­çš„æœåŠ¡æˆ–è€…å®¹å™¨æ‰§è¡Œdocker-compose [COMMAND] --help æˆ–è€…docker-compose help [COMMAND]å¯ä»¥æŸ¥çœ‹å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯å…·ä½“çš„ä½¿ç”¨æ ¼å¼docker-compose [-f=&lt;arg&gt;...] [options] [COMMAND] [ARGS]å‚æ•°é€‰é¡¹-f,--file fileæŒ‡å®šæ¨¡æ¿æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯docker-compose.ymlæ¨¡æ¿æ–‡ä»¶,å¯ä»¥å¤šæ¬¡æŒ‡å®š-p,--project-name nameæŒ‡å®šé¡¹ç›®åç§°ï¼Œé»˜è®¤ä½¿ç”¨æ‰€åœ¨ç›®å½•åç§°ä½œä¸ºé¡¹ç›®åç§°--x-networking ä½¿ç”¨Dockerçš„åç«¯å¯æ’æ‹”ç½‘ç»œç‰¹æ€§--x-networking-driver driveræŒ‡å®šç½‘ç»œçš„åç«¯é©±åŠ¨ï¼Œé»˜è®¤ä½¿ç”¨bridge--verbose è¾“å…¥æ›´å¤šçš„è°ƒè¯•ä¿¡æ¯-v,--version è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯Composeæ‰€æ”¯æŒçš„å‘½ä»¤ï¼šbuild æ„å»ºé¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨ bundle ä»Composeæ–‡ä»¶ç”Ÿæˆåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåŒ… config éªŒè¯å¹¶æŸ¥çœ‹Composeæ–‡ä»¶ create ä¸ºæœåŠ¡åˆ›å»ºå®¹å™¨ down åœæ­¢å®¹å™¨å¹¶åˆ é™¤ç”±å…¶åˆ›å»ºçš„å®¹å™¨ï¼Œç½‘ç»œï¼Œå·å’Œå›¾åƒup events ä¸ºé¡¹ç›®ä¸­çš„æ¯ä¸ªå®¹å™¨æµå¼ä¼ è¾“å®¹å™¨äº‹ä»¶ exec è¿™ç›¸å½“äºdocker execã€‚ help è·å¾—ä¸€ä¸ªå‘½ä»¤çš„å¸®åŠ© kill é€šè¿‡å‘é€SIGKILLä¿¡å·æ¥å¼ºåˆ¶åœæ­¢æœåŠ¡å®¹å™¨ logs æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡º pause æš‚åœä¸€ä¸ªå®¹å™¨ port æ‰“å°æŸä¸ªå®¹å™¨ç«¯å£æ‰€æ˜ å°„çš„å…¬å…±ç«¯å£ ps åˆ—å‡ºé¡¹ç›®ä¸­ç›®å‰æ‰€æœ‰çš„å®¹å™¨ pull æ‹‰å–æœåŠ¡ä¾èµ–é•œåƒ push æ¨é€æœåŠ¡é•œåƒ restart é‡å¯é¡¹ç›®ä¸­çš„æœåŠ¡ rm åˆ é™¤æ‰€æœ‰åœæ­¢çŠ¶æ€çš„æœåŠ¡å®¹å™¨ run åœ¨æŒ‡å®šæœåŠ¡ä¸Šæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ scale è®¾ç½®æŒ‡å®šæœåŠ¡æ‰§è¡Œçš„å®¹å™¨ä¸ªæ•° start å¯åŠ¨å·²å­˜åœ¨çš„æœåŠ¡å®¹å™¨ stop åœæ­¢å·²å­˜åœ¨çš„æœåŠ¡å®¹å™¨ top æ˜¾ç¤ºå®¹å™¨æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ unpause æ¢å¤å¤„äºæš‚åœçŠ¶æ€çš„å®¹å™¨ up è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æ„å»ºé•œåƒã€åˆ›å»ºæœåŠ¡ã€å¯åŠ¨æœåŠ¡å¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œ version è¾“å‡ºç‰ˆæœ¬ 1.4ã€æ¨¡æ¿æ–‡ä»¶æ’ç‰ˆé—®é¢˜ï¼Œè¯·çœ‹å•ç‹¬çš„æ–‡ä»¶ã€‚å®˜ç½‘é“¾æ¥ï¼šhttps://docs.docker.com/compose/compose-file/#compose-file-structure-and-examples 1.5ã€ ç¤ºä¾‹ä¸¾ä¸ªç®€å•çš„ä¾‹å­æ¥å…·æœ‰çš„è¯´æ˜ä¸€ä¸‹ Compose çš„ä½¿ç”¨1. åˆ›å»ºä¸€ä¸ªç›®å½•(é‡Œé¢åŒ…å«éœ€è¦çš„æ–‡ä»¶)[root@zutuanxue] mkdir compose-py2. åˆ›å»ºä¸€ä¸ª Python åº”ç”¨ï¼Œ ä½¿ç”¨ Flask ï¼Œå°†æ•°å€¼è®°å…¥ Redis[root@zutuanxue compose-py] cat app.pyimport time import redisfrom flask import Flask app = Flask(__name__)cache = redis.Redis(host=&#x27;redis&#x27;, port=6379) def get_hit_count(): retries = 5 while True: try: return cache.incr(&#x27;hits&#x27;) except redis.exceptions.ConnectionError as exc: if retries == 0: raise exc retries -= 1 time.sleep(0.5) @app.route(&#x27;/&#x27;)def hello(): count = get_hit_count() return &#x27;Hello World! I have been seen &#123;&#125; times. &#x27;.format(count) if __name__ == &quot;__main__&quot;: app.run(host=&quot;0.0.0.0&quot;, debug=True)3. åˆ›å»º requirements.txt æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯éœ€è¦å®‰è£…çš„ Python åŒ…[root@zutuanxue compose-py] cat requirements.txtflaskredis4. åˆ›å»º Dockerfile æ–‡ä»¶[root@zutuanxue compose-py] cat DockerfileFROM pythonADD . /codeWORKDIR /codeRUN pip install -r requirements.txtCMD [&quot;python&quot;, &quot;app.py&quot;] # è¿™å‘Šè¯‰Dockerï¼š ä» Python å¼€å§‹æ„å»ºé•œåƒ å°†å½“å‰ç›®å½• . æ·»åŠ åˆ° /code é•œåƒä¸­çš„è·¯å¾„ å°†å·¥ä½œç›®å½•è®¾ç½®ä¸º /code å®‰è£… Python ä¾èµ–é¡¹ å°†å®¹å™¨çš„é»˜è®¤å‘½ä»¤è®¾ç½®ä¸º python app.py 5. åˆ›å»º docker-compose.yml æ–‡ä»¶[root@zutuanxue compose-py] cat docker-compose.ymlversion: &#x27;3&#x27;services: web: build: . ports: - &quot;5000:5000&quot; volumes: - .:/code redis: image: &quot;redis&quot; æ­¤ Compose æ–‡ä»¶å®šä¹‰äº†ä¸¤ä¸ªæœåŠ¡ï¼Œweb å’Œ redis è¯¥webæœåŠ¡ï¼š\tä½¿ç”¨ä» Dockerfile å½“å‰ç›®å½•ä¸­æ„å»ºçš„é•œåƒ\tå°†å®¹å™¨ä¸Šçš„å…¬å¼€ç«¯å£ 5000 è½¬å‘åˆ°ä¸»æœºä¸Šçš„ç«¯å£ 5000 æˆ‘ä»¬ä½¿ç”¨ Flask Web æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£ 5000\tè¯¥ redis æœåŠ¡ä½¿ç”¨ä» Docker Hub ä¸­æå–çš„å…¬å…± Redis æ˜ åƒ\t6. ä½¿ç”¨ Compose æ„å»ºå¹¶è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åº[root@zutuanxue compose-py] docker-compose up7. æµ‹è¯•è®¿é—®ï¼Œåœ¨æµè§ˆå™¨è®¿é—® IP:5000 æ¯åˆ·æ–°ä¸€æ¬¡å°±ä¼šåŠ ä¸€"},{"title":"ç§æœ‰ä»“åº“registry","path":"/wiki/docker/Dockeré•œåƒç§æœ‰ä»“åº“.html","content":"åœ¨Dockerä¸­ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ docker pull xxx çš„æ—¶å€™ ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä» hub.docker.com è¿™ä¸ªåœ°å€å»æŸ¥æ‰¾ï¼Œè¿™å°±æ˜¯ Docker å…¬å¸ä¸ºæˆ‘ä»¬æä¾›çš„å…¬å…±ä»“åº“ã€‚åœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æŠŠä¼ä¸šé¡¹ç›® push åˆ°å…¬æœ‰ä»“åº“è¿›è¡Œç®¡ç†ã€‚æ‰€ä»¥ä¸ºäº†æ›´å¥½çš„ç®¡ç†é•œåƒï¼ŒDocker ä¸ä»…æä¾›äº†ä¸€ä¸ªä¸­å¤®ä»“åº“ï¼ŒåŒæ—¶ä¹Ÿå…è®¸æˆ‘ä»¬æ­å»ºæœ¬åœ°ç§æœ‰ä»“åº“ã€‚ dockerå®¹å™¨é•œåƒä»“åº“åˆ†ç±»ï¼š å…¬ç½‘ä»“åº“ï¼šdocker hub ç§ç½‘ä»“åº“: registryã€harbor ä¸€ã€registryé•œåƒä»“åº“1.1ã€ registry ä»“åº“æ­å»ºæ­å»ºæ­¥éª¤ æ‹‰å– registry å®¹å™¨é•œåƒ åˆ›å»º registry ä»“åº“å®¹å™¨ æµ‹è¯•å®¹å™¨åº”ç”¨ æ­å»ºè¿‡ç¨‹aã€æ‹‰å–registryå®¹å™¨é•œåƒ docker pull registry bã€åˆ›å»ºregistryä»“åº“å®¹å™¨ 1ã€åˆ›å»ºæŒä¹…åŒ–å­˜å‚¨ï¼Œå°†å®¹å™¨é•œåƒå­˜å‚¨ç›®å½•/var/lib/registryæŒ‚è½½åˆ°æœ¬åœ°/opt/myregistryä¸‹ï¼šmkdir /opt/myregistry2ã€åˆ›å»º registry å®¹å™¨ï¼šdocker run -d -p 5000:5000 -v /opt/myregistry:/var/lib/registry --restart=always registry:latest3ã€æŸ¥çœ‹å®¹å™¨æ˜¯å¦è¿è¡Œdocker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES6b20b55fe6f8 registry:latest &quot;/entrypoint.sh /etcâ€¦&quot; 2 minutes ago Up 2 minutes 0.0.0.0:5000-&gt;5000/tcp busy_mclean cã€æµ‹è¯•å®¹å™¨åº”ç”¨ [root@zutuanxue_manage01 ~]# curl http://192.168.1.150:5000/v2/_catalog&#123;&quot;repositories&quot;:[]&#125;æ˜¾ç¤ºä»“åº“ä¸­æ²¡æœ‰ä»»ä½•é•œåƒ 1.2ã€registryä»“åº“åº”ç”¨-ä¸Šä¼ é•œåƒä¸Šä¼ é•œåƒæ­¥éª¤ è®¾ç½®dockerä»“åº“ä¸ºregistryæœ¬åœ°ä»“åº“ ç»™éœ€è¦å­˜å‚¨çš„é•œåƒæ‰“tag ä¸Šä¼ é•œåƒåˆ°registryä»“åº“ æ¼”ç¤ºæ¡ˆä¾‹ å°†baishuming2020&#x2F;centos_nginx:latestä¸Šä¼ åˆ°ä»“åº“ æŸ¥çœ‹å½“å‰æœ¬åœ°é•œåƒ [root@zutuanxue_manage01 ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEbaishuming2020/centos_nginx latest bcd9f28f6126 33 minutes ago 447MBbaishuming2020/centos_8_base latest 3e9f682f8459 47 minutes ago 200MBcentos latest 0f3e07c0138f 6 weeks ago 220MBregistry latest f32a97de94e1 8 months ago 25.8MB aã€è®¾ç½®dockerä»“åº“ä¸ºregistryæœ¬åœ°ä»“åº“ #1ã€ä¿®æ”¹dockerè¿›ç¨‹å¯åŠ¨æ–‡ä»¶ï¼Œä¿®æ”¹å…¶å¯åŠ¨æ–¹å¼ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©é€šè¿‡dockeré…ç½®æ–‡ä»¶å¯åŠ¨[root@zutuanxue_manage01 ~]# sed -i.bak &#x27;/^ExecStart=/c\\ExecStart=\\/usr\\/bin\\/dockerd&#x27; /usr/lib/systemd/system/docker.service#2ã€è®¾ç½®docker å®ˆæŠ¤è¿›ç¨‹çš„é…ç½®æ–‡ä»¶ /etc/docker/daemon.json,é»˜è®¤æ²¡æœ‰è¯¥æ–‡ä»¶[root@zutuanxue_manage01 ~]# cat /etc/docker/daemon.json &#123; &quot;insecure-registries&quot;: [&quot;http://192.168.1.150:5000&quot;]&#125;insecure-registries æŒ‡å®šéå®‰å…¨çš„ä»“åº“åœ°å€ï¼Œå¤šä¸ªç”¨é€—å·éš”å¼€#3ã€é‡å¯dockerç”Ÿæ•ˆé…ç½®æ–‡ä»¶[root@zutuanxue_manage01 ~]# systemctl daemon-reload[root@zutuanxue_manage01 ~]# systemctl restart docker bã€ç»™éœ€è¦å­˜å‚¨çš„é•œåƒæ‰“tag [root@zutuanxue_manage01 ~]# docker tag baishuming2020/centos_nginx:latest 192.168.1.150:5000/centos_nginx:v1[root@zutuanxue_manage01 ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZE192.168.98.240:5000/centos_nginx v1 bcd9f28f6126 45 minutes ago 447MBbaishuming2020/centos_nginx latest bcd9f28f6126 45 minutes ago 447MBbaishuming2020/centos_8_base latest 3e9f682f8459 59 minutes ago 200MBcentos latest 0f3e07c0138f 6 weeks ago 220MBregistry latest f32a97de94e1 8 months ago 25.8MB cã€ä¸Šä¼ é•œåƒåˆ°registryä»“åº“ #1ã€ä¸Šä¼ é•œåƒ[root@zutuanxue_manage01 ~]# docker push 192.168.98.240:5000/centos_nginx:v1The push refers to repository [192.168.98.240:5000/centos_nginx]1da799aaf1ec: Pushed f598357997c6: Pushed 630012d2d35b: Pushed 4dcde7ab808a: Pushed 64dc1b92ebb6: Pushed 7db2133dafb9: Pushed fd05189e6e81: Pushed ee645629aa71: Pushed v1: digest: sha256:507a5ad9dd5771cdf461a6fa24c3fff6ea9eabd6945abf03e9264d3130fe816b size: 1996#2ã€æŸ¥çœ‹ä¸Šä¼ [root@zutuanxue_manage01 ~]# curl http://192.168.98.240:5000/v2/_catalog&#123;&quot;repositories&quot;:[&quot;centos_nginx&quot;]&#125;#æŸ¥çœ‹å­˜å‚¨æ–‡ä»¶å¤¹[root@zutuanxue_manage01 ~]# ls /opt/docker_repos/docker/registry/v2/repositories/centos_nginx/_layers _manifests _uploads 1.3ã€ registryä»“åº“åº”ç”¨-å®¢æˆ·ç«¯ä¸‹è½½é•œåƒ è®¾ç½®å®¢æˆ·ç«¯dockerä»“åº“ä¸ºregistryä»“åº“ æ‹‰å–é•œåƒåˆ°æœ¬åœ° æ¼”ç¤ºæ¡ˆä¾‹ è¦æ±‚192.168.98.241[hostname:zutuanxue_node1]æœºå™¨çš„å®¹å™¨å¯ä»¥ä¸‹è½½registryä»“åº“ä¸­çš„é•œåƒ aã€è®¾ç½®192.168.1.151[hostname:zutuanxue_node1]æœºå™¨çš„dockerä»“åº“ä¸ºregistryä»“åº“ #1ã€è®¾ç½®dockerå¯åŠ¨æ–‡ä»¶[root@zutuanxue_node1 ~]# sed -i.bak &#x27;/^ExecStart=/c\\ExecStart=\\/usr\\/bin\\/dockerd&#x27; /usr/lib/systemd/system/docker.service#2ã€è®¾ç½®dockeré…ç½®æ–‡ä»¶[root@zutuanxue_node1 ~]# cat /etc/docker/daemon.json &#123; &quot;insecure-registries&quot;: [&quot;http://192.168.1.150:5000&quot;]&#125; bã€ä¸‹è½½é•œåƒ192.168.1.151[hostname:zutuanxue_node1]æœºå™¨ä¸Šçš„dockerå¯ä»¥æ‹‰å–registryä»“åº“ä¸­çš„192.168.1.150:5000&#x2F;centos_nginx:v1å®¹å™¨é•œåƒ [root@zutuanxue_node1 ~]# docker pull 192.168.1.150:5000/centos_nginx:v1v1: Pulling from centos_nginxdcd04d454f16: Pull complete 5cb2e05aa6e1: Pull complete 870634eb98b4: Pull complete 0fae9697ee4b: Pull complete 18ad57cfcecb: Pull complete 64dd6f0d85c1: Pull complete 7178b0b4388e: Pull complete 34de8795cd41: Pull complete Digest: sha256:507a5ad9dd5771cdf461a6fa24c3fff6ea9eabd6945abf03e9264d3130fe816bStatus: Downloaded newer image for 192.168.98.240:5000/centos_nginx:v1192.168.98.240:5000/centos_nginx:v1#éªŒè¯ä¸‹è½½[root@zutuanxue_node1 ~]# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZE192.168.1.150:5000/centos_nginx v1 bcd9f28f6126 4 hours ago 447MB 1.4ã€registryå¸¦basicè®¤è¯çš„ä»“åº“å®ç°æ­¥éª¤ å®‰è£…éœ€è¦è®¤è¯çš„åŒ… åˆ›å»ºå­˜æ”¾è®¤è¯ä¿¡æ¯çš„æ–‡ä»¶ åˆ›å»ºè®¤è¯ä¿¡æ¯ åˆ›å»ºå¸¦è®¤è¯çš„registryå®¹å™¨ æŒ‡å®šä»“åº“åœ°å€ ç™»å½•è®¤è¯ å®ç°è¿‡ç¨‹aã€å®‰è£…éœ€è¦è®¤è¯çš„åŒ… yum -y install httpd-tools bã€åˆ›å»ºå­˜æ”¾è®¤è¯ä¿¡æ¯çš„æ–‡ä»¶ mkdir -p /opt/registry-var/auth cã€åˆ›å»ºè®¤è¯ä¿¡æ¯ htpasswd -Bbn zutuanxue 123456 &gt;&gt; /opt/registry-var/auth/htpasswd dã€åˆ›å»ºå¸¦è®¤è¯çš„registryå®¹å™¨ docker run -d -p 10000:5000 --restart=always --name registry \\-v /opt/registry-var/auth:/auth \\-v /opt/myregistry:/var/lib/registry \\-e &quot;REGISTRY_AUTH=htpasswd&quot; \\-e &quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot; \\-e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \\registry:latest eã€æŒ‡å®šä»“åº“åœ°å€ cat /etc/docker/daemon.json &#123; &quot;insecure-registries&quot;: [&quot;http://192.168.1.150:5000&quot;,&quot;http://192.168.1.150:10000&quot;]&#125; fã€ç™»å½•è®¤è¯ docker login 192.168.1.150:10000Usernameï¼šzutuanxuePasswordï¼š123456 äºŒã€ harboré•œåƒä»“åº“Harborç¦»çº¿å®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼šhttps://github.com/goharbor/harbor docker-composeç‰ˆæœ¬é€‰æ‹©:https://github.com/docker/compose/releases 2.1 harborä¸‹è½½[root@centos8_manage01 ~]# wget https://storage.googleapis.com/harbor-releases/release-1.9.0/harbor-offline-installer-v1.9.2-rc1.tgz 2.2 docker-composeå®‰è£…å®¹å™¨ç¼–æ’å·¥å…·ï¼Œæ‰§è¡Œ.&#x2F;install.shæ—¶éœ€è¦ã€‚å¦‚æœä¸å®‰è£…ï¼Œä¸€ä¼šé‡å¯dockeræœåŠ¡ï¼Œç›¸å…³çš„harborå®¹å™¨ä¼šæ­»æ‰ï¼Œå®‰è£…åå°±ä¼šè¢«éšç€dockeré‡å¯ curl -L https://github.com/docker/compose/releases/download/1.25.4/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-composechmod +x /usr/local/bin/docker-compose 2.3 harborå®‰è£…[root@centos8_manage01 ~]# tar xf harbor-offline-installer-v1.9.2-rc1.tgz [root@centos8_manage01 ~]# mv harbor /opt/[root@centos8_manage01 ~]# /opt/harbor/prepare prepare base dir is set to /opt/harborUnable to find image &#x27;goharbor/prepare:v1.9.2&#x27; locallyv1.9.2: Pulling from goharbor/prepareb950b5dd94ab: Pull complete cc7bb94ca291: Pull complete d6a642502e65: Pull complete 21510274066b: Pull complete 04998692a2c0: Pull complete ae8f4647fe53: Pull complete cee24c721c12: Pull complete Digest: sha256:a647780bcd7f5fdcc9696332c9bca90f290912ecb41bd15c4c1a516450597bc2Status: Downloaded newer image for goharbor/prepare:v1.9.2Generated configuration file: /config/log/logrotate.confGenerated configuration file: /config/log/rsyslog_docker.confGenerated configuration file: /config/nginx/nginx.confGenerated configuration file: /config/core/envGenerated configuration file: /config/core/app.confGenerated configuration file: /config/registry/config.ymlGenerated configuration file: /config/registryctl/envGenerated configuration file: /config/db/envGenerated configuration file: /config/jobservice/envGenerated configuration file: /config/jobservice/config.ymlGenerated and saved secret to file: /secret/keys/secretkeyGenerated certificate, key file: /secret/core/private_key.pem, cert file: /secret/registry/root.crtGenerated configuration file: /compose_location/docker-compose.ymlClean up the input dirä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ä¸»æœºåä¸ºæœ¬æœºåŸŸåæˆ–IP[root@centos8_manage01 ~]# grep &quot;^hostname&quot; /opt/harbor/harbor.yml hostname: 192.168.98.240[root@centos8_manage01 ~]# /opt/harbor/install.sh [Step 0]: checking installation environment ...Note: docker version: 19.03.1/usr/lib/python2.7/site-packages/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.24.3) or chardet (2.2.1) doesn&#x27;t match a supported version! RequestsDependencyWarning)Note: docker-compose version: 1.24.1[Step 1]: loading Harbor images ...6ef530defbe4: Loading layer 63.49MB/63.49MB55872518448e: Loading layer 54.42MB/54.42MB070787ce276e: Loading layer 5.632kB/5.632kB1ddc8ebef7e9: Loading layer 2.048kB/2.048kB94ec70036213: Loading layer 2.56kB/2.56kB87f88832870d: Loading layer 2.56kB/2.56kB208968317bf9: Loading layer 2.56kB/2.56kBab6259c81a01: Loading layer 10.24kB/10.24kBLoaded image: goharbor/harbor-db:v1.9.292e51ca4c459: Loading layer 9.005MB/9.005MB9e12eb4a5a82: Loading layer 3.072kB/3.072kB913c064dae30: Loading layer 21.76MB/21.76MBb28cae8255d8: Loading layer 3.072kB/3.072kB890572f32fd2: Loading layer 8.661MB/8.661MB6f00be7ade9a: Loading layer 30.42MB/30.42MBLoaded image: goharbor/harbor-registryctl:v1.9.251bada9a03ba: Loading layer 78.25MB/78.25MBbdd423614a28: Loading layer 3.072kB/3.072kBe44c809a7328: Loading layer 59.9kB/59.9kB07d91c85aa68: Loading layer 61.95kB/61.95kBLoaded image: goharbor/redis-photon:v1.9.2e0a372c4d5d3: Loading layer 10.84MB/10.84MBLoaded image: goharbor/nginx-photon:v1.9.299f324455426: Loading layer 115.7MB/115.7MBdbde533bd1f2: Loading layer 12.29MB/12.29MB32adabde1b24: Loading layer 2.048kB/2.048kBcdedbb7b738d: Loading layer 48.13kB/48.13kB60eb6ca8f5f9: Loading layer 3.072kB/3.072kB05fadada21a7: Loading layer 12.34MB/12.34MBLoaded image: goharbor/clair-photon:v2.0.9-v1.9.2fbe05936a49e: Loading layer 12.77MB/12.77MB8dc691e9365f: Loading layer 55.38MB/55.38MBc83233ecc176: Loading layer 5.632kB/5.632kBde775c6f50f5: Loading layer 36.35kB/36.35kB525709237f01: Loading layer 55.38MB/55.38MBLoaded image: goharbor/harbor-core:v1.9.2734abd864add: Loading layer 12.77MB/12.77MB74033d37bf08: Loading layer 48.13MB/48.13MBLoaded image: goharbor/harbor-jobservice:v1.9.26677f529d41e: Loading layer 9.005MB/9.005MB019a95ff5e80: Loading layer 3.072kB/3.072kB4b3792cedc69: Loading layer 2.56kB/2.56kB274f5851694b: Loading layer 21.76MB/21.76MB68e937b2af9e: Loading layer 21.76MB/21.76MBLoaded image: goharbor/registry-photon:v2.7.1-patch-2819-2553-v1.9.2Loaded image: goharbor/prepare:v1.9.20566b1894f2e: Loading layer 9.009MB/9.009MBb99c86e48679: Loading layer 44.41MB/44.41MB283ba1db5c52: Loading layer 2.048kB/2.048kB701de676a8f6: Loading layer 3.072kB/3.072kBc923d0b0255c: Loading layer 44.41MB/44.41MBLoaded image: goharbor/chartmuseum-photon:v0.9.0-v1.9.2ef4a961407c7: Loading layer 9.004MB/9.004MB7cf94e5011b7: Loading layer 6.239MB/6.239MB5c984b34ecb2: Loading layer 16.4MB/16.4MBf06fb877e324: Loading layer 29.21MB/29.21MBae07ec384ebd: Loading layer 22.02kB/22.02kB864698f2b94d: Loading layer 51.85MB/51.85MBLoaded image: goharbor/notary-server-photon:v0.6.1-v1.9.2c953b6400a8b: Loading layer 50.3MB/50.3MB2ee784d17d84: Loading layer 3.584kB/3.584kBc71f6b26fd01: Loading layer 3.072kB/3.072kBbb6389098841: Loading layer 2.56kB/2.56kBb63da553de9f: Loading layer 3.072kB/3.072kB62a479d14974: Loading layer 3.584kB/3.584kBaa3fee5917b8: Loading layer 12.29kB/12.29kBLoaded image: goharbor/harbor-log:v1.9.2691af8d2c981: Loading layer 14.9MB/14.9MB7878347ee491: Loading layer 29.21MB/29.21MB433f16e7c539: Loading layer 22.02kB/22.02kBad0202306aed: Loading layer 50.34MB/50.34MBLoaded image: goharbor/notary-signer-photon:v0.6.1-v1.9.262247cb7cb19: Loading layer 337.8MB/337.8MBd8b748aaf7dd: Loading layer 119.8kB/119.8kBLoaded image: goharbor/harbor-migrator:v1.9.2d9705202f79f: Loading layer 7.036MB/7.036MB3fdb77b47894: Loading layer 196.6kB/196.6kB8901bb1db41e: Loading layer 172kB/172kBbaf9307d1844: Loading layer 15.36kB/15.36kB1dcfba9b1bd1: Loading layer 3.584kB/3.584kB90a90fef2f80: Loading layer 10.84MB/10.84MBLoaded image: goharbor/harbor-portal:v1.9.2[Step 2]: preparing environment ...prepare base dir is set to /opt/harborClearing the configuration file: /config/log/logrotate.confClearing the configuration file: /config/log/rsyslog_docker.confClearing the configuration file: /config/nginx/nginx.confClearing the configuration file: /config/core/envClearing the configuration file: /config/core/app.confClearing the configuration file: /config/registry/config.ymlClearing the configuration file: /config/registryctl/envClearing the configuration file: /config/registryctl/config.ymlClearing the configuration file: /config/db/envClearing the configuration file: /config/jobservice/envClearing the configuration file: /config/jobservice/config.ymlGenerated configuration file: /config/log/logrotate.confGenerated configuration file: /config/log/rsyslog_docker.confGenerated configuration file: /config/nginx/nginx.confGenerated configuration file: /config/core/envGenerated configuration file: /config/core/app.confGenerated configuration file: /config/registry/config.ymlGenerated configuration file: /config/registryctl/envGenerated configuration file: /config/db/envGenerated configuration file: /config/jobservice/envGenerated configuration file: /config/jobservice/config.ymlloaded secret from file: /secret/keys/secretkeyGenerated configuration file: /compose_location/docker-compose.ymlClean up the input dir/usr/lib/python2.7/site-packages/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.24.3) or chardet (2.2.1) doesn&#x27;t match a supported version! RequestsDependencyWarning)[Step 3]: starting Harbor .../usr/lib/python2.7/site-packages/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.24.3) or chardet (2.2.1) doesn&#x27;t match a supported version! RequestsDependencyWarning)Creating network &quot;harbor_harbor&quot; with the default driverCreating harbor-log ... doneCreating harbor-portal ... doneCreating redis ... doneCreating registryctl ... doneCreating registry ... doneCreating harbor-db ... doneCreating harbor-core ... doneCreating nginx ... doneCreating harbor-jobservice ... doneâœ” ----Harbor has been installed and started successfully.----Now you should be able to visit the admin portal at http://192.168.98.240. For more details, please visit https://github.com/goharbor/harbor . 2.4 dockerè®¾ç½®ä»“åº“ä¸ºharbor1ã€dockeræœåŠ¡å¯åŠ¨æ–‡ä»¶#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock æ³¨é‡Šæˆ–è€…å°†[-H fd:// --containerd=/run/containerd/containerd.sock]åˆ é™¤ExecStart=/usr/bin/dockerd è¿™æ ·åšçš„ç›®çš„æ˜¯è®©daemon.jsonç®¡ç†dockerè¿›ç¨‹2ã€åˆ›å»ºdockerå®ˆæŠ¤è¿›ç¨‹é…ç½®æ–‡ä»¶[root@centos8_manage01 harbor]# cat /etc/docker/daemon.json &#123; &quot;insecure-registries&quot;: [&quot;http://192.168.98.240&quot;]&#125; 2.5 é•œåƒä¸Šä¼ åˆ°harbor#ç™»é™†harbor[root@centos8_manage01 harbor]# docker login http://192.168.98.240 -u admin -p Harbor12345WARNING! Using --password via the CLI is insecure. Use --password-stdin.WARNING! Your password will be stored unencrypted in /root/.docker/config.json.Configure a credential helper to remove this warning. Seehttps://docs.docker.com/engine/reference/commandline/login/#credentials-storeLogin Succeeded#ä¿®æ”¹é•œåƒname:tagä¸ºharborä»“åº“å[root@centos8_manage01 harbor]# docker tag baishuming2020:latest 192.168.98.240/library/centos_web:v1#ä¸Šä¼ é•œåƒ[root@centos8_manage01 harbor]# docker push 192.168.98.240/library/centos_web:v1The push refers to repository [192.168.98.240/library/centos_web]968786242e9d: Pushed v1: digest: sha256:d204253a33c6c2c74273fbd003cf3e14a48bcdd5c7bc10f51ccbad9e4dd39699 size: 528 å¸¸è§é—®é¢˜docker-composeå‘½ä»¤æ— æ³•ä½¿ç”¨[root@centos8_manage01 ~]# docker-compose psERROR:Canâ€™t find a suitable configuration file in this directory or anyparent. Are you in the right directory? Supported filenames: docker-compose.yml, docker-compose.yaml åŸå› ï¼š å½“å‰ç›®å½•æ²¡æœ‰é…ç½®æ–‡ä»¶ æ­£ç¡®æ‰§è¡Œè·¯å¾„ harborå®‰è£…ç›®å½•[root@centos8_manage01 harbor]# docker-compose ps Name Command State Ports -----------------------------------------------------------------------------------------harbor-core /harbor/harbor_core Up harbor-db /docker-entrypoint.sh Up 5432/tcp harbor-jobservice /harbor/harbor_jobservice ... Up harbor-log /bin/sh -c /usr/local/bin/ ... Up 127.0.0.1:1514-&gt;10514/tcpharbor-portal nginx -g daemon off; Up 8080/tcp nginx nginx -g daemon off; Up 0.0.0.0:80-&gt;8080/tcp redis redis-server /etc/redis.conf Up 6379/tcp registry /entrypoint.sh /etc/regist ... Up 5000/tcp registryctl /harbor/start.sh Exit 137 ä¸‰ã€ä¼ä¸šçº§ä»“åº“ï¼šHarborï¼ˆæ¨èï¼‰ Harbor æ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨å’Œåˆ†å‘ Docker é•œåƒçš„ä¼ä¸šçº§ Registry æœåŠ¡å™¨ã€‚ æ‰©å±•äº†å¼€æº Docker Distributionã€‚ä½œä¸ºä¸€ä¸ªä¼ä¸šçº§ç§æœ‰ Registry æœåŠ¡å™¨ï¼ŒHarbor æä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œå®‰å…¨ æ”¯æŒé•œåƒæ‰«æï¼šæ¶æ„ç¨‹åºï¼Œbugç­‰ã€‚ ç¡¬ä»¶é…ç½®æ ¹æ®å…·ä½“éœ€æ±‚è€Œå®šï¼Œå®˜æ–¹æ–‡æ¡£ nodeèŠ‚ç‚¹éƒ½éœ€è¦é…ç½®ä¿¡ä»»å…³ç³»ï¼Œå¦åˆ™ä¸Šä¼ ä¸äº†é•œåƒ 1. å®éªŒå‡†å¤‡ è·å–å®‰è£…ç¨‹åºï¼šç¡®è®¤ç‰ˆæœ¬å‰å¾€githubæºç ä¸‹è½½æºç å®‰è£…åŒ…ã€‚ å®‰è£…docker docker-composeä¾èµ–ï¼šdocker version 16.7ä»¥ä¸Šã€‚ 1.ä¸Šgithubæ‰¾åˆ°[docker](https://github.com/docker)/**[compose](https://github.com/docker/compose)**é¡¹ç›®ã€‚ä¸‹è½½[docker-compose](https://github.com/docker/compose/releases) 2.è§£å‹cp/usr/bin/ç›®å½•ä¸‹å¹¶æ”¹åï¼š &#123;% u cp docker-compose-linux-x86_64 /usr/bin/docker-compose %&#125; #a+xæƒé™ 3.æ‰§è¡Œdocker-compose version ï¼Œæ˜¯å¦æ˜¾ç¤ºç‰ˆæœ¬å·ã€‚ æ›´æ”¹barboré…ç½®æ–‡ä»¶ tar -xvf harbor-offline-installer-v2.6.1.tgz cp harbor.yml.tmpl harbor.yml vim harbor.yml hostname: harbor.å­åŸŸå.com #å¯ä»¥æ˜¯åŸŸå&#x2F;ip&#x2F;ä¸»æœºå harbor_admin_password: 12345 #å¯†ç  password: root123 #æ•°æ®åº“å®¹å™¨å¯†ç  data_volume: &#x2F;data&#x2F;harbordata# æ•°æ®æŒ‚è½½ç‚¹ 2. éƒ¨ç½²å®‰è£…1.å®‰è£… [root@harbor harbor]# .&#x2F;install.sh #åšå¥½å‡†å¤‡å·¥ä½œæ‰§è¡Œå®‰è£…è„šæœ¬ å®‰è£…å®Œæˆï¼Œæ›´æ”¹hostsè§£æï¼Œè®¿é—® harbor.å­åŸŸå.comç¡®è®¤ç»“æœ è´¦æˆ·é»˜è®¤admin å¯†ç è‡ªå·±å‰é¢é…ç½®æŒ‡å®š 2.é€»è¾‘ 3. å¼€å¯æ‰«æå™¨ï¼ˆæœ€å¥½äº‹å…ˆå¼€å¯ï¼‰ trivyï¼šhithubé¡¹ç›®åœ°å€ å®‰è£…å‰ï¼š.&#x2F;install.sh â€“with-clair æ–°ç‰ˆæœ¬ï¼š.&#x2F;install.sh â€“with-trivy å®‰è£…åï¼š.&#x2F;prepare â€“with-clair æ–°ç‰ˆæœ¬ï¼š.&#x2F;prepare â€“with-trivy 4. å®¢æˆ·ç«¯ä½¿ç”¨4.1.æ·»åŠ æœ¬åœ°ä¿¡ä»»æ·»åŠ ä¿¡ä»»å…³ç³»ï¼Œä¿®æ”¹docker.serviceræ–‡ä»¶ï¼šâ€“insecure-registry harbor.åŸŸå.com&#x2F;ipï¼šç«¯å£ 4.2.ä¸Šä¼ ä¸‹è½½ è§£æâ€”â€”é…ç½®dockeræ–‡ä»¶â€”â€”ç™»å½•åˆ°ç§æœ‰ä»“åº“ åœ¨ä»“åº“å…ˆåˆ›å»ºå¥½é¡¹ç›®åç§° systemctl daemon-reload systemctl restart docker ç™»å½•åˆ°ä»“åº“ï¼šdocker login harbor.åŸŸå.com ä¿®æ”¹é•œåƒtagï¼š docker tag registry.cn-shanghai.aliyuncs.com&#x2F;czsmall&#x2F;mes:1.1 harbor.boloni.com&#x2F;mes&#x2F;nginx:1.1 ä¸Šä¼ ä¸‹è½½ 5. harborå®¹å™¨ä»‹ç» nginxï¼šharbor çš„ä¸€ä¸ªåå‘ä»£ç†ç»„ä»¶ï¼Œä»£ç† registryã€uiã€token ç­‰æœåŠ¡ã€‚è¿™ä¸ªä»£ ç†ä¼šè½¬å‘ harbor web å’Œ docker client çš„å„ç§è¯·æ±‚åˆ°åç«¯æœåŠ¡ä¸Šã€‚ harbor-adminserverï¼šharbor ç³»ç»Ÿç®¡ç†æ¥å£ï¼Œå¯ä»¥ä¿®æ”¹ç³»ç»Ÿé…ç½®ä»¥åŠè·å–ç³»ç»Ÿä¿¡ æ¯ã€‚ harbor-dbï¼šå­˜å‚¨é¡¹ç›®çš„å…ƒæ•°æ®ã€ç”¨æˆ·ã€è§„åˆ™ã€å¤åˆ¶ç­–ç•¥ç­‰ä¿¡æ¯ã€‚ harbor-jobserviceï¼šharbor é‡Œé¢ä¸»è¦æ˜¯ä¸ºäº†é•œåƒä»“åº“ä¹‹å‰åŒæ­¥ä½¿ç”¨çš„ã€‚ harbor-logï¼šæ”¶é›†å…¶ä»– harbor çš„æ—¥å¿—ä¿¡æ¯ã€‚ harbor-uiï¼šä¸€ä¸ªç”¨æˆ·ç•Œé¢æ¨¡å—ï¼Œç”¨æ¥ç®¡ç† registryã€‚ registryï¼šå­˜å‚¨ docker images çš„æœåŠ¡ï¼Œå¹¶ä¸”æä¾› pull&#x2F;push æœåŠ¡ã€‚ redisï¼šå­˜å‚¨ç¼“å­˜ä¿¡æ¯ webhookï¼šå½“ registry ä¸­çš„ image çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å»è®°å½•æ›´æ–°æ—¥å¿—ã€å¤åˆ¶ ç­‰æ“ä½œã€‚ token serviceï¼šåœ¨ docker client è¿›è¡Œ pull&#x2F;push çš„æ—¶å€™è´Ÿè´£ token çš„å‘æ”¾ã€‚ 6. ä¼ä¸šçº§ä»“åº“ï¼šHarboré«˜å¯ç”¨ åŸºäºå…±äº«å­˜å‚¨ï¼š åŸºäºå†…éƒ¨dockerå¤åˆ¶åŠŸèƒ½ï¼šç±»ä¼¼äº MySQL çš„ä¸»ä»åŒæ­¥ï¼Œ å…¶å¯ä»¥å®ç°ä¸åŒçš„æ•°æ®ä¸­å¿ƒã€ä¸åŒçš„è¿è¡Œç¯å¢ƒä¹‹é—´åŒæ­¥é•œåƒï¼Œå¹¶æä¾›å‹å¥½çš„ç®¡ç† ç•Œé¢ï¼Œå¤§å¤§ç®€åŒ–äº†å®é™…è¿ç»´ä¸­çš„é•œåƒç®¡ç†å·¥ä½œ ä»“åº“åŒæ­¥+HAproxyå®ç° ä¸€ï¼šä»“åº“ç®¡ç†#ä¸¤è¾¹éƒ½éœ€è¦é…ç½® ç›®æ ‡å;å¯¹æ–¹çš„ä»“åº“åç§°ï¼Œç›®æ ‡urlï¼šå¯¹æ–¹çš„åœ°å€ï¼šhttpâ€¦.è®¿é—®iè´¦å·ï¼Œå¯†ç  äºŒï¼šåŒæ­¥ç®¡ç†#ä¸¤è¾¹éƒ½éœ€è¦é…ç½® åœ¨ä¸»æœåŠ¡å™¨ç«¯é…ç½®ï¼šä¸¤è¾¹é¡¹ç›®åç§°å¿…é¡»ä¸€è‡´ï¼ŒåŒæ­¥æ¨¡å¼é€‰push-basedï¼Œè§¦å‘æ¨¡å¼ï¼šäº‹ä»¶ å››ã€ é˜¿é‡Œ å…¬å¸çš„å®¹å™¨åƒä¸‡ä¸è¦ä¸Šä¼ åˆ°å…±æœ‰ä»“åº“ å®˜æ–¹ä»“åº“ï¼šç›®å‰æœ‰é˜¿é‡Œä¸hub.Dockerã€‚å› Dockerå®˜æ–¹ä»“åº“åœ¨å›½å¤–ï¼Œè®¿é—®ä¸ç¨³å®šã€‚ä¸åšé‡ç‚¹ä½¿ç”¨ã€‚ ç§æœ‰ä»“åº“ï¼š åˆ›å»ºé•œåƒæ—¶ã€‚å…±æœ‰ä»“åº“ä¸Šä¼ éœ€è¦è®¤è¯ï¼Œè€Œä¸‹è½½ä¸éœ€è¦ã€‚ç§æœ‰ä»“åº“æ— è®ºä¸Šä¼ ä¸‹è½½éƒ½éœ€è¦è®¤è¯ã€‚ dockerå®˜æ–¹ä»“åº“ä¸éœ€è¦æŒ‡å®šURLï¼Œç›´æ¥docker loginç™»å½• ä¿¡ä»»ä»“åº“å¦‚æœä»…ä»…æ˜¯ä¸‹è½½é•œåƒå°±ä¸éœ€è¦ç™»å½•å³å¯ä¸‹è½½(åœ¨dockerdçš„serviceæ–‡ä»¶æ·»åŠ â€“insecure-registry 172.31.6.102:80) 1. ç™»å½•é˜¿é‡Œäº‘Docker Registry1ï¼Œç™»å½•é˜¿é‡Œå®¹å™¨é•œåƒæœåŠ¡,æ‰¾åˆ°å®åˆ—åˆ—è¡¨â€”â€”ä¸ªäººå®ä¾‹&#x2F;ä¼ä¸šç‰ˆâ€”â€”é•œåƒä»“åº“ 2ï¼Œåˆ›å»ºä»“åº“ã€‚å‘½ä»¤ç©ºé—´å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªtagã€‚ä»“åº“åç§°å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆåŒä¸€ä¸ªé¡¹ç›®çš„åç§°ã€‚ 3ï¼Œå›åˆ°ä½œè€…çš„ç”µè„‘ï¼Œç™»å½•è‡ªå·±çš„é•œåƒä»“åº“ï¼šdocker login å›è½¦å¯†ç åï¼Œæç¤ºLogin Succeededæ‰ç®—æˆåŠŸ $ docker login â€“username&#x3D;è´¦å·@163.com registry.cn-shanghai.aliyuncs.com$ Password: 2. å°†é•œåƒæ¨é€åˆ°aliyun Registryborder ä¿®æ”¹tagæ ¼å¼-ä¸Šä¼ $ docker tag [æœ¬åœ°é•œåƒ:ç‰ˆæœ¬å·] registry.cn-shanghai.aliyuncs.com&#x2F;czsmall&#x2F;mes:[é•œåƒç‰ˆæœ¬å·] $ docker push registry.cn-shanghai.aliyuncs.com&#x2F;czsmall&#x2F;mes:[é•œåƒç‰ˆæœ¬å·] 3. ä»Registryä¸­æ‹‰å–é•œåƒ$ docker pull registry.cn-shanghai.aliyuncs.com&#x2F;czsmall&#x2F;mes:[é•œåƒç‰ˆæœ¬å·] äº”ã€ å®˜æ–¹ä»“åº“ï¼šdocker1.ç™»å½•hub.Docker Registry1.ç™»å½•(Docker Hub,åˆ›å»ºä»“åº“ã€‚ 2.å›åˆ°ä½œè€…ç”µè„‘ï¼Œç™»å½•è‡ªå·±çš„é•œåƒä»“åº“ï¼šdocker login å›è½¦å¯†ç åï¼Œæç¤ºLogin Succeededæ‰ç®—æˆåŠŸ $ docker login docke Username: czsmall Password: 2. å°†é•œåƒæ¨é€åˆ°aliyun Registry é¦–å…ˆä¿®æ”¹æœ¬åœ°éœ€è¦ä¸Šä¼ çš„imagesï¼Œtagã€‚æ ¼å¼ï¼šä»“åº“åå­—æˆ–è€…é¡¹ç›®å/é•œåƒimagesåï¼štag ä¸Šä¼ æ—¶å¯ä¸å†™åŸŸåï¼Œé»˜è®¤ä¸ºä»€ä¹ˆhub.dockerã€‚ docker tag harvey&#x2F;nginx:1.3 docker.io&#x2F;czsmall&#x2F;nginx:1.1 #ç»™é•œåƒæ‰“tag docker push docker.io&#x2F;czsmall&#x2F;nginx:1.1 #ä¸Šä¼ é•œåƒ 3,ä»Registryä¸­æ‹‰å–é•œåƒdocker pull czsmall&#x2F;nginx:1.1 #ä¸‹è½½é•œåƒåˆ°æœ¬åœ° æŸ¥çœ‹è®¤è¯ä¿¡æ¯ã€‚ #ç™»å½•æˆåŠŸä¹‹åä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªéšè—æ–‡ä»¶ç”¨äºä¿å­˜ç™»å½•è®¤è¯ä¿¡æ¯ [root@k-node2 ~]# cat &#x2F;root&#x2F;.docker&#x2F;config.json{ â€œauthsâ€: { â€œhttps://index.docker.io/v1/â€œ: { â€œauthâ€: â€œY3pzbp6aGFoMDgwNzE1MTU&#x3D;â€ }, â€œregistry.cn-shanghai.aliyuncs.comâ€: { â€œauthâ€: â€œaGNvbmNvbTp6aGFoMDgwNw&#x3D;&#x3D;â€ } }"},{"title":"NginxåŸºç¡€","path":"/wiki/linux/nginx.html","content":"nginx ç‰ˆæœ¬åŒºåˆ« Nginxå¼€æºç‰ˆ Nginx plus å•†ä¸šç‰ˆ openresty Tengine å¼€æºç‰ˆæœ¬ç¼–è¯‘å®‰è£… Centos7 nginx-1.21.6 æ³¨æ„access.logæ–‡ä»¶çš„å¤§å° ä¸Šä¼ taråŒ…è§£å‹ï¼štar zxvf nginx-1.21.6.tar.gz å®‰è£…ä¾èµ–yum install -y gcc / gcc-c++ pcre pcre-devel / zlib zlib-devel / gcc-c++ å¦‚æœæç¤ºï¼š.&#x2F;configure: error: the HTTP rewrite module requires the PCRE library.:å‚è€ƒ wget https://sourceforge.net/projects/pcre/files/pcre/8.43/pcre-8.43.tar.gztar -zxvf pcre-8.43.tar.gzcd pcre-8.43./configure --enable-utf8make -j4 &amp;&amp; make install åŸºæœ¬å®‰è£…mdir -p /apps/local/nginx/./configure --prefix=/apps/local/nginx/make -j4 &amp;&amp; make install å®‰è£…ç¤ºä¾‹./configure --prefix=/usr/local/nginx \\--sbin-path=/usr/local/nginx/sbin/nginx \\--conf-path=/usr/local/nginx/conf/nginx.conf \\--error-log-path=/var/log/nginx/error.log \\--http-log-path=/var/log/nginx/access.log \\--pid-path=/var/run/nginx/nginx.pid \\--lock-path=/var/lock/nginx.lock \\--user=nginx \\--group=nginx \\--with-http_ssl_module \\--with-http_gzip_static_module \\--http-proxy-temp-path=/var/tmp/nginx/proxy/ \\--http-fastcgi-temp-path=/var/tmp/nginx/fcgi/ \\--http-uwsgi-temp-path=/var/tmp/nginx/uwsgi \\--http-scgi-temp-path=/var/tmp/nginx/scgi \\--with-pcre å‚æ•°è®²è§£--prefix= æŒ‡å‘å®‰è£…ç›®å½•ã€‚ --sbin-path= æŒ‡å®šæ‰§è¡Œç¨‹åºæ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚ --modules-path= æŒ‡å®šç¬¬ä¸‰æ–¹æ¨¡å—çš„å­˜æ”¾è·¯å¾„ã€‚ --conf-path= æŒ‡å®šé…ç½®æ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚ --error-log-path= æŒ‡å®šé”™è¯¯æ—¥å¿—å­˜æ”¾ä½ç½®ã€‚ --pid-path= æŒ‡å®špidæ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚ --lock-path= æŒ‡å®šlockæ–‡ä»¶å­˜æ”¾ä½ç½®ã€‚ --user= æŒ‡å®šç¨‹åºè¿è¡Œæ—¶çš„éç‰¹æƒç”¨æˆ·ã€‚ --group= æŒ‡å®šç¨‹åºè¿è¡Œæ—¶çš„éç‰¹æƒç”¨æˆ·ç»„ã€‚ --builddir= æŒ‡å‘ç¼–è¯‘ç›®å½•ã€‚ --with-rtsig_module å¯ç”¨rtsigæ¨¡å—æ”¯æŒã€‚ --with-select_module å¯ç”¨selectæ¨¡å—æ”¯æŒï¼Œä¸€ç§è½®è¯¢å¤„ç†æ–¹å¼ï¼Œä¸æ¨èåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œç¦ç”¨ï¼š--without-select_moduleã€‚ --with-poll_module å¯ç”¨pollæ¨¡å—æ”¯æŒ,åŠŸèƒ½ä¸selectç›¸åŒï¼Œä¸æ¨èåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ --with-threads å¯ç”¨thread poolæ”¯æŒã€‚ --with-file-aio å¯ç”¨file aioæ”¯æŒã€‚ --with-http_ssl_module å¯ç”¨httpsæ”¯æŒã€‚ --with-http_v2_module å¯ç”¨ngx_http_v2_moduleæ”¯æŒã€‚ --with-ipv6 å¯ç”¨ipv6æ”¯æŒã€‚ --with-http_realip_module å…è®¸ä»è¯·æ±‚æŠ¥æ–‡å¤´ä¸­æ›´æ”¹å®¢æˆ·ç«¯çš„ipåœ°å€ï¼Œé»˜è®¤ä¸ºå…³ã€‚ --with-http_addition_module å¯ç”¨ngix_http_additon_mdouleæ”¯æŒï¼ˆä½œä¸ºä¸€ä¸ªè¾“å‡ºè¿‡æ»¤å™¨ï¼Œåˆ†éƒ¨åˆ†å“åº”è¯·æ±‚)ã€‚ --with -http_xslt_module å¯ç”¨ngx_http_xslt_moduleæ”¯æŒï¼Œè¿‡æ»¤è½¬æ¢XMLè¯·æ±‚ ã€‚ --with-http_image_filter_mdoule å¯ç”¨ngx_http_image_filter_moduleæ”¯æŒï¼Œä¼ è¾“JPEG\\GIF\\PNGå›¾ç‰‡çš„ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œé»˜è®¤ä¸å¯ç”¨ï¼Œéœ€è¦å®‰è£…gdåº“ã€‚ --with-http_geoip_module å¯ç”¨ngx_http_geoip_moduleæ”¯æŒï¼Œç”¨äºåˆ›å»ºåŸºäºMaxMind GeoIPäºŒè¿›åˆ¶æ–‡ä»¶ç›¸é…çš„å®¢æˆ·ç«¯IPåœ°å€çš„ngx_http_geoip_moduleå˜é‡ã€‚ --with-http_sub_module å¯ç”¨ngx_http_sub_moduleæ”¯æŒï¼Œå…è®¸ç”¨ä¸€äº›å…¶ä»–æ–‡æœ¬æ›¿æ¢nginxå“åº”ä¸­çš„ä¸€äº›æ–‡æœ¬ã€‚ --with-http_dav_module å¯ç”¨ngx_http_dav_moduleæ”¯æŒï¼Œå¢åŠ PUTã€DELETEã€MKCOLåˆ›å»ºé›†åˆï¼ŒCOPYå’ŒMOVEæ–¹æ³•ï¼Œé»˜è®¤ä¸ºå…³é—­ï¼Œéœ€è¦ç¼–è¯‘å¼€å¯ã€‚ --with-http_flv_module å¯ç”¨ngx_http_flv_moduleæ”¯æŒï¼Œæä¾›å¯»æ±‚å†…å­˜ä½¿ç”¨åŸºäºæ—¶é—´çš„åç§»é‡æ–‡ä»¶ã€‚ --with-http_mp4_module å¯ç”¨ngx_http_mp4_moduleæ”¯æŒï¼Œå¯ç”¨å¯¹mp4ç±»è§†é¢‘æ–‡ä»¶çš„æ”¯æŒã€‚ --with-http_gzip_static_module å¯ç”¨ngx_http_gzip_static_moduleæ”¯æŒï¼Œæ”¯æŒåœ¨çº¿å®æ—¶å‹ç¼©è¾“å‡ºæ•°æ®æµã€‚ --with-http_random_index_module å¯ç”¨ngx_http_random_index_moduleæ”¯æŒï¼Œä»ç›®å½•ä¸­éšæœºæŒ‘é€‰ä¸€ä¸ªç›®å½•ç´¢å¼•ã€‚ --with-http_secure_link_module å¯ç”¨ngx_http_secure_link_moduleæ”¯æŒï¼Œè®¡ç®—å’Œæ£€æŸ¥è¦æ±‚æ‰€éœ€çš„å®‰å…¨é“¾æ¥ç½‘å€ã€‚ --with-http_degradation_module å¯ç”¨ngx_http_degradation_module æ”¯æŒå…è®¸åœ¨å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹è¿”å›204æˆ–444ä»£ç ã€‚ --with-http_stub_status_module å¯ç”¨ngx_http_stub_status_module æ”¯æŒæŸ¥çœ‹nginxçš„çŠ¶æ€é¡µã€‚ --without-http_charset_module ç¦ç”¨ngx_http_charset_moduleè¿™ä¸€æ¨¡å—ï¼Œå¯ä»¥è¿›è¡Œå­—ç¬¦é›†é—´çš„è½¬æ¢ï¼Œä»å…¶å®ƒå­—ç¬¦è½¬æ¢æˆUTF-8æˆ–è€…ä»UTF8è½¬æ¢æˆå…¶å®ƒå­—ç¬¦ã€‚å®ƒåªèƒ½ä»æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯æ–¹å‘ï¼Œåªæœ‰ä¸€ä¸ªå­—èŠ‚çš„å­—ç¬¦å¯ä»¥è½¬æ¢ã€‚ --without-http_gzip_module ç¦ç”¨ngx_http_gzip_moduleæ”¯æŒï¼ŒåŒ--with-http_gzip_static_moduleåŠŸèƒ½ä¸€æ ·ã€‚ --without-http_ssi_module ç¦ç”¨ngx_http_ssi_moduleæ”¯æŒï¼Œæä¾›äº†ä¸€ä¸ªåœ¨è¾“å…¥ç«¯å¤„ç†æœåŠ¡å™¨åŒ…å«æ–‡ä»¶ï¼ˆSSIï¼‰çš„è¿‡æ»¤å™¨ã€‚ --without-http_userid_module ç¦ç”¨ngx_http_userid_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—ç”¨æ¥ç¡®å®šå®¢æˆ·ç«¯åç»­è¯·æ±‚çš„cookiesã€‚ --without-http_access_module ç¦ç”¨ngx_http_access_moduleæ”¯æŒï¼Œæä¾›äº†åŸºäºä¸»æœºipåœ°å€çš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚ --without-http_auth_basic_module ç¦ç”¨ngx_http_auth_basic_moduleæ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è®¤è¯çš„æ–¹å¼æ¥å¯¹ç«™ç‚¹æˆ–éƒ¨åˆ†å†…å®¹è¿›è¡Œè®¤è¯ã€‚ --without-http_autoindex_module ç¦ç”¨ngx_http_authindex_moduleï¼Œè¯¥æ¨¡å—ç”¨äºåœ¨ngx_http_index_moduleæ¨¡å—æ²¡æœ‰æ‰¾åˆ°ç´¢å¼•æ–‡ä»¶æ—¶å‘å‡ºè¯·æ±‚ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆç›®å½•åˆ—è¡¨ã€‚ --without-http_geo_module ç¦ç”¨ngx_http_geo_moduleæ”¯æŒï¼Œè¿™ä¸ªæ¨¡å—ç”¨äºåˆ›å»ºä¾èµ–äºå®¢æˆ·ç«¯ipçš„å˜é‡ã€‚ --without-http_map_module ç¦ç”¨ngx_http_map_moduleæ”¯æŒï¼Œä½¿ç”¨ä»»æ„çš„é”®ã€å€¼ å¯¹è®¾ç½®é…ç½®å˜é‡ã€‚--without-http_split_clients_module ç¦ç”¨ngx_http_split_clients_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—ç”¨äºåŸºäºç”¨æˆ·ipåœ°å€ã€æŠ¥å¤´ã€cookiesåˆ’åˆ†ç”¨æˆ·ã€‚--without-http_referer_module ç¦ç”¨ngx_http_referer_modlueæ”¯æŒï¼Œè¯¥æ¨¡å—ç”¨æ¥è¿‡æ»¤è¯·æ±‚ï¼ŒæŠ¥å¤´ä¸­Refererå€¼ä¸æ­£ç¡®çš„è¯·æ±‚ã€‚--without-http_rewrite_module ç¦ç”¨ngx_http_rewrite_moduleæ”¯æŒã€‚è¯¥æ¨¡å—å…è®¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ”¹å˜URIï¼Œå¹¶ä¸”æ ¹æ®å˜é‡æ¥è½¬å‘ä»¥åŠé€‰æ‹©é…ç½®ã€‚å¦‚æœåœ¨serverçº§åˆ«è®¾ç½®è¯¥é€‰é¡¹ï¼Œé‚£ä¹ˆå°†åœ¨locationä¹‹å‰ç”Ÿæ•ˆï¼Œä½†å¦‚æœlocationä¸­è¿˜æœ‰æ›´è¿›ä¸€æ­¥çš„é‡å†™è§„åˆ™ï¼Œlocationéƒ¨åˆ†çš„è§„åˆ™ä¾ç„¶ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœè¿™ä¸ªURIé‡å†™æ˜¯å› ä¸ºlocationéƒ¨åˆ†çš„è§„åˆ™é€ æˆçš„ï¼Œé‚£ä¹ˆlocationéƒ¨åˆ†ä¼šå†æ¬¡è¢«æ‰§è¡Œä½œä¸ºæ–°çš„URIï¼Œè¿™ä¸ªå¾ªç¯ä¼šè¢«æ‰§è¡Œ10æ¬¡ï¼Œæœ€åè¿”å›ä¸€ä¸ª500é”™è¯¯ã€‚--without-http_proxy_module ç¦ç”¨ngx_http_proxy_moduleæ”¯æŒï¼Œhttpä»£ç†åŠŸèƒ½ã€‚--without-http_fastcgi_module ç¦ç”¨ngx_http_fastcgi_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—å…è®¸nginxä¸fastcgiè¿›ç¨‹äº¤äº’ï¼Œå¹¶é€šè¿‡ä¼ é€’å‚æ•°æ¥æ§åˆ¶fastcgiè¿›ç¨‹å·¥ä½œã€‚--without-http_uwsgi_module ç¦ç”¨ngx_http_uwsgi_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—ç”¨æ¥ä½¿ç”¨uwsgiåè®®ï¼ŒuwsgiæœåŠ¡å™¨ç›¸å…³ --without-http_scgi_module ç¦ç”¨ngx_http_scgi_moduleæ”¯æŒï¼Œç±»ä¼¼äºfastcgiï¼Œä¹Ÿæ˜¯åº”ç”¨ç¨‹åºä¸httpæœåŠ¡çš„æ¥å£æ ‡å‡†ã€‚--without-http_memcached_module ç¦ç”¨ngx_http_memcachedæ”¯æŒï¼Œç”¨æ¥æä¾›ç®€å•çš„ç¼“å­˜ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚--without-http_limit_conn_module ç¦ç”¨ngx_http_limit_conn_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—å¯ä»¥æ ¹æ®æ¡ä»¶è¿›è¡Œä¼šè¯çš„å¹¶å‘è¿æ¥æ•°è¿›è¡Œé™åˆ¶ã€‚--without-http_limit_req_module ç¦ç”¨ngx_limit_req_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—å¯ä»¥å®ç°å¯¹äºä¸€ä¸ªåœ°å€è¿›è¡Œè¯·æ±‚æ•°é‡çš„é™åˆ¶ --without-http_empty_gif_module ç¦ç”¨ngx_http_empty_gif_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—åœ¨å†…å­˜ä¸­å¸¸é©»äº†ä¸€ä¸ª1*1çš„é€æ˜gifå›¾åƒï¼Œå¯ä»¥è¢«éå¸¸å¿«é€Ÿçš„è°ƒç”¨ã€‚--without-http_browser_module ç¦ç”¨ngx_http_browser_mdouleæ”¯æŒï¼Œåˆ›å»ºä¾èµ–äºè¯·æ±‚æŠ¥å¤´çš„å€¼ ã€‚å¦‚æœæµè§ˆå™¨ä¸ºmodernï¼Œåˆ™$modern_browserç­‰äºmodern_browser_valueçš„å€¼ï¼›å¦‚æœæµè§ˆå™¨ä¸ºoldï¼Œåˆ™$ancient_browserç­‰äº$ancient_browser_valueæŒ‡ä»¤åˆ†é…çš„å€¼ï¼›å¦‚æœæµè§ˆå™¨ä¸ºMSIEï¼Œåˆ™$msieç­‰äº1ã€‚--without-http_upstream_ip_hash_module ç¦ç”¨ngx_http_upstream_ip_hash_moduleæ”¯æŒï¼Œè¯¥æ¨¡å—ç”¨äºç®€å•çš„è´Ÿè½½å‡è¡¡ã€‚--with-http_perl_module å¯ç”¨ngx_http_perl_moduleæ”¯æŒï¼Œå®ƒä½¿nginxå¯ä»¥ç›´æ¥ä½¿ç”¨perlæˆ–é€šè¿‡ssiè°ƒç”¨perlã€‚--with-perl_modules_path= è®¾å®šperlæ¨¡å—è·¯å¾„--with-perl= è®¾å®šperlåº“æ–‡ä»¶è·¯å¾„--http-log-path= è®¾å®šaccess logè·¯å¾„--http-client-body-temp-path= è®¾å®šhttpå®¢æˆ·ç«¯è¯·æ±‚ä¸´æ—¶æ–‡ä»¶è·¯å¾„--http-proxy-temp-path= è®¾å®šhttpä»£ç†ä¸´æ—¶æ–‡ä»¶è·¯å¾„--http-fastcgi-temp-path= è®¾å®šhttp fastcgiä¸´æ—¶æ–‡ä»¶è·¯å¾„--http-uwsgi-temp-path= è®¾å®šhttp scgiä¸´æ—¶æ–‡ä»¶è·¯å¾„--http-scgi-temp-path= è®¾å®šhttp scgiä¸´æ—¶æ–‡ä»¶è·¯å¾„--without-http ç¦ç”¨http serveråŠŸèƒ½--without-http-cache ç¦ç”¨http cacheåŠŸèƒ½--with-mail å¯ç”¨POP3ã€IMAP4ã€SMTPä»£ç†æ¨¡å—--with-mail_ssl_module å¯ç”¨ngx_mail_ssl_moduleæ”¯æŒ--without-mail_pop3_module ç¦ç”¨pop3åè®®ã€‚--without-mail_iamp_module ç¦ç”¨iampåè®®ã€‚--without-mail_smtp_module ç¦ç”¨smtpåè®®ã€‚--with-google_perftools_module å¯ç”¨ngx_google_perftools_mdouleæ”¯æŒï¼Œè°ƒè¯•ç”¨ï¼Œå¯ä»¥ç”¨æ¥åˆ†æç¨‹åºæ€§èƒ½ç“¶é¢ˆã€‚--with-cpp_test_module å¯ç”¨ngx_cpp_test_moduleæ”¯æŒã€‚--add-module= æŒ‡å®šå¤–éƒ¨æ¨¡å—è·¯å¾„ï¼Œå¯ç”¨å¯¹å¤–éƒ¨æ¨¡å—çš„æ”¯æŒã€‚--with-cc= æŒ‡å‘Cç¼–è¯‘å™¨è·¯å¾„ã€‚--with-cpp= æŒ‡å‘Cé¢„å¤„ç†è·¯å¾„ã€‚--with-cc-opt= è®¾ç½®Cç¼–è¯‘å™¨å‚æ•°ï¼ŒæŒ‡å®š--with-cc-opt=&quot;-I /usr/lcal/include&quot;,å¦‚æœä½¿ç”¨select()å‡½æ•°ï¼Œè¿˜éœ€è¦åŒæ—¶æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦æ•°é‡--with-cc-opt=&quot;-D FD_SETSIZE=2048&quot;ã€‚ (PCREåº“ï¼‰--with-ld-opt= è®¾ç½®è¿æ¥æ–‡ä»¶å‚æ•°ï¼Œéœ€è¦æŒ‡å®š--with-ld-opt=&quot;-L /usr/local/lib&quot;ã€‚ï¼ˆPCREåº“ï¼‰--with-cpu-opt= æŒ‡å®šç¼–è¯‘çš„CPUç±»å‹ï¼Œå¦‚pentium,pentiumpro,...amd64,ppc64...--without-pcre ç¦ç”¨pcreåº“ã€‚--with-pcre å¯ç”¨pcreåº“ã€‚--with-pcre= æŒ‡å‘pcreåº“æ–‡ä»¶ç›®å½•ã€‚--with-pcre-opt= åœ¨ç¼–è¯‘æ—¶ä¸ºpcreåº“è®¾ç½®é™„åŠ å‚æ•° ã€‚--with-md5= æŒ‡å‘md5åº“æ–‡ä»¶ç›®å½•ã€‚--with-md5-opt= ç¼–è¯‘æ—¶ä¸ºmd5åº“è®¾ç½®é™„åŠ å‚æ•°ã€‚--with-md5-asm ä½¿ç”¨md5æ±‡ç¼–æºã€‚--with-sha1= æŒ‡å‘sha1åº“æ–‡ä»¶ç›®å½•ã€‚--with-sha1-opt= ç¼–è¯‘æ—¶ä¸ºsha1åº“è®¾ç½®é™„åŠ å‚æ•°ã€‚--with-sha1-asm ä½¿ç”¨sha1æ±‡ç¼–æºã€‚--with-zlib= æŒ‡å‘zlibåº“æ–‡ä»¶ç›®å½•ã€‚ --with-zlib-opt= åœ¨ç¼–è¯‘æ—¶ä¸ºzlibè®¾ç½®é™„åŠ å‚æ•°ã€‚ --with-zlib-asm= ä¸ºæŒ‡å®šçš„CPUä½¿ç”¨æ±‡ç¼–æºè¿›è¡Œä¼˜åŒ–ã€‚ --with-libatomic ä¸ºåŸå­å†…å­˜çš„æ›´æ–°æ“ä½œçš„å®ç°æä¾›ä¸€ä¸ªæ¶æ„ã€‚ --with-libatomic= æŒ‡å‘libatomic_opsçš„å®‰è£…ç›®å½•ã€‚ --with-openssl= æŒ‡å‘opensslå®‰è£…ç›®å½•ã€‚ --with-openssl-opt= åœ¨ç¼–è¯‘æ—¶ä¸ºopensslè®¾ç½®é™„åŠ å‚æ•°ã€‚ --with-debug å¯ç”¨debugæ—¥å¿—ã€‚ å¯åŠ¨nginxè¿›å…¥å®‰è£…å¥½çš„ç›®å½• &#x2F;usr&#x2F;apps&#x2F;local&#x2F;nginx&#x2F;sbin ./nginx å¯åŠ¨./nginx -s stop å¿«é€Ÿåœæ­¢./nginx -s quit ä¼˜é›…å…³é—­ï¼Œåœ¨é€€å‡ºå‰å®Œæˆå·²ç»æ¥å—çš„è¿æ¥è¯·æ±‚./nginx -s reload é‡æ–°åŠ è½½é…ç½® å¼€æ”¾æŒ‡å®šç«¯å£ 80 firewall-cmd --zone=public --add-port=80/tcp --permanent æ³¨å†Œserviceæ–‡ä»¶ vim /usr/lib/systemd/system/nginx.service å†…å®¹ [Unit]Description=nginx - web serverAfter=network.target remote-fs.target nss-lookup.target[Service]Type=forkingPIDFile=/apps/local/nginx/logs/nginx.pidExecStartPre=/apps/local/nginx/sbin/nginx -t -c /apps/local/nginx/conf/nginx.confExecStart=/apps/local/nginx/sbin/nginx -c /apps/local/nginx/conf/nginx.confExecReload=/apps/local/nginx/sbin/nginx -s reloadExecStop=/apps/local/nginx/sbin/nginx -s stopExecQuit=/apps/local/nginx/sbin/nginx -s quitPrivateTmp=true[Install]WantedBy=multi-user.target é‡æ–°åŠ è½½ç³»ç»ŸæœåŠ¡ï¼š systemctl daemon-reload å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ æ³¨æ„ä¸è¦åŒæ—¶ç”¨ä¸¤ç§æ–¹å¼å¼€å¯è¿›ç¨‹ systemctl start nginx.service &amp;&amp; systemctl enable nginx.service æŸ¥çœ‹nginxè¿›ç¨‹ps -ef | grep nginx dockerå®‰è£…é…ç½®æ–‡ä»¶ä¸åº”ç”¨åœºæ™¯**ç›®å½•ç»“æ„ ** é»˜è®¤ï¼šclient_body_temp conf fastcgi_temp html logs proxy_temp sbin scgi_temp uwsgi_tempä¸´æ—¶æ–‡ä»¶ï¼šclient_body_temp fastcgi_temp proxy_temp scgi_temp conf ç”¨æ¥å­˜æ”¾é…ç½®æ–‡ä»¶ç›¸å…³ html ç”¨æ¥å­˜æ”¾é™æ€æ–‡ä»¶çš„é»˜è®¤ç›®å½• htmlã€cssç­‰ sbin nginxçš„ä¸»ç¨‹åº access.logï¼šæ—¥å¿—æ–‡ä»¶ nginx.pidï¼šä¸»è¿›ç¨‹IDå· è¿è¡ŒåŸç† æœ€å°é…ç½®worker_processesworker_processes 1; é»˜è®¤ä¸º1ï¼Œè¡¨ç¤ºå¼€å¯ä¸€ä¸ªä¸šåŠ¡è¿›ç¨‹ worker_connectionsworker_connections 1024; å•ä¸ªä¸šåŠ¡è¿›ç¨‹å¯æ¥å—è¿æ¥æ•° include mime.types;include mime.types; å¼•å…¥http mimeç±»å‹ã€‚å¯ä»¥æ‰‹åŠ¨æ·»åŠ ç‰¹å®šæ ¼å¼çš„é—®é¢˜ã€‚ä»¥ä»€ä¹ˆæ–¹å¼å±•ç°åœ¨ç½‘é¡µã€‚ default_type application&#x2F;octet-stream;default_type application&#x2F;octet-stream; å¦‚æœmimeç±»å‹æ²¡åŒ¹é…ä¸Šï¼Œé»˜è®¤ä½¿ç”¨äºŒè¿›åˆ¶æµçš„æ–¹å¼ä¼ è¾“ã€‚ sendfile on;sendfile on; ä½¿ç”¨linuxçš„ sendfile(socket, file, len) é«˜æ•ˆç½‘ç»œä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯æ•°æ®0æ‹·è´ã€‚æœªå¼€å¯sendfile è™šæ‹Ÿä¸»æœºé…ç½® serverï¼šå¯ä»¥å¼€å¯å¤šå¯nginxä¸»æœºã€‚ä»¥ç«¯å£å·åŒºåˆ† location &#x2F; ï¼šé…å¹³uraï¼ŒåŸŸåä¹‹åã€‚åŠ åŸŸåç§°ä¹‹ä¸ºurl rootï¼šhtmlæ ¹ç›®å½• é»˜è®¤é…ç½®ï¼šserver &#123; listen 80; ç›‘å¬ç«¯å£å· server_name localhost; ä¸»æœºåæˆ–è€…åŸŸå location / &#123; åŒ¹é…è·¯å¾„ root html; æ–‡ä»¶æ ¹ç›®å½•ã€‚æ­¤å¤„çš„rootè¡¨ç¤ºæ ¹ index index.html index.htm; é»˜è®¤é¡µåç§° &#125; e rror_page 500 502 503 504 /50x.html; æŠ¥é”™ç¼–ç å¯¹åº”é¡µé¢ location åˆ° /50x.html location = /50x.html &#123; root html; &#125; &#125; è™šæ‹Ÿä¸»æœºåŸŸåè§£æ server {:ä¸€ä¸ªserver ä¸ºä¸€ä¸ªè™šæ‹Ÿä¸»æœº æ³›åŸŸåè§£æ*.com è§£æä»ä¸Šå¾€ä¸‹ï¼Œå…ˆåŒ¹é…é‚£ä¸ªåˆ™è§£æé‚£ä¸ª *.coméƒ½è§£æåˆ°é€šä¸€ä¸ªipåœ°å€ server_name ï¼šåé¢å¯ä»¥å†™å¤šä¸ªåŸŸå â€‹ å½“a.comåŸŸåè¿‡æ¥åˆ™åˆ°&#x2F;apps&#x2F;local&#x2F;bolgä¸‹ server &#123; listen 80; server_name a.com; location / &#123; root /apps/local/bolg; index index.html index.htm; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125;&#125; åŒæ—¶è§£æåˆ°ç»Ÿä¸€ä¸ªip#user nobody;worker_processes 1;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application/octet-stream; sendfile on;#è™šæ‹Ÿä¸»æœºA server &#123; listen 80; server_name a.com; location / &#123; root /apps/local/bolg; index index.html index.htm; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; &#125;#è™šæ‹Ÿä¸»æœºB server &#123; listen 80; server_name b.com; location / &#123; root /apps/local/www; index index.html index.htm; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; &#125;&#125; servernameåŒ¹é…è§„åˆ™æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯servernameåŒ¹é…åˆ†å…ˆåé¡ºåºï¼Œå†™åœ¨å‰é¢çš„åŒ¹é…ä¸Šå°±ä¸ä¼šç»§ç»­å¾€ä¸‹åŒ¹é…äº†ã€‚ å®Œæ•´åŒ¹é…æˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€servernameä¸­åŒ¹é…å¤šä¸ªåŸŸå server_name vod.mmban.com www1.mmban.com; é€šé…ç¬¦åŒ¹é…server_name *.mmban.com é€šé…ç¬¦ç»“æŸåŒ¹é…server_name vod.*; æ­£åˆ™åŒ¹é…server_name ~^[0-9]+\\.mmban\\.com$; åå‘ä»£ç† å­—æ®µï¼šproxy_pass http://baidu.com; â€¢ ç½‘å…³ã€ä»£ç†ä¸åå‘ä»£ç†â€¢ åå‘ä»£ç†åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„åº”ç”¨åœºæ™¯â€¢ Nginxçš„åå‘ä»£ç†é…ç½®â€¢ åŸºäºåå‘ä»£ç†çš„è´Ÿè½½å‡è¡¡å™¨â€¢ è´Ÿè½½å‡è¡¡ç­–ç•¥ æµç¨‹å›¾ é…ç½® proxy_passåé¢è‹±æ–‡å°å·ç»“å°¾ server &#123; listen 80; server_name a.com; åŸŸå location / &#123; proxy_pass http://mail.boloni.com; ä»£ç†ä¸åˆ°çš„åœ°å€æˆ–è€…åŸŸåï¼Œ # root /apps/local/bolg; # index index.html index.htm; &#125; è´Ÿè½½å‡è¡¡å™¨ åœ¨httpæ¨¡å—ä¸‹ï¼Œé…åˆserverä½¿ç”¨ http &#123; # ... çœç•¥å…¶å®ƒé…ç½® upstream tomcats &#123; server 192.168.0.100:8080; server 192.168.0.101:8080; server example.com:8080; &#125; server &#123; listen 80; location / &#123; proxy_pass http://tomcats; ç»“åˆä¸Šé¢upstream åé¢çš„åç§°ã€‚ &#125; &#125; # ... çœç•¥å…¶å®ƒé…ç½®&#125; è½®è¯¢ç­–ç•¥weight :æƒé‡æ¯”ä¾‹ ç¤ºä¾‹ï¼š upstream tomcats &#123; server 192.168.0.100:8080 weight=2; # 2/6æ¬¡ server 192.168.0.101:8080 weight=3; # 3/6æ¬¡ server 192.168.0.102:8080 weight=1; # 1/6æ¬¡&#125; Downï¼šè¡¨ç¤ºæš‚æ—¶ä¸å‚ä¸è´Ÿè½½ã€‚ä¸åœ¨è®¿é—® backup:b:å¤‡ç”¨æœºï¼Œæ²¡æœ‰å¯ä»¥è®¿é—®çš„æœºå™¨æ‰ä¼šè®¿é—®å®ƒ server 192.168.0.100:8080 weight=2 down ; server 192.168.0.100:8080 weight=2 backup; ä¸å¸¸ç”¨ip_hashæ ¹æ®å®¢æˆ·ç«¯çš„ipåœ°å€è½¬å‘åŒä¸€å°æœåŠ¡å™¨ï¼Œå¯ä»¥ä¿æŒå›è¯ã€‚ least_connæœ€å°‘è¿æ¥è®¿é—® url_hashæ ¹æ®ç”¨æˆ·è®¿é—®çš„urlå®šå‘è½¬å‘è¯·æ±‚ fairæ ¹æ®åç«¯æœåŠ¡å™¨å“åº”æ—¶é—´è½¬å‘è¯·æ±‚ åŠ¨é™åˆ†ç¦»locationåŒ¹é…é¡ºåº å¤šä¸ªæ­£åˆ™locationç›´æ¥æŒ‰ä¹¦å†™é¡ºåºåŒ¹é…ï¼ŒæˆåŠŸåå°±ä¸ä¼šç»§ç»­å¾€åé¢åŒ¹é… æ™®é€šï¼ˆéæ­£åˆ™ï¼‰locationä¼šä¸€ç›´å¾€ä¸‹ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…åº¦æœ€é«˜çš„ï¼ˆæœ€å¤§å‰ç¼€åŒ¹é…ï¼‰ å½“æ™®é€šlocationä¸æ­£åˆ™locationåŒæ—¶å­˜åœ¨ï¼Œå¦‚æœæ­£åˆ™åŒ¹é…æˆåŠŸ,åˆ™ä¸ä¼šå†æ‰§è¡Œæ™®é€šåŒ¹é… æ‰€æœ‰ç±»å‹locationå­˜åœ¨æ—¶ï¼Œâ€œ&#x3D;â€åŒ¹é… &gt; â€œ^~â€åŒ¹é… &gt; æ­£åˆ™åŒ¹é… &gt; æ™®é€šï¼ˆæœ€å¤§å‰ç¼€åŒ¹é… é…ç½®åå‘ä»£ç† åŠ¨æ€èµ„æºlocation / &#123; proxy_pass http://127.0.0.1:8080; root html; index index.html index.htm;&#125; å¢åŠ æ¯ä¸€ä¸ªlocation é™æ€èµ„æº location /css &#123; root /usr/local/nginx/static; index index.html index.htm; &#125;location /images &#123; root /usr/local/nginx/static; index index.html index.htm; &#125;location /js &#123; root /usr/local/nginx/static; index index.html index.htm; &#125; ä½¿ç”¨æ­£åˆ™æ­£åˆ™åŒ¹é…location ~*/(css|img|js) &#123; root /usr/local/nginx/static; index index.html index.htm;&#125; location å‰ç¼€&#x2F; é€šç”¨åŒ¹é…ï¼Œä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ° &#x3D; ç²¾å‡†åŒ¹é…ï¼Œä¸æ˜¯ä»¥æŒ‡å®šæ¨¡å¼å¼€å¤´ ~ æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™ ~* æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ ^~ éæ­£åˆ™åŒ¹é…ï¼ŒåŒ¹é…ä»¥æŒ‡å®šæ¨¡å¼å¼€å¤´çš„location aliasä¸root rootç”¨æ¥è®¾ç½®æ ¹ç›®å½•ï¼Œè€Œaliasåœ¨æ¥å—è¯·æ±‚çš„æ—¶å€™åœ¨è·¯å¾„ä¸Šä¸ä¼šåŠ ä¸Šlocationã€‚ **aliasæŒ‡å®šçš„ç›®å½•æ˜¯å‡†ç¡®çš„ï¼Œå³locationåŒ¹é…è®¿é—®çš„pathç›®å½•ä¸‹çš„æ–‡ä»¶ç›´æ¥æ˜¯åœ¨aliasç›®å½•ä¸‹æŸ¥æ‰¾çš„ï¼›rootæŒ‡å®šçš„ç›®å½•æ˜¯locationåŒ¹é…è®¿é—®çš„pathç›®å½•çš„ä¸Šä¸€çº§ç›®å½•,è¿™ä¸ªpathç›®å½•ä¸€å®šè¦æ˜¯çœŸå®å­˜åœ¨rootæŒ‡å®šç›®å½•ä¸‹çš„ï¼›ä½¿ç”¨aliasæ ‡ç­¾çš„ç›®å½•å—ä¸­ä¸èƒ½ä½¿ç”¨rewriteçš„breakï¼ˆå…·ä½“åŸå› ä¸æ˜ï¼‰ï¼›å¦å¤–ï¼ŒaliasæŒ‡å®šçš„ç›®å½•åé¢å¿…é¡»è¦åŠ ä¸Šâ€&#x2F;â€œç¬¦å·ï¼ï¼aliasè™šæ‹Ÿç›®å½•é…ç½®ä¸­ï¼ŒlocationåŒ¹é…çš„pathç›®å½•å¦‚æœåé¢ä¸å¸¦â€&#x2F;â€œï¼Œé‚£ä¹ˆè®¿é—®çš„urlåœ°å€ä¸­è¿™ä¸ªpathç›®å½•åé¢åŠ ä¸åŠ â€&#x2F;â€œä¸å½±å“è®¿é—®ï¼Œè®¿é—®æ—¶å®ƒä¼šè‡ªåŠ¨åŠ ä¸Šâ€&#x2F;â€œï¼› ä½†æ˜¯å¦‚æœlocationåŒ¹é…çš„pathç›®å½•åé¢åŠ ä¸Šâ€&#x2F;â€œï¼Œé‚£ä¹ˆè®¿é—®çš„urlåœ°å€ä¸­è¿™ä¸ªpathç›®å½•å¿…é¡»è¦åŠ ä¸Šâ€&#x2F;â€œï¼Œè®¿é—®æ—¶å®ƒä¸ä¼šè‡ªåŠ¨åŠ ä¸Šâ€&#x2F;â€œã€‚å¦‚æœä¸åŠ ä¸Šâ€&#x2F;â€œï¼Œè®¿é—®å°±ä¼šå¤±è´¥ï¼ rootç›®å½•é…ç½®ä¸­ï¼ŒlocationåŒ¹é…çš„pathç›®å½•åé¢å¸¦ä¸å¸¦â€&#x2F;â€œï¼Œéƒ½ä¸ä¼šå½±å“è®¿é—® ** location /css &#123;alias /usr/local/nginx/static/css;index index.html index.htm;&#125; æµ‹è¯•UrlRewriteä½¿ç”¨åœºæ™¯åŸŸåå˜æ›´ ç”¨æˆ·è·³è½¬ ï¼ˆä»æŸä¸ªè¿æ¥è·³åˆ°å¦ä¸€ä¸ªè¿æ¥ï¼‰ ä¼ªé™æ€åœºæ™¯ ï¼ˆä¾¿äºCDNç¼“å­˜åŠ¨æ€é¡µé¢æ•°æ® URLé‡å†™è¯­æ³•rewrite &lt;regex&gt; &lt;replacement&gt; [flag]; å…³é”®å­— æ­£åˆ™ æ›¿ä»£å†…å®¹ flagæ ‡è®° regex ï¼šå¯ä»¥ä½¿ç”¨æ­£åˆ™æˆ–è€…å­—ç¬¦ä¸²æ¥è¡¨ç¤ºç›¸åŒ¹é…çš„åœ°å€ã€‚replacementï¼šå¯ä»¥è¡¨ç¤ºé‡å®šå‘çš„åœ°å€ã€‚flag ï¼šflagæ ‡å¿—çš„ä½œç”¨æ˜¯ç”¨äºæ§åˆ¶å½“åŒ¹é…åˆ°å¯¹åº”çš„rewriteè§„åˆ™åæ˜¯å¦ç»§ç»­æ£€æŸ¥åç»­çš„rewriteè§„åˆ™ã€‚flagå€¼ä¸ºå¦‚ä¸‹å››ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š lastï¼šåœæ­¢å¤„ç†å½“å‰çš„rewriteæŒ‡ä»¤é›†ï¼Œè€Œåé€šè¿‡é‡å†™åçš„è§„åˆ™é‡æ–°å‘èµ·è¯·æ±‚ï¼Œæµè§ˆå™¨åœ°å€æ URLåœ°å€ä¸å˜ã€‚break``ï¼šå’Œ``break``æŒ‡ä»¤ä¸€æ ·ï¼Œéƒ½æ˜¯åœæ­¢å¤„ç†å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å…¶ä»–é‡å†™æ¨¡å—æŒ‡ä»¤ã€‚redirectï¼šå¦‚æœæ›¿æ¢å­—ç¬¦ä¸²ä¸ä»¥â€œ http:``/``/``â€ï¼Œâ€œ https:``/``/``â€æˆ–â€œ $schemeâ€ å¼€å¤´ï¼Œè¿”å›å¸¦æœ‰``302``ä»£ç çš„ä¸´æ—¶é‡å®šå‘ï¼Œæµè§ˆå™¨åœ°å€ä¼šæ˜¾ç¤ºè·³è½¬åçš„URLåœ°å€ã€‚permanentï¼šè¿”å›``301``ä»£ç çš„æ°¸ä¹…é‡å®šå‘ï¼Œæµè§ˆå™¨åœ°å€æ ä¼šæ˜¾ç¤ºè·³è½¬åçš„URLåœ°å€ã€‚ é˜²ç›—é“¾valid_referers none | blocked | server_names | strings ....; noneï¼Œ æ£€æµ‹ Referer å¤´åŸŸä¸å­˜åœ¨çš„æƒ…å†µã€‚ blockedï¼Œæ£€æµ‹ Referer å¤´åŸŸçš„å€¼è¢«é˜²ç«å¢™æˆ–è€…ä»£ç†æœåŠ¡å™¨åˆ é™¤æˆ–ä¼ªè£…çš„æƒ…å†µã€‚è¿™ç§æƒ…å†µè¯¥å¤´åŸŸçš„å€¼ä¸ä»¥â€œhttp:&#x2F;&#x2F;â€ æˆ– â€œhttps:&#x2F;&#x2F;â€ å¼€å¤´ã€‚ server_names ï¼Œè®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª URL ï¼Œæ£€æµ‹ Referer å¤´åŸŸçš„å€¼æ˜¯å¦æ˜¯è¿™äº› URL ä¸­çš„æŸä¸€ä¸ª åœ¨éœ€è¦é˜²ç›—é“¾çš„locationä¸­é…ç½® valid_referers 192.168.44.101; #åŸŸåæˆ–è€…IPif ($invalid_referer) &#123;return 403;&#125; ä½¿ç”¨curlæµ‹è¯• curl -I http://192.168.1.101/img/logo.png é«˜å¯ç”¨é…ç½®å®‰è£…Keepalivedç¼–è¯‘å®‰è£… ï¼š wget https://www.keepalived.org/software/keepalived-2.2.8.tar.gz yum å®‰è£… yum install keepalived/etc/keepalived/keepalived.confç¬¬ä¸€å°æœºå™¨ï¼š! Configuration File for keepalivedglobal_defs &#123; router_id nginx01 IDå&#125;vrrp_instance SL &#123; #å®ä¾‹å state MASTER #ä¸» interface eth0 #æœ¬æœºç½‘å¡å virtual_router_id 51 priority 100 advert_int 1 authentication &#123; #åŒä¸€ç»„çš„è®¤è¯ auth_type PASS auth_pass 1111 &#125; virtual_ipaddress &#123; #è™šæ‹Ÿç½‘å¡çš„åœ°å€ 192.168.0.230 &#125;&#125; å¦ä¸€å° ! Configuration File for keepalivedglobal_defs &#123;router_id lb110&#125; vrrp_instance testï¼ˆéœ€è¦ä¸€è‡´ï¼‰ &#123; state BACKUP interface ens33 virtual_router_id 51 priority 50 advert_int 1 authentication &#123; auth_type PASS auth_pass 1111 &#125; virtual_ipaddress &#123; 192.168.44.200 &#125;&#125; HTTPsé›†æˆéƒ¨ç½²LNMPç¯å¢ƒ https://oneinstack.com/ **è¯ä¹¦å®‰è£… ** # HTTPS serverserver &#123; listen 443 ssl; server_name localhost; ssl_certificate cert.pem; ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; location / &#123; root html; index index.html index.htm; &#125; &#125; 80æŒ‡å‘443 server &#123; listen 80; server_name www.åŸŸå.com; rewrite ^(.*)$ https://$&#123;server_name&#125;$1 permanent; &#125;server &#123; listen 443; server_name www.åŸŸå.com; root /home/wwwroot; ssl on; ssl_certificate /etc/nginx/certs/server.crt; ssl_certificate_key /etc/nginx/certs/server.key; ....&#125;"},{"title":"æ–‡ä»¶ç®¡ç†","path":"/wiki/linux/æ–‡ä»¶ç®¡ç†.html","content":"ç»å¯¹è·¯å¾„æ–‡ä»¶çš„æ—¶é—´ls -l æ–‡ä»¶å ä»…çœ‹çš„æ˜¯æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´Linuxæ–‡ä»¶æœ‰ä¸‰ç§æ—¶é—´,ç”¨statæŸ¥çœ‹ ä¾‹å¦‚ï¼šstat anaconda-ks.cfg è®¿é—®æ—¶é—´ï¼šatimeï¼ŒæŸ¥çœ‹å†…å®¹ï¼Œç”¨catæ£€æµ‹ä¿®æ”¹æ—¶é—´ï¼šmtimeï¼Œä¿®æ”¹å†…å®¹æ”¹å˜æ—¶é—´ï¼šctimeï¼Œä¿®æ”¹å†…å®¹ï¼Œä¿®æ”¹æƒé™ç­‰å±æ€§ï¼Œå‡¡æ˜¯æœ‰æ”¹åŠ¨éƒ½ä¼šå˜ æ–‡ä»¶ç±»å‹Linuxæ–‡ä»¶æ˜¯æ²¡æœ‰æ‰©å±•åï¼ï¼ï¼ // æ–¹æ³•ä¸€ï¼šls -l æ–‡ä»¶å //çœ‹ç¬¬ä¸€ä¸ªå­—ç¬¦- æ™®é€šæ–‡ä»¶ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼ŒäºŒè¿›åˆ¶ï¼Œå‹ç¼©æ–‡ä»¶ï¼Œç”µå½±ï¼Œå›¾ç‰‡ã€‚ã€‚ã€‚ï¼‰,ä¾‹å¦‚ï¼š/bin/lsd ç›®å½•æ–‡ä»¶ï¼ˆè“è‰²ï¼‰ï¼Œä¾‹å¦‚/home/b è®¾å¤‡æ–‡ä»¶ï¼ˆå—è®¾å¤‡ï¼‰å­˜å‚¨è®¾å¤‡ç¡¬ç›˜ï¼ŒUç›˜ï¼Œä¾‹å¦‚ï¼š/dev/sdac è®¾å¤‡æ–‡ä»¶ï¼ˆå­—ç¬¦è®¾å¤‡ï¼‰æ‰“å°æœºï¼Œä¾‹å¦‚ï¼šç»ˆç«¯/dev/tty1s å¥—æ¥å­—æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š/run/rpcbind.sock p ç®¡é“æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š/run/systemd/initctl/fifol é“¾æ¥æ–‡ä»¶ï¼ˆæ·¡è“è‰²ï¼‰ï¼Œä¾‹å¦‚ï¼š/bin ps:é€šè¿‡é¢œè‰²åˆ¤æ–­æ–‡ä»¶çš„ç±»å‹æ˜¯é”™è¯¯çš„ï¼ï¼ï¼ // æ–¹æ³•äºŒï¼š[root@xxx ~]# file /etc/grub.conf å¸¸è§çš„æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½&#x2F;bootï¼šå¼•å¯¼æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œå†…æ ¸æ–‡ä»¶(vmlinuz)ã€å¼•å¯¼åŠ è½½å™¨(bootloader, grub)éƒ½å­˜æ”¾äºæ­¤ç›®å½• &#x2F;binï¼šæ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼›ä¸èƒ½å…³è”è‡³ç‹¬ç«‹åˆ†åŒºï¼ŒOSå¯åŠ¨å³ä¼šç”¨åˆ°çš„ç¨‹åº &#x2F;sbinï¼šç®¡ç†ç±»çš„åŸºæœ¬å‘½ä»¤ï¼›ä¸èƒ½å…³è”è‡³ç‹¬ç«‹åˆ†åŒºï¼ŒOSå¯åŠ¨å³ä¼šç”¨åˆ°çš„ç¨‹åº &#x2F;libï¼šå¯åŠ¨æ—¶ç¨‹åºä¾èµ–çš„åŸºæœ¬å…±äº«åº“æ–‡ä»¶ä»¥åŠå†…æ ¸æ¨¡å—æ–‡ä»¶(&#x2F;lib&#x2F;modules) &#x2F;lib64ï¼šä¸“ç”¨äºx86_64ç³»ç»Ÿä¸Šçš„è¾…åŠ©å…±äº«åº“æ–‡ä»¶å­˜æ”¾ä½ç½® &#x2F;etcï¼šé…ç½®æ–‡ä»¶ç›®å½• &#x2F;home&#x2F;USERNAMEï¼šæ™®é€šç”¨æˆ·å®¶ç›®å½• &#x2F;rootï¼šç®¡ç†å‘˜çš„å®¶ç›®å½• &#x2F;mediaï¼šä¾¿æºå¼ç§»åŠ¨è®¾å¤‡æŒ‚è½½ç‚¹ &#x2F;mntï¼šä¸´æ—¶æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹ &#x2F;devï¼šè®¾å¤‡æ–‡ä»¶åŠç‰¹æ®Šæ–‡ä»¶å­˜å‚¨ä½ç½® â€‹ b: block deviceï¼Œéšæœºè®¿é—®â€‹ c: character deviceï¼Œçº¿æ€§è®¿é—®&#x2F;optï¼šç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºçš„å®‰è£…ä½ç½® &#x2F;srvï¼šç³»ç»Ÿä¸Šè¿è¡Œçš„æœåŠ¡ç”¨åˆ°çš„æ•°æ® &#x2F;tmpï¼šä¸´æ—¶æ–‡ä»¶å­˜å‚¨ä½ç½®&#x2F;usr: universal shared, read-only data bin: ä¿è¯ç³»ç»Ÿæ‹¥æœ‰å®Œæ•´åŠŸèƒ½è€Œæä¾›çš„åº”ç”¨ç¨‹åºsbin: libï¼š32ä½ä½¿ç”¨ lib64ï¼šåªå­˜åœ¨64ä½ç³»ç»Ÿ include: Cç¨‹åºçš„å¤´æ–‡ä»¶(header files) shareï¼šç»“æ„åŒ–ç‹¬ç«‹çš„æ•°æ®ï¼Œä¾‹å¦‚doc, manç­‰ localï¼šç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºçš„å®‰è£…ä½ç½® bin, sbin, lib, lib64, etc, share&#x2F;var: variable data files cache: åº”ç”¨ç¨‹åºç¼“å­˜æ•°æ®ç›®å½• lib: åº”ç”¨ç¨‹åºçŠ¶æ€ä¿¡æ¯æ•°æ® localï¼šä¸“ç”¨äºä¸º&#x2F;usr&#x2F;localä¸‹çš„åº”ç”¨ç¨‹åºå­˜å‚¨å¯å˜æ•°æ® lock: é”æ–‡ä»¶ log: æ—¥å¿—ç›®å½•åŠæ–‡ä»¶ opt: ä¸“ç”¨äºä¸º&#x2F;optä¸‹çš„åº”ç”¨ç¨‹åºå­˜å‚¨å¯å˜æ•°æ® run: è¿è¡Œä¸­çš„è¿›ç¨‹ç›¸å…³æ•°æ®,é€šå¸¸ç”¨äºå­˜å‚¨è¿›ç¨‹pidæ–‡ä»¶ spool: åº”ç”¨ç¨‹åºæ•°æ®æ±  tmp: ä¿å­˜ç³»ç»Ÿä¸¤æ¬¡é‡å¯ä¹‹é—´äº§ç”Ÿçš„ä¸´æ—¶æ•°æ® &#x2F;proc: ç”¨äºè¾“å‡ºå†…æ ¸ä¸è¿›ç¨‹ä¿¡æ¯ç›¸å…³çš„è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ &#x2F;sysï¼šç”¨äºè¾“å‡ºå½“å‰ç³»ç»Ÿä¸Šç¡¬ä»¶è®¾å¤‡ç›¸å…³ä¿¡æ¯è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ &#x2F;selinux: security enhanced Linuxï¼Œselinuxç›¸å…³çš„å®‰å…¨ç­–ç•¥ç­‰ä¿¡æ¯çš„å­˜å‚¨ä½ç½® vimå¸¸ç”¨è¯­æ³• [^å¤‡æ³¨]: è¯­æ³• nåŠŸèƒ½* dd yy p Ctrl + r yæ•°å­—y å¸¸ç”¨å‘½ä»¤ tpyeï¼šæŸ¥çœ‹å‘½ä»¤ç±»å‹ mkdir -pï¼šé€’å½’åˆ›å»ºç›®å½• cp -r æº ç›® ï¼šé€’å½’å¤åˆ¶"}]